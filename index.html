<!-- Branch: main --><!-- Revision: 48d5ea5aa254d749603093171bb2b2b7e5804150 --><!-- Created at: 06 of May 2025 02:27:09 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}@media screen and (min-width:299px) and (max-width:301px) and (min-height:249px) and (max-height:251px){body{background-color:transparent}}button{padding:0}#dynamic{height:100vh;overflow:hidden}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29m4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7m-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29m47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}._0LRN8a_container{text-align:center;flex-direction:column;justify-content:center;width:100%;height:145px;display:flex;position:relative;overflow:hidden}._0LRN8a_completeContainer{justify-content:center;align-items:center}._0LRN8a_popup{background-color:#fff;flex-direction:column;justify-content:center;height:100%;padding:0;display:flex;position:absolute;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){._0LRN8a_popup{color:#fff;background:#121212}}._0LRN8a_complete{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2272%22%20height%3D%2272%22%20fill%3D%22none%22%3E%3Crect%20width%3D%2271%22%20height%3D%2271%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill%3D%22%2300AEFF%22%20rx%3D%2235.5%22%2F%3E%3Cpath%20stroke%3D%22%23fff%22%20stroke-linecap%3D%22round%22%20stroke-width%3D%226%22%20d%3D%22M20.743%2036.375%2031.5%2047.132M31.5%2047.132%2053.882%2024.75%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:71px;height:71px;margin-top:5px;display:inline-block}@media (max-width:335px){._0LRN8a_complete{width:60px;height:60px;margin-top:3px}}._0LRN8a_title{color:#000;margin-top:15px;margin-bottom:18px;padding:0 30px;font-weight:700}@media (prefers-color-scheme:dark){._0LRN8a_title{color:#fff}}._0LRN8a_title._0LRN8a_question{font-size:17px}@media (max-width:335px){._0LRN8a_title._0LRN8a_question{margin-top:3px;font-size:15px}}._0LRN8a_title._0LRN8a_thanks{font-size:22px}@media (max-width:335px){._0LRN8a_title._0LRN8a_thanks{margin-top:8px;margin-bottom:8px;font-size:18px}}._0LRN8a_options{justify-content:center;gap:15px;max-width:303px;margin-bottom:0;margin-left:auto;margin-right:auto;padding:0 16px;display:flex}@media (max-width:335px){._0LRN8a_options{gap:10px;max-width:245px;padding:0 12px 12px}}._0LRN8a_option{cursor:pointer;background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;flex-direction:column;flex:none;justify-content:center;align-items:center;width:91px;height:88px;padding-top:10px;transition:background-color .2s ease-in-out;display:flex;box-shadow:0 1px 3px rgba(0,0,0,.1)}@media (prefers-color-scheme:dark){._0LRN8a_option{color:#fff;background:#121212}}@media (max-width:335px){._0LRN8a_option{border-radius:10px;width:75px;height:75px}}._0LRN8a_option:hover{background-color:#f8f8f8}._0LRN8a_emoji{margin-bottom:4px;font-size:40px}@media (max-width:335px){._0LRN8a_emoji{margin-bottom:2px;font-size:32px}}._0LRN8a_optionText{color:#000;padding-bottom:5px;font-size:14px;font-weight:500}@media (prefers-color-scheme:dark){._0LRN8a_optionText{color:#fff}}@media (max-width:335px){._0LRN8a_optionText{padding-bottom:3px;font-size:12px}}.rM5gmW_adInfoRow{margin-bottom:3px;line-height:1.4;display:flex}.rM5gmW_adInfoLabel{color:#000;min-width:80px;font-weight:400}@media (prefers-color-scheme:dark){.rM5gmW_adInfoLabel{color:#fff}}@media (max-width:335px){.rM5gmW_adInfoLabel{min-width:70px}}.rM5gmW_adInfoValue{color:#9f9f9f;letter-spacing:0;text-align:left;white-space:nowrap;text-overflow:ellipsis;flex:auto;overflow:hidden}@media (prefers-color-scheme:dark){.rM5gmW_adInfoValue{color:silver}}@media (max-width:335px){.rM5gmW_adInfoValue{font-size:10px}}.rM5gmW_adInfoValue.rM5gmW_expanded{white-space:normal;word-break:break-word}.closeIcon.privacy{filter:invert();width:11px;height:11px}@media (max-width:335px){.closeIcon.privacy{width:9px;height:9px}}@media (prefers-color-scheme:dark){.closeIcon.privacy{filter:none}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:9px 9px 0 0;padding-top:12px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_privacyPopup{color:#fff;background:#121212}}@media (max-width:335px){.FbTWOG_privacyPopup{border-radius:7px 7px 0 0;padding-top:10px}}.FbTWOG_popupHeader{justify-content:space-between;height:24px;margin-bottom:-30px;display:flex;position:relative}.FbTWOG_popupHeader button{z-index:1;cursor:pointer;background:0 0;border:none;position:absolute;top:-3px;right:3.44%}.FbTWOG_readMore{color:#0376d9;padding:16px 0;font-size:16px;font-weight:400}@media (prefers-color-scheme:dark){.FbTWOG_readMore{color:#4a9eff}}@media (max-width:335px){.FbTWOG_readMore{padding:12px 0;font-size:12px}}.FbTWOG_privacyPolicy{text-align:center}.FbTWOG_popupFooter{color:#000;background-color:#f1f1f1;width:100%;margin-top:5px;padding:15px;font-size:12px}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter{color:#fff;background-color:#1e1e1e}}@media (max-width:335px){.FbTWOG_popupFooter{margin-top:3px;padding:12px 10px;font-size:10px}}.FbTWOG_popupFooter .FbTWOG_adInfoTitle{margin-bottom:3px;font-weight:700;line-height:1.4}.FbTWOG_popupBody{padding-top:0;font-size:14px}@media (max-width:335px){.FbTWOG_popupBody{padding-top:0;font-size:13px}}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}@media (prefers-color-scheme:dark){.FbTWOG_show{box-shadow:0 -10px 20px -5px rgba(0,0,0,.75)}}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_mask{background:rgba(0,0,0,.5)}}.FbTWOG_debug{color:#bfbfbf;height:200px;font-size:11px;overflow-x:hidden;overflow-y:auto}@media (prefers-color-scheme:dark){.FbTWOG_debug{color:#a0a0a0}}@media (max-width:335px){.FbTWOG_debug{height:150px;font-size:9px}}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.NQnIja_countdownInvisible{width:18px;height:18px}.mqB7Ka_skipIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='94.7' height='94.9'%3E%3Cg fill='%23FFF' stroke='%23000' stroke-width='3.417' stroke-miterlimit='10'%3E%3Cpath d='m37 75.5 22.4-22.4H1.9V41.7h57.5L37 19.3l8.1-8.1 36.2 36.2-36.2 36.2z'/%3E%3Cpath d='M92.733 11.138v72.4h-11.5v-72.4z'/%3E%3C/g%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74m9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.closeIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='525.4px' height='525.5px'%3E%3Cpolygon fill='%23ffffff' stroke='%23000000' stroke-width='26' stroke-miterlimit='10' points='452.6,8.9 262.9,198.6 73.1,8.9 9,73 198.8,262.7 9,452 73.1,516.1 262.9,326.8 452.6,516.1 516.7,452 326.9,262.7 516.7,73'%3E%3C/polygon%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3Ageometricprecision%3Btext-rendering%3Ageometricprecision%3Bimage-rendering%3Aoptimizequality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7q-5.098%2016.59-23%2015.5%204.538%203.446%202%208.5h-5Q5%2040-.5%2035.5v-5a133%20133%200%200%200%2010-9.5q7.75-2.25%205.5%205.5L12.5%2029q12.955%202.295%2016-10.5Q26.88%207.195%2015.5%207q-3.152-2.6-1-6%2016.18-2.067%2021%2013.5%22%20style%3D%22opacity%3A.849%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="5.77.0";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var t=p();return(n=function(r,e){return t[r-=143]})(r,e)}for(var r=n,t=p,e=n,s=t();;)try{if(parseInt(e(154))/1*(parseInt(e(158))/2)+-parseInt(e(159))/3*(-parseInt(e(150))/4)+parseInt(e(147))/5+parseInt(e(157))/6*(-parseInt(e(155))/7)+parseInt(e(160))/8+parseInt(e(146))/9*(-parseInt(e(149))/10)+parseInt(e(145))/11*(-parseInt(e(152))/12)==159889)break;s.push(s.shift())}catch(n){s.push(s.shift())}function p(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(p=function(){return r})()}("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">for(var e=r,n=s,t=r,o=n();;)try{if(parseInt(t(239))/1*(parseInt(t(234))/2)+parseInt(t(250))/3+parseInt(t(246))/4+parseInt(t(249))/5+-parseInt(t(255))/6+-parseInt(t(251))/7+parseInt(t(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}function s(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(s=function(){return e})()}function r(e,n){var t=s();return(r=function(e,n){return t[e-=234]})(e,n)}if("function"==typeof getVungleReplacementTokens){var i,T={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},a=getVungleReplacementTokens(),c=(i={},Object[e(245)](a).forEach((function(e){i[vungleTokenMap[e]]=a[e]})),i);window[e(254)][e(237)][e(235)](c);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:c[e(253)]("INCENTIVIZED")&&"true"===c[e(236)].toLowerCase()};Object[e(245)](T)[e(244)]((function(t){c[e(253)](t)&&(n[T[t]]=c[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t;var n=class extends Error{};class i{static getInstance(e){return this.instance||(this.instance=new i(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new n(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var r=i,a=class{},o=class extends a{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{};return a.map((e=>o[e]))}getSeriesTokens(e){var t,n,i,r;let a=[],o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{},s=[];return Object.keys(o).filter((t=>t.startsWith(e))).forEach((t=>{let n=t.replace(e,"");/^\d+$/.test(n)?s.push(parseInt(n,10)):a.push(t)})),0===s.length||(s.sort(((e,t)=>e-t)),s.forEach((t=>a.push(`${e}${t}`)))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},s=(e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},l=class extends a{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=s(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter((t=>t.activity.type===e)):this.activity}getActivityEvents(){return this.activity.filter((e=>"event"===e.activity.type))}getActivityLogs(){return this.activity.filter((e=>"log"===e.activity.type))}getActivityEventPairs(e,t,n){let i=this.getActivityEvents().filter((t=>t.activity.eventType===e)),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.name===t?a=e:i.name===n&&a&&(r.push([a,e]),a=null)})),r}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event))}};function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}))}return e}var d=((ec={})[ec.NotStarted=0]="NotStarted",ec[ec.Running=1]="Running",ec[ec.Stopped=2]="Stopped",ec);const u={type:"xstate.init"},E="xstate.assign";function v(e){return void 0===e?[]:[].concat(e)}function _(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function h(e){return t=>e===t}function S(e){return"string"==typeof e?{type:e}:e}function T(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===E){r=!0;let t=c({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}const p=(e,t)=>e.actions.forEach((({exec:n})=>n&&n(e.context,t)));function g(e){return{type:E,assignment:e}}var C=class extends a{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=T(v(e.states[e.initial].entry).map((e=>_(e,t.actions))),e.context,u),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:h(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,o=S(n),s=e.states[i];if(s.on){let t=v(s.on[o.type]);for(let n of("*"in s.on&&t.push(...v(s.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:c=()=>!0}="string"==typeof n?{target:n}:n,d=void 0===t,u=null!=t?t:i,E=e.states[u];if(c(a,o)){let[e,n,c]=T((d?v(l):[].concat(s.exit,l,E.entry).filter((e=>e))).map((e=>_(e,r._options.actions))),a,o),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||c,matches:h(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:h(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null===(t=e.config)||void 0===t?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=d.NotStarted,i=new Set,r={_machine:e,send:r=>{n===d.Running&&(p(t=e.transition(t,r),S(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:h(n.value)}}else t=e.initialState;return n=d.Running,p(t,u),r},stop:()=>(n=d.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var A=()=>"m48d5ea5aa",O=((ed={}).LOADING="loading",ed.DEFAULT="default",ed.EXPANDED="expanded",ed.RESIZED="resized",ed.HIDDEN="hidden",ed),m=(e=A())=>{var t,n,i,r,a,o,s,l;let d=null===(t=window[e])||void 0===t?void 0:t.mraid,u=null===(n=window[e])||void 0===n?void 0:n.mraidExt;return!d&&((null===(o=window.vungle)||void 0===o?void 0:o.mraid)?window[e]={mraid:c({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:c({},window.mraid)})),!u&&(null===(i=window.vungle)||void 0===i?void 0:i.mraidExt)&&(window[e]=I(c({},window[e]),{mraidExt:c({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null===(s=window.vungle.mraidExt)||void 0===s?void 0:s.getOS,getOSVersion:null===(l=window.vungle.mraidExt)||void 0===l?void 0:l.getOSVersion})),{mraid:null===(r=window[e])||void 0===r?void 0:r.mraid,mraidExt:null===(a=window[e])||void 0===a?void 0:a.mraidExt}},f=class extends a{init(){let{mraid:e,mraidExt:t}=m(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},N=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},D=class extends a{getNewInterval(e,t){let n=new N(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},R=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()})),this.remainingTime=e,this.isDestroyed=!1}},y=class extends a{destroyAll(){this.timers.forEach((e=>{e.destroy()}))}getNewTimer(e,t){let n=new R(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach((e=>{e.start()}))}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},L=()=>{let e=r.getInstance(),t=f.getServiceIdentifier();return e.get(t)},P=((eu={}).UNKNOWN="unknown",eu.MREC="mrec",eu.FULLSCREEN="fullscreen",eu.BANNER="banner",eu.IN_LINE="in_line",eu),b=()=>{let e=r.getInstance(),t=o.getServiceIdentifier();return e.get(t)},w=((eE=w||{}).ACC_TESTS="ACC_TESTS",eE.ADM_HTML="ADM_HTML",eE.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",eE.AD_EXPERIENCE="AD_EXPERIENCE",eE.AD_SOURCE="AD_SOURCE",eE.ALT_EC_0="ALT_EC_0",eE.APP_CONTENT_RATING="APP_CONTENT_RATING",eE.APP_DESCRIPTION="APP_DESCRIPTION",eE.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",eE.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",eE.APP_ICON="APP_ICON",eE.APP_INFO_POSITION="APP_INFO_POSITION",eE.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",eE.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",eE.APP_NAME="APP_NAME",eE.APP_NAME_ENCODED="APP_NAME_ENCODED",eE.APP_RATING="APP_RATING",eE.APP_RATING_COUNT="APP_RATING_COUNT",eE.APP_SCREENSHOTS="APP_SCREENSHOTS",eE.APP_STORE_ID="APP_STORE_ID",eE.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",eE.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",eE.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",eE.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",eE.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",eE.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",eE.APP_STORE_RATING="APP_STORE_RATING",eE.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",eE.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",eE.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",eE.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",eE.COUNTRY_CODE="COUNTRY_CODE",eE.CREATIVE_FORMAT="CREATIVE_FORMAT",eE.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",eE.CREATIVE_ID="CREATIVE_ID",eE.CREATIVE_TYPE="CREATIVE_TYPE",eE.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",eE.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",eE.CTA_BUTTON_ICON="CTA_BUTTON_ICON",eE.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",eE.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",eE.CTA_BUTTON_URL="CTA_BUTTON_URL",eE.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",eE.DSA_REQUIRED="DSA_REQUIRED",eE.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",eE.EC_CTA_URL="EC_CTA_URL",eE.EC_HTML="EC_HTML",eE.EC_HTML_2="EC_HTML_2",eE.EC_HTML_COMPRESS="EC_HTML_COMPRESS",eE.EC_IMAGE="EC_IMAGE",eE.EC_IMAGE_2="EC_IMAGE_2",eE.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",eE.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",eE.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",eE.ERID_ADVERTISER_INFO="ERID_ADVERTISER_INFO",eE.ERID_ADVERTISER_LINK="ERID_ADVERTISER_LINK",eE.ERID_RECOMMEND_RULE="ERID_RECOMMEND_RULE",eE.FULL_CTA="FULL_CTA",eE.FULL_CTA_OPTION="FULL_CTA_OPTION",eE.HEADER_BIDDING="HEADER_BIDDING",eE.INCENTIVIZED="INCENTIVIZED",eE.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",eE.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",eE.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",eE.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",eE.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",eE.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",eE.IS_RUNNING_INSIDE_EMBED="IS_RUNNING_INSIDE_EMBED",eE.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",eE.MAIN_MANIFEST="MAIN_MANIFEST",eE.MAIN_STREAM="MAIN_STREAM",eE.MAIN_VIDEO="MAIN_VIDEO",eE.MAX_AD_DURATION="MAX_AD_DURATION",eE.MEDIATION_NAME="MEDIATION_NAME",eE.NAUTILUS_VERSION="NAUTILUS_VERSION",eE.OBSERVABILITY="OBSERVABILITY",eE.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",eE.OM_ENABLED="OM_ENABLED",eE.OM_SDK_DATA="OM_SDK_DATA",eE.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",eE.PICTURE_IN_PICTURE="PICTURE_IN_PICTURE",eE.PLACEMENT_TYPE="PLACEMENT_TYPE",eE.PLATFORM="PLATFORM",eE.REAL_START_MUTED="REAL_START_MUTED",eE.SDK_VERSION="SDK_VERSION",eE.SESSION_ID="SESSION_ID",eE.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",eE.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",eE.SKOVERLAY_AUTO="SKOVERLAY_AUTO",eE.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",eE.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",eE.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",eE.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",eE.SKOVERLAY_POSITION="SKOVERLAY_POSITION",eE.SK_CTA_ONLY="SK_CTA_ONLY",eE.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",eE.SK_FSC="SK_FSC",eE.START_MUTED="START_MUTED",eE.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",eE.STREAM_CHUNK_0="STREAM_CHUNK_0",eE.STREAM_CHUNK_1="STREAM_CHUNK_1",eE.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",eE.TRACK_0="TRACK_0",eE.USER_AGENT="USER_AGENT",eE.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",eE.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",eE.VIDEO_LOOPING="VIDEO_LOOPING",eE.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",eE.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",eE.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",eE.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",eE.VX_ENDCARD="VX_ENDCARD",eE.EC_HTML_PRELOAD="EC_HTML_PRELOAD",eE.PUB_ID="PUB_ID",eE.PLACEMENT_ID="PLACEMENT_ID",eE.VIDEO_DURATION="VIDEO_DURATION",eE),V=((ev=V||{})[ev.ACCELERATE=0]="ACCELERATE",ev[ev.EDSP=1]="EDSP",ev[ev.UNKNOWN=2]="UNKNOWN",ev),M=e=>{var t;return!!e&&"true"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},k=class extends a{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return P.BANNER;case"mrec":return P.MREC;case"fullscreen":return P.FULLSCREEN;case"in_line":return P.IN_LINE;default:return P.UNKNOWN}},r=i(null!==(t=null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.getPlacementType())&&void 0!==t?t:"");return r!==P.UNKNOWN?r:i(null!==(n=this.tokenService.get(w.PLACEMENT_TYPE))&&void 0!==n?n:"")}isMrec(){return this.getPlacementType()===P.MREC}isBanner(){return this.getPlacementType()===P.BANNER}isFullscreen(){return this.getPlacementType()===P.FULLSCREEN}isInLine(){return this.getPlacementType()===P.IN_LINE}isRewarded(){return M(this.tokenService.get(w.INCENTIVIZED))}getAdSource(){var e;if(!this.tokenService.has(w.AD_SOURCE)||void 0===this.tokenService.get(w.AD_SOURCE))return V.UNKNOWN;switch(null===(e=this.tokenService.get(w.AD_SOURCE))||void 0===e?void 0:e.toLowerCase()){case"":return V.UNKNOWN;case"accelerate":return V.ACCELERATE;default:return V.EDSP}}constructor(e=b(),t=L()){super(),this.tokenService=e,this.mraidService=t}},U=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},B=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")),H=((e_={}).iOS="iOS",e_.Android="Android",e_.Windows="Windows",e_.Amazon="Amazon",e_.Unknown="Unknown",e_),W=((eh={})[eh.LANDSCAPE=0]="LANDSCAPE",eh[eh.PORTRAIT=1]="PORTRAIT",eh[eh.UNKNOWN=2]="UNKNOWN",eh);class x extends a{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null===(n=this.mraidService)||void 0===n||null===(t=n.getMraidExt())||void 0===t||null===(e=t.getOS)||void 0===e?void 0:e.call(t);return r&&(this.operatingSystem=x.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=x.parseOperatingSystem(null!==(i=this.tokenService.get(w.PLATFORM))&&void 0!==i?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new U(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getOSVersion)||void 0===e?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getSDKVersion)||void 0===e?void 0:e.call(t);return void 0!==n&&"0.0.0"!==n||!this.tokenService.has(w.SDK_VERSION)?this.sdkVersion=new U(n):this.sdkVersion=new U(this.tokenService.get(w.SDK_VERSION)),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new U(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getMraidVersion)||void 0===e?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.version)&&void 0!==n?n:""}getBrowserName(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.name)&&void 0!==n?n:""}getDeviceModel(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.model)&&void 0!==n?n:""}getDeviceType(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.type)&&void 0!==n?n:""}getOrientation(){return window.outerHeight>window.outerWidth?1:window.outerHeight<window.outerWidth?0:2}getDeviceCountryCode(){var e;return null!==(e=this.tokenService.get(w.COUNTRY_CODE))&&void 0!==e?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new U("17"))&&t.isLessThan(new U("17.1.1"))}constructor(e=b(),t=L()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(w.USER_AGENT);if(n)try{this.uaParserResult=JSON.parse(B(n))}catch(e){}}}x.sdkSeven=new U("7");var F=((eS={}).ERROR="error",eS.EVENT="event",eS),K=((eT={}).AD_CLOSE="ad-close",eT.AD_FEEDBACK="ad-feedback",eT.AD_LOAD="ad-load",eT.AD_LOAD_COMPLETE="ad-load-complete",eT.AD_START="ad-start",eT.ALTERNATIVE_VIEW="alternative-view",eT.APP_STORE_DURATION="app-store-duration",eT.CLICK_METRICS="click-metrics",eT.CLICK_OCCURRED="click-occurred",eT.CTA="cta",eT.FORFEIT_REWARD="forfeit-reward",eT.FRUSTRATION_CLICKS="frustration-clicks",eT.FSC="fsc",eT.GRANT_REWARD="grant-reward",eT.HLS_LEVEL_SWITCHED="hls-level-switched",eT.HLS_NOT_SUPPORTED="hls-not-supported",eT.HLS_VIDEO_STALLED="hls-video-stalled",eT.IMPRESSION="impression",eT.INACTIVITY_OBSERVED="inactivity-observed",eT.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",eT.PRIVACY_CTA="privacy-cta",eT.SCENE_END="scene-end",eT.SCENE_START="scene-start",eT.STORE_KIT_OVERLAY="store-kit-overlay",eT.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",eT.TEMPLATE_ERROR="template-error",eT.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",eT.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",eT.VIDEO_START="video-start",eT.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",eT.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",eT.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",eT.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",eT),G=((ep={}).AD_CLOSE="ad-close",ep.AD_FEEDBACK_BROKEN="ad-feedback-broken",ep.AD_FEEDBACK_LOVE="ad-feedback-love",ep.AD_FEEDBACK_OFFENSIVE="ad-feedback-offensive",ep.AD_LOAD="ad-load",ep.AD_LOAD_COMPLETE="ad-load-complete",ep.AD_START="ad-start",ep.AD_START_WITH_ENDCARD="ad-start-with-endcard",ep.AD_START_WITH_LAST_CHANCE_ENDCARD="ad-start-with-last-chance-endcard",ep.AD_START_WITH_VIDEO="ad-start-with-video",ep.ALTERNATIVE_VIEW="alternative-view",ep.APP_STORE_DURATION="app-store-duration",ep.COMPOSITE_SCENE_END="composite-scene-end",ep.CUSTOM_VIDEO_PLAYER="custom-video-player",ep.DOWNLOAD_BUTTON_CTA="download_button_cta",ep.ENDCARD_CTA="endcard_cta",ep.ENDCARD_SCENE_END="endcard-scene-end",ep.ENDCARD_SCENE_START="endcard-scene-start",ep.FRUSTRATION_CLICKS="frustration-clicks",ep.FSC="fsc",ep.GRANT_REWARD="grant-reward",ep.HLS_LEVEL_SWITCHED="hls-level-switched",ep.HLS_NOT_SUPPORTED="hls-not-supported",ep.HLS_VIDEO_STALLED="hls-video-stalled",ep.IMAGE_SCENE_END="image-scene-end",ep.IMPRESSION="impression",ep.INACTIVITY_OBSERVED="inactivity-observed",ep.LAST_CHANCE_ENDCARD_CTA="last_chance_endcard_cta",ep.LAST_CHANCE_ENDCARD_SCENE_START="last-chance-endcard-scene-start",ep.NATIVE_VIDEO_PLAYER="native-video-player",ep.PERSISTENT_CTA="persistent_cta",ep.PRIVACY_CTA="privacy-cta",ep.PROGRESSIVE_VIDEO_PLAYER="progressive-video-player",ep.SCENE_END="scene-end",ep.TEMPLATE_ERROR="template-error",ep.VIDEO_SCENE_END="video-scene-end",ep.VIDEO_SCENE_START="video-scene-start",ep.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",ep.VIDEO_START="video-start",ep),Y=((eg={}).RESOURCE="resource",eg.PLAYABLE="playable",eg.TEMPLATE="template",eg),j=()=>[K.AD_CLOSE,K.AD_FEEDBACK,K.AD_LOAD,K.AD_LOAD_COMPLETE,K.AD_START,K.ALTERNATIVE_VIEW,K.APP_STORE_DURATION,K.CLICK_METRICS,K.CTA,K.FRUSTRATION_CLICKS,K.FSC,K.GRANT_REWARD,K.HLS_LEVEL_SWITCHED,K.HLS_NOT_SUPPORTED,K.HLS_VIDEO_STALLED,K.IMPRESSION,K.INACTIVITY_OBSERVED,K.PRIVACY_CTA,K.SCENE_END,K.SCENE_START,K.TEMPLATE_ERROR,K.UNKNOWN_MRAID_COMMAND,K.VIDEO_SKIP_TO_ENDCARD,K.VIDEO_START,K.WEB_VITALS_FIRST_CONTENTFUL_PAINT,K.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,K.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,K.WEB_VITALS_TIME_TO_FIRST_BYTE];const X="Unable to load img resource",z="video load fail after retry",$="notify fatal error after video load fail",Z="video load fail with no retry",q="video does not play after 10s",Q="video play fail after 30s",J="video failed to play",ee=[z,$,Z,q,Q,J,X];var ec,ed,eu,eE,ev,e_,eh,eS,eT,ep,eg,eC,eI,eA,eO,em,ef,eN,eD,eR,ey,eL,eP,eb,et=()=>{let e=r.getInstance(),t=x.getServiceIdentifier();return e.get(t)},en=()=>{let e=r.getInstance(),t=k.getServiceIdentifier();return e.get(t)},ei=(e,t)=>{let n=`context_${t}`;return r.getInstance().has(n)||r.getInstance().bind(n,e),{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}}},er=ei({scene:void 0},"SceneContext"),ea=()=>{var e;return null===(e=er.getValue())||void 0===e?void 0:e.scene},eo=()=>{let e=r.getInstance(),t=l.getServiceIdentifier();return e.get(t)},es=()=>eo(),el=((eC=el||{}).MINIMIZED="minimized",eC.MAXIMIZED="maximized",eC),ew=((eI=ew||{}).APP_STORE_OPEN="APP_STORE_OPEN",eI.APP_STORE_CLOSE="APP_STORE_CLOSE",eI),eV=(e,t=es())=>{let n=t.getActivityEventPairs("viewability",el.MINIMIZED,el.MAXIMIZED),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.getActivityEventPairs("store-kit-product-view",ew.APP_STORE_OPEN,ew.APP_STORE_CLOSE),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},eM=class extends a{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.injectedGetCurrentScene,this.injectedGetAdDuration),this.isObserved=this.observability.isObserved()}pushEvent(e){var t,n;if(this.isObserved){if(Array.isArray(e)){let n=e.filter((e=>e.name&&this.singleEventsToAccept.includes(e.name)));return void(n.length>0&&(null===(t=this.observability)||void 0===t||t.pushManyEvents(n)))}if(e.name&&this.singleEventsToAccept.includes(e.name)){let t=e.name;null===(n=this.observability)||void 0===n||n.pushEvent(t,e)}}}pushError(e,t){var n;this.isObserved&&(null===(n=this.observability)||void 0===n||n.pushError(e,{error_source:this.getErrorSource(e,t)}))}getErrorSource(e,t){var n,i;let r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,a=null!==(i=null==e?void 0:e.error_source)&&void 0!==i?i:Y.TEMPLATE;return(null==t?void 0:t.error_source)&&(a=t.error_source),(ee.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=Y.RESOURCE),a}constructor(e=b(),t=et(),n=en(),i=es(),r=ea,a=eV,o=j()){super(),this.tokenService=e,this.environmentService=t,this.placementTypeService=n,this.reportingService=i,this.injectedGetCurrentScene=r,this.injectedGetAdDuration=a,this.singleEventsToAccept=o,this.isObserved=!1}},ek=class extends a{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=L()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},eU={},eB=[],eH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,eW=Array.isArray;function ex(e,t){for(var n in t)e[n]=t[n];return e}function eF(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function eK(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?eA.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)null==o[a]&&(o[a]=e.defaultProps[a]);return eG(e,o,i,r,null)}function eG(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++em:r,__i:-1,__u:0};return null==r&&null!=eO.vnode&&eO.vnode(a),a}function eY(e){return e.children}function ej(e,t){this.props=e,this.context=t}function eX(e,t){if(null==t)return e.__?eX(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?eX(e):null}function ez(e){(!e.__d&&(e.__d=!0)&&ef.push(e)&&!e$.__r++||eN!=eO.debounceRendering)&&((eN=eO.debounceRendering)||eD)(e$)}function e$(){for(var e,t,n,i,r,a,o=1;ef.length;)ef.length>o&&ef.sort(eR),e=ef.shift(),o=ef.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=ex({},n)).__v=n.__v+1,eO.vnode&&eO.vnode(t),e0(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?eX(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,e1(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));e$.__r=0}function eZ(e,t,n,i,r,a,o,s,l,c,d){var u,E,_,v,h,S,T=i&&i.__k||eB,p=t.length;for(l=function(e,t,n,i,r){var a,o,s,l,c,d=n.length,u=d,E=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(o=t[a])&&"boolean"!=typeof o&&"function"!=typeof o?(l=a+E,(o=e.__k[a]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?eG(null,o,null,null,null):eW(o)?eG(eY,{children:o},null,null,null):null==o.constructor&&o.__b>0?eG(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,-1!=(c=o.__i=function(e,t,n,i){var r,a,o=e.key,s=e.type,l=t[n];if(null===l&&null==e.key||l&&o==l.key&&s==l.type&&!(2&l.__u))return n;if(i>+(null!=l&&!(2&l.__u)))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&o==l.key&&s==l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&o==l.key&&s==l.type)return a;a++}}return-1}(o,n,l,u))&&(u--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>d?E--:r<d&&E++),"function"!=typeof o.type&&(o.__u|=4)):c!=l&&(c==l-1?E--:c==l+1?E++:(c>l?E--:E++,o.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<d;a++)null!=(s=n[a])&&!(2&s.__u)&&(s.__e==i&&(i=eX(s)),function e(t,n,i){var r,a;if(eO.unmount&&eO.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||e2(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){eO.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||eF(t.__e),t.__c=t.__=t.__e=void 0}(s,s));return i}(n,t,T,l,p),u=0;u<p;u++)null!=(_=n.__k[u])&&(E=-1==_.__i?eU:T[_.__i]||eU,_.__i=u,S=e0(e,_,E,r,a,o,s,l,c,d),v=_.__e,_.ref&&E.ref!=_.ref&&(E.ref&&e2(E.ref,null,_),d.push(_.ref,_.__c||v,_)),null==h&&null!=v&&(h=v),4&_.__u||E.__k===_.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=eX(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(_,l,e):"function"==typeof _.type&&void 0!==S?l=S:v&&(l=v.nextSibling),_.__u&=-7);return n.__e=h,l}function eq(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||eH.test(t)?n:n+"px"}function eQ(e,t,n,i,r){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||eq(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||eq(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(ey,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=eL,e.addEventListener(t,a?eb:eP,a)):e.removeEventListener(t,a?eb:eP,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function eJ(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=eL++;else if(t.t<n.u)return;return n(eO.event?eO.event(t):t)}}}function e0(e,t,n,i,r,a,o,s,l,c){var d,u,E,_,v,h,S,T,p,g,C,I,O,A,m,f,N,D=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=t.__e=n.__e]),(d=eO.__b)&&d(t);e:if("function"==typeof D)try{if(T=t.props,p="prototype"in D&&D.prototype.render,g=(d=D.contextType)&&i[d.__c],C=d?g?g.props.value:d.__:i,n.__c?S=(u=t.__c=n.__c).__=u.__E:(p?t.__c=u=new D(T,C):(t.__c=u=new ej(T,C),u.constructor=D,u.render=e3),g&&g.sub(u),u.props=T,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),p&&null==u.__s&&(u.__s=u.state),p&&null!=D.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=ex({},u.__s)),ex(u.__s,D.getDerivedStateFromProps(T,u.__s))),_=u.props,v=u.state,u.__v=t,E)p&&null==D.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),p&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(p&&null==D.getDerivedStateFromProps&&T!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(T,C),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(T,u.__s,C)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=T,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(T,u.__s,C),p&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(_,v,h)}))}if(u.context=C,u.props=T,u.__P=e,u.__e=!1,O=eO.__r,A=0,p){for(u.state=u.__s,u.__d=!1,O&&O(t),d=u.render(u.props,u.state,u.context),m=0;m<u._sb.length;m++)u.__h.push(u._sb[m]);u._sb=[]}else do{u.__d=!1,O&&O(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++A<25);u.state=u.__s,null!=u.getChildContext&&(i=ex(ex({},i),u.getChildContext())),p&&!E&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(_,v)),f=d,null!=d&&d.type===eY&&null==d.key&&(f=function e(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:eW(t)?t.map(e):ex({},t)}(d.props.children)),s=eZ(e,eW(f)?f:[f],t,n,i,r,a,o,s,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),S&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else for(N=a.length;N--;)eF(a[N]);else t.__e=n.__e,t.__k=n.__k;eO.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,r,a,o,s,l){var c,d,u,E,_,v,h,S=n.props,T=t.props,p=t.type;if("svg"==p?r="http://www.w3.org/2000/svg":"math"==p?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((_=a[c])&&"setAttribute"in _==!!p&&(p?_.localName==p:3==_.nodeType)){e=_,a[c]=null;break}if(null==e){if(null==p)return document.createTextNode(T);e=document.createElementNS(r,p,T.is&&T),s&&(eO.__m&&eO.__m(t,a),s=!1),a=null}if(null==p)S===T||s&&e.data==T||(e.data=T);else{if(a=a&&eA.call(e.childNodes),S=n.props||eU,!s&&null!=a)for(S={},c=0;c<e.attributes.length;c++)S[(_=e.attributes[c]).name]=_.value;for(c in S)if(_=S[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=_;else if(!(c in T)){if("value"==c&&"defaultValue"in T||"checked"==c&&"defaultChecked"in T)continue;eQ(e,c,null,_,r)}for(c in T)_=T[c],"children"==c?E=_:"dangerouslySetInnerHTML"==c?d=_:"value"==c?v=_:"checked"==c?h=_:s&&"function"!=typeof _||S[c]===_||eQ(e,c,_,S[c],r);if(d)s||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),eZ("template"==t.type?e.content:e,eW(E)?E:[E],t,n,i,"foreignObject"==p?"http://www.w3.org/1999/xhtml":r,a,o,a?a[0]:n.__k&&eX(n,0),s,l),null!=a)for(c=a.length;c--;)eF(a[c]);s||(c="value","progress"==p&&null==v?e.removeAttribute("value"):null==v||v===e[c]&&("progress"!=p||v)&&("option"!=p||v==S[c])||eQ(e,c,v,S[c],r),c="checked",null!=h&&h!=e[c]&&eQ(e,c,h,S[c],r))}return e}(n.__e,t,n,i,r,a,o,l,c);return(d=eO.diffed)&&d(t),128&t.__u?void 0:s}function e1(e,t,n){for(var i=0;i<n.length;i++)e2(n[i],n[++i],n[++i]);eO.__c&&eO.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){eO.__e(e,t.__v)}}))}function e2(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){eO.__e(e,n)}}function e3(e,t,n){return this.constructor(e,n)}eA=eB.slice,eO={__e:function(e,t,n,i){for(var r,a,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},em=0,ej.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=ex({},this.state),"function"==typeof e&&(e=e(ex({},n),this.props)),e&&ex(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),ez(this))},ej.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ez(this))},ej.prototype.render=eY,ef=[],eD="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eR=function(e,t){return e.__v.__b-t.__v.__b},e$.__r=0,ey=/(PointerCapture)$|Capture$/i,eL=0,eP=eJ(!1),eb=eJ(!0);var e5,e4,e6,e8,e7=0,e9=[],te=eO,tt=te.__b,tn=te.__r,ti=te.diffed,tr=te.__c,ta=te.unmount,to=te.__;function ts(e,t){te.__h&&te.__h(e4,e,e7||t),e7=0;var n=e4.__H||(e4.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tl(e,t,n){var i=ts(e5++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):tT(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=e4,!e4.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),a&&a.call(this,e,t,n)||o};e4.__f=!0;var a=e4.shouldComponentUpdate,o=e4.componentWillUpdate;e4.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}o&&o.call(this,e,t,n)},e4.shouldComponentUpdate=r}return i.__N||i.__}function tc(e,t){var n=ts(e5++,3);!te.__s&&tS(n.__H,t)&&(n.__=e,n.u=t,e4.__H.__h.push(n))}function td(e){return e7=5,tu((function(){return{current:e}}),[])}function tu(e,t){var n=ts(e5++,7);return tS(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tE(){for(var e;e=e9.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(t_),e.__H.__h.forEach(th),e.__H.__h=[]}catch(t){e.__H.__h=[],te.__e(t,e.__v)}}te.__b=function(e){e4=null,tt&&tt(e)},te.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),to&&to(e,t)},te.__r=function(e){tn&&tn(e),e5=0;var t=(e4=e.__c).__H;t&&(e6===e4?(t.__h=[],e4.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(t_),t.__h.forEach(th),t.__h=[],e5=0)),e6=e4},te.diffed=function(e){ti&&ti(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==e9.push(t)&&e8===te.requestAnimationFrame||((e8=te.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),tv&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);tv&&(t=requestAnimationFrame(n))})(tE)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),e6=e4=null},te.__c=function(e,t){t.some((function(e){try{e.__h.forEach(t_),e.__h=e.__h.filter((function(e){return!e.__||th(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],te.__e(n,e.__v)}})),tr&&tr(e,t)},te.unmount=function(e){ta&&ta(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{t_(e)}catch(e){t=e}})),n.__H=void 0,t&&te.__e(t,n.__v))};var tv="function"==typeof requestAnimationFrame;function t_(e){var t=e4,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),e4=t}function th(e){var t=e4;e.__c=e.__(),e4=t}function tS(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function tT(e,t){return"function"==typeof t?t(e):t}var tp=Symbol.for("preact-signals");function tg(){if(tO>1)tO--;else{for(var e,t=!1;void 0!==tA;){var n=tA;for(tA=void 0,tm++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&ty(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(tm=0,tO--,t)throw e}}function tC(e){if(tO>0)return e();tO++;try{return e()}finally{tg()}}var tI=void 0,tA=void 0,tO=0,tm=0,tf=0;function tN(e){if(void 0!==tI){var t=e.n;if(void 0===t||t.t!==tI)return t={i:0,S:e,p:tI.s,n:void 0,t:tI,e:void 0,x:void 0,r:t},void 0!==tI.s&&(tI.s.n=t),tI.s=t,e.n=t,32&tI.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=tI.s,t.n=void 0,tI.s.n=t,tI.s=t),t}}function tD(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function tR(e){return new tD(e)}function ty(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tL(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tP(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tb(e){tD.call(this,void 0),this.x=e,this.s=void 0,this.g=tf-1,this.f=4}function tw(e){var t=e.u;if(e.u=void 0,"function"==typeof t){tO++;var n=tI;tI=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,tV(e),t}finally{tI=n,tg()}}}function tV(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,tw(e)}function tM(e){if(tI!==this)throw Error("Out-of-order effect");tP(this),tI=e,this.f&=-2,8&this.f&&tV(this),tg()}function tk(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function tU(e){var t=new tk(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}tD.prototype.brand=tp,tD.prototype.h=function(){return!0},tD.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},tD.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},tD.prototype.subscribe=function(e){var t=this;return tU((function(){var n=t.value,i=tI;tI=void 0;try{e(n)}finally{tI=i}}))},tD.prototype.valueOf=function(){return this.value},tD.prototype.toString=function(){return this.value+""},tD.prototype.toJSON=function(){return this.value},tD.prototype.peek=function(){var e=tI;tI=void 0;try{return this.value}finally{tI=e}},Object.defineProperty(tD.prototype,"value",{get:function(){var e=tN(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(tm>100)throw Error("Cycle detected");this.v=e,this.i++,tf++,tO++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{tg()}}}}),(tb.prototype=new tD).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===tf))return!0;if(this.g=tf,this.f|=1,this.i>0&&!ty(this))return this.f&=-2,!0;var e=tI;try{tL(this),tI=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return tI=e,tP(this),this.f&=-2,!0},tb.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}tD.prototype.S.call(this,e)},tb.prototype.U=function(e){if(void 0!==this.t&&(tD.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tb.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tb.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=tN(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),tk.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},tk.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,tw(this),tL(this),tO++;var e=tI;return tI=this,tM.bind(this,e)},tk.prototype.N=function(){2&this.f||(this.f|=2,this.o=tA,tA=this)},tk.prototype.d=function(){this.f|=8,1&this.f||tV(this)};var tB,tH,tW=[],tx=[];function tF(e,t){eO[e]=t.bind(null,eO[e]||function(){})}function tK(e){tH&&tH(),tH=e&&e.S()}function tG(e){var t=this,n=e.data,i=tY(n);i.value=n;var r=tu((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new tb((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})),r=new tb((function(){var e;return!Array.isArray(n.value)&&(null==(e=n.value)||null!=e.constructor)})),a=tU((function(){if(this.N=tq,r.value){var e=n.value;t.__v&&t.__v.__e&&3===t.__v.__e.nodeType&&(t.__v.__e.data=e)}})),o=t.__$u.d;return t.__$u.d=function(){a(),o.call(this)},[r,n]}),[]),a=r[0],o=r[1];return a.value?o.peek():o.value}function tY(e){return tu((function(){return tR(e)}),[])}tU((function(){tB=this.N}))(),tG.displayName="_st",Object.defineProperties(tD.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:tG},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),tF("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof tD&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),tF("__r",(function(e,t){tK();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u))&&(tU((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},r.__$u=i=n),tK(i),e(t)})),tF("__e",(function(e,t,n,i){tK(),e(t,n,i)})),tF("diffed",(function(e,t){if(tK(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var o in a){var s=a[o];void 0===s||o in i||(s.d(),a[o]=void 0)}else a={},n.U=a;for(var l in i){var c=a[l],d=i[l];void 0===c?(c=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=tR(n);return{o:function(e,t){a.value=e,i=t},d:tU((function(){this.N=tq;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,d,r),a[l]=c):c.o(d,r)}}}e(t)})),tF("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)})),tF("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),ej.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if("__source"!==o&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};var tj="undefined"==typeof requestAnimationFrame?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),e()},n=setTimeout(t,100),i=requestAnimationFrame(t)},tX=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function tz(){tC((function(){for(var e;e=tW.shift();)tB.call(e)}))}function t$(){1===tW.push(this)&&(eO.requestAnimationFrame||tj)(tz)}function tZ(){tC((function(){for(var e;e=tx.shift();)tB.call(e)}))}function tq(){1===tx.push(this)&&(eO.requestAnimationFrame||tX)(tZ)}function tQ(e){var t=td(e);t.current=e,tc((function(){return tU((function(){return this.N=t$,t.current()}))}),[])}var tJ=class extends a{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=tR(!1)}},t0=()=>{let e=r.getInstance(),t=C.getServiceIdentifier();return e.get(t)},t1=(e,t)=>(null!=t?t:t0()).interpreterMap.get(e),t2=((_g={}).SHOW="SHOW",_g.PRELOAD="PRELOAD",_g.CANCEL_PRELOAD="CANCEL_PRELOAD",_g),t3=((_C={}).SHOWING="SHOWING",_C.PRELOADING="PRELOADING",_C.INITIAL="INITIAL",_C),t5=((_I={}).INITIALIZE_PRELOAD="initializePreload",_I.EMIT_SHOW="emitShow",_I.MARK_PRELOAD_SUCCESS="markPreloadSuccess",_I.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",_I.FLUSH_MRAID_EVENTS="flushMraidEvents",_I.CANCEL_PRELOAD="cancelPreload",_I),t4=((_A=t4||{}).MUTE_SOUND="muteSound",_A.UN_MUTE_SOUND="unMuteSound",_A.EMIT_MUTED="emitMuted",_A.EMIT_VIDEO_ERROR="emitVideoError",_A.CLOSE_VIDEO="closeVideo",_A.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",_A.CLOSE_PICTURE_IN_PICTURE="closePictureInPicture",_A.PAUSE_VIDEO="pauseVideo",_A.PLAY_VIDEO="playVideo",_A.POSTROLL_VIEW="postrollView",_A.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",_A.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT="setPictureInPictureVideoContext",_A.SHOW_PICTURE_IN_PICTURE="showPictureInPicture",_A.SEND_FATAL_VIDEO_ERROR="sendFatalVideoError",_A),t6=((_O={}).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",_O.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",_O.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",_O.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",_O.CLOSE_PICTURE_IN_PICTURE="CLOSE_PICTURE_IN_PICTURE",_O.COMPLETE="COMPLETE",_O.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",_O.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",_O.MUTE="MUTE",_O.NEXT="NEXT",_O.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",_O.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",_O.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",_O.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",_O.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",_O.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",_O.UNMUTE="UNMUTE",_O.VIDEO_ERROR="VIDEO_ERROR",_O.VIDEO_FAILURE="VIDEO_FAILURE",_O.CLOSE="CLOSE",_O.CREATIVE_VIEW="CREATIVE_VIEW",_O),t8=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}isChild(){return this.child}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1,this.child=!1}},t7=((_m={}).closed="closed",_m.composite="composite",_m.endcard="endcard",_m.gdpr="gdpr",_m.image="image",_m.video="video",_m),t9=((_f={})[_f.OFF=0]="OFF",_f[_f.SKO=1]="SKO",_f[_f.SKPV=2]="SKPV",_f[_f.STATIC_URL=3]="STATIC_URL",_f),ne=((_N={}).CLICK_THROUGH="clickThrough",_N.COMPLETE="complete",_N.CREATIVE_VIEW="creativeView",_N.FIRST_QUARTILE="firstQuartile",_N.MIDPOINT="midpoint",_N.MUTE="mute",_N.PAUSE="pause",_N.RESUME="resume",_N.SKIP="skip",_N.START="start",_N.THIRD_QUARTILE="thirdQuartile",_N.UNMUTE="unmute",_N),nt=((_D={}).PROGRESSIVE="progressive",_D.CUSTOM="custom",_D.NATIVE="native",_D),nn=((_R={}).PROGRESSIVE="mp4",_R.HLS="hls",_R),ni=()=>{let e=r.getInstance(),t=D.getServiceIdentifier();return e.get(t)},nr=((_y={}).PAUSE_INTERVALS="pauseAllIntervals",_y.START_INTERVALS="startAllIntervals",_y),na=e=>({pauseAllIntervals:()=>{(e||ni()).pauseAll()},startAllIntervals:()=>{(e||ni()).startAll()}}),no=()=>{let e=r.getInstance(),t=y.getServiceIdentifier();return e.get(t)},ns=((_L={}).STANDBY_TIMERS="standbyTimers",_L.WAKE_TIMERS="wakeTimers",_L),nl=e=>({standbyTimers:()=>{(e||no()).standby()},wakeTimers:()=>{(e||no()).wake()}}),nc=((_P=nc||{}).OPEN_PRIVACY_URL="openPrivacyUrl",_P.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",_P.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",_P.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",_P.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",_P.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",_P),nd=((_b={}).CLOSE="CLOSE",_b.FINISH="FINISH",_b.INTERRUPT="INTERRUPT",_b.SET_ERROR="SET_ERROR",_b.SET_PREPARED="SET_PREPARED",_b.READY="READY",_b.RESUME="RESUME",_b.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",_b.SET_FALLBACK="SET_FALLBACK",_b.SET_VISIBLE="SET_VISIBLE",_b.SHOW="SHOW",_b.START_DELAY_SHOW="START_DELAY_SHOW",_b.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",_b),nu=((_w={}).CLOSING="CLOSING",_w.ERROR="ERROR",_w.DELAY_SHOW="DELAY_SHOW",_w.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",_w.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",_w.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",_w.FALLBACK="FALLBACK",_w.IDLE="IDLE",_w.INITIAL="INITIAL",_w.IMMEDIATE_SHOW="IMMEDIATE_SHOW",_w.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",_w.PREPARING="PREPARING",_w),nE=((_V={}).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",_V.ASSIGN_FALLBACK="ASSIGN_FALLBACK",_V.CLOSE_SKO="CLOSE_SKO",_V.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",_V.SHOW_FALLBACK="SHOW_FALLBACK",_V.SHOW_SKO="SHOW_SKO",_V.CANCEL_DELAY_SHOW="CANCEL_DELAY_SHOW",_V);const nv=new U("6.4"),n_=new U("6"),nh=(e=et())=>e.getSdkVersion().isGreaterThanOrEqualTo(nv),nS=(e=et())=>e.getOperatingSystem()===H.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(n_);var nT=(e=et())=>nh(e)&&nS(e),np=((_M={}).SKPV="SKPV",_M.APP_STORE="APP_STORE",_M.OFF="OFF",_M),ng=(e=et())=>{let t="APP_STORE";return nT(e)&&(t="SKPV"),t},nC=class extends a{canOpen(){return[nu.IDLE,nu.FALLBACK].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:nd.CLOSE})}fallback(){this.interpreter.state.context.fallback!==np.OFF&&(this.interpreter.send({type:nd.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:nd.FINISH})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:nd.INTERRUPT})}isIdle(){var e;return null!==(e=this.interpreter.state.matches(nu.IDLE))&&void 0!==e&&e}isInterrupted(){return[nu.CLOSING,nu.DELAY_SHOW_INTERRUPTED].some((e=>this.interpreter.state.matches(e)))}isOpen(){return[nu.DELAY_SHOW_IMMEDIATE,nu.DELAY_SHOW_VISIBLE,nu.IMMEDIATE_SHOW,nu.IMMEDIATE_SHOW_VISIBLE].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:nd.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(nu.DELAY_SHOW)?nd.SHOW:nd.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:nd.RESUME})}setDisplayOptions(e){this.interpreter.send({type:nd.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=t0()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nI=()=>{let e=r.getInstance(),t=nC.getServiceIdentifier();if(e.has(t))return e.get(t)},nA=((_k={}).CLOSE_OVERLAY_VIEW="closeOverlayView",_k.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",_k.RESUME_OVERLAY_VIEW="resumeOverlayView",_k.SHOW_OVERLAY_VIEW="showOverlayView",_k),nO=(e=nI)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}}),nm=((_U=nm||{}).START="start",_U.STOP="stop",_U),nf=((_B=nf||{}).CLOSE_AD="CLOSE_AD",_B),nN=((_H=nN||{}).CLOSE="close",_H),nD=(e=no(),t=es())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:nN.CLOSE,fireOnlyOnce:!0}),t.emit({type:"heartbeat",event:nm.STOP}),t.emit({type:"close",event:nf.CLOSE_AD,fireOnlyOnce:!0})},nR=((_W={}).CLOSE="CLOSE",_W.OPEN="OPEN",_W.PREPARE_FINISHED="PREPARE_FINISHED",_W.PREPARE_SUCCESS="PREPARE_SUCCESS",_W.READY="READY",_W.SET_FALLBACK="SET_FALLBACK",_W),ny=((_x={}).FALLBACK="FALLBACK",_x.HIDDEN="HIDDEN",_x.INITIAL="INITIAL",_x.PREPARING="PREPARING",_x.SHOWING="SHOWING",_x.DONE="DONE",_x),nL=class extends a{isDone(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(ny.DONE))&&void 0!==t&&t}canOpen(){var e,t,n;return null!==(n=(null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(ny.HIDDEN))||(null===(t=this.interpreter)||void 0===t?void 0:t.state.matches(ny.FALLBACK)))&&void 0!==n&&n}close(){var e;null===(e=this.interpreter)||void 0===e||e.send({type:nR.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(ny.SHOWING))&&void 0!==t&&t}open(e){var t;this.hasFallback=e,null===(t=this.interpreter)||void 0===t||t.send({type:nR.OPEN})}subscribe(e){var t;return null===(t=this.interpreter)||void 0===t?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=t0()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nP=()=>{let e=r.getInstance(),t=nL.getServiceIdentifier();if(e.has(t))return e.get(t)},nb=(e=et())=>e.getSdkVersion().isLessThan(new U("7"))&&e.getOrientation()===W.LANDSCAPE;const nw=new U("14"),nV=new U("6.8.1"),nM=(e=et())=>e.getOperatingSystem()===H.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nw),nk=(e=et())=>e.getSdkVersion().isGreaterThanOrEqualTo(nV);var nU=(e=et(),t=en())=>nM(e)&&nk(e)&&!(t.isMrec()||t.isBanner()||t.isInLine()),nB=((_F={}).SHOW_PRODUCT_VIEW="showProductView",_F.HIDE_PRODUCT_VIEW="hideProductView",_F.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose",_F);const nH=()=>({showProductView:()=>{if(nb()&&nU()){let e=nI();return void((null==e?void 0:e.canOpen())&&e.open({fallback:np.OFF}))}let e=nP();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{et().getSdkVersion().isEqualTo(x.sdkSeven)&&nT()&&eo().addEventHandler("viewability",((e,t)=>{t.event===el.MAXIMIZED&&nD()}))}});var nW=()=>nT()?nH():void 0,nx=((_K=nx||{})[_K.CLOSE=0]="CLOSE",_K[_K.SKIP=1]="SKIP",_K),nF=((_G={}).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",_G.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",_G.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",_G.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden",_G),nK=nx;const nG={name:t6.PRIVACY_LOGO_SHOW,actions:[{name:nc.SET_PRIVACY_BUTTON_VISIBLE}]},nY={name:t6.PRIVACY_LOGO_HIDE,actions:[{name:nc.SET_PRIVACY_BUTTON_HIDDEN}]},nj=e=>({name:t6.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:nc.SET_PRIVACY_DRAWER_OPEN},{name:nc.TRIGGER_VIEWABLE_CHANGE},{name:t4.PAUSE_VIDEO},{name:nr.PAUSE_INTERVALS},{name:ns.STANDBY_TIMERS},{name:nA.INTERRUPT_OVERLAY_VIEW}]:[{name:nc.OPEN_PRIVACY_URL}]}),nX={name:t6.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:t4.PLAY_VIDEO},{name:nc.SET_PRIVACY_DRAWER_CLOSED},{name:nc.TRIGGER_VIEWABLE_CHANGE},{name:nr.START_INTERVALS},{name:ns.WAKE_TIMERS},{name:nA.RESUME_OVERLAY_VIEW}]},nz={name:t6.OPEN_PRIVACY_PAGE,actions:[{name:nc.OPEN_PRIVACY_URL}]},n$={name:t6.PRODUCT_VIEW_CLOSE,actions:[{name:nB.END_AD_ON_PRODUCT_VIEW_CLOSE}]},nZ={name:t6.CLOSE_BUTTON_MOUNT,actions:[{name:nF.SET_CLOSE_BUTTON_VISIBLE}]},nq={name:t6.CLOSE_BUTTON_UNMOUNT,actions:[{name:nF.SET_CLOSE_BUTTON_HIDDEN}]},nQ={name:t6.CLOSE_BUTTON_CLICK,actions:[{name:nF.EMIT_CLOSE_BUTTON_CLICK}]},nJ={name:t6.CLOSE_BUTTON_WILL_SHOW,actions:[{name:nF.EMIT_CLOSE_BUTTON_SHOW}]},n0={name:t6.CLOSE_PICTURE_IN_PICTURE,actions:[{name:t4.CLOSE_PICTURE_IN_PICTURE}]};var n1=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},n2=class extends t8{getTransitions(){return super.getTransitions().concat(nY,nG,nj(this.isFullscreen),nX,nz,n0)}isLastPage(){var e;return!(n1(this)&&this.getLastChanceEndcardConfig().enabled||(null===(e=this.next)||void 0===e?void 0:e.getSceneType())!==t7.closed)}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const n3={name:t6.MUTE,actions:[{name:t4.MUTE_SOUND},{name:t4.EMIT_MUTED}]},n5={name:t6.UNMUTE,actions:[{name:t4.UN_MUTE_SOUND},{name:t4.EMIT_MUTED}]},n4={name:t6.VIDEO_ERROR,actions:[{name:t4.EMIT_VIDEO_ERROR}]};var n6=e=>{switch(e){case"off":return t9.OFF;case"overlay_view":return t9.SKO;default:return t9.SKPV}},n8=class{getFullScreenClickConfig(){return{enabled:(()=>{if(this.placementType!==P.FULLSCREEN)return!0;let e=this.skOverlayAutoTokenValue,t=this.fullCtaOptionTokenValue,n=this.fullCtaTokenValue;return"fsc_off"!==t&&("true"===e||"true"===n)})(),id:this.id,target:[P.BANNER,P.MREC].includes(this.placementType)?t9.SKPV:n6(this.skFullCtaTokenValue)}}constructor({skOverlayAutoTokenValue:e,fullCtaOptionTokenValue:t,fullCtaTokenValue:n,skFullCtaTokenValue:i,id:r,placementType:a}){this.skOverlayAutoTokenValue=e,this.fullCtaOptionTokenValue=t,this.fullCtaTokenValue=n,this.skFullCtaTokenValue=i,this.id=r,this.placementType=a}},n7=((_Y=n7||{}).CHECKPOINT_0="checkpoint.0",_Y.CHECKPOINT_100="checkpoint.100",_Y.CHECKPOINT_25="checkpoint.25",_Y.CHECKPOINT_50="checkpoint.50",_Y.CHECKPOINT_75="checkpoint.75",_Y.CLICK_URL="clickUrl",_Y.POSTROLL_CLICK="postroll.click",_Y.POSTROLL_VIEW="postroll.view",_Y.VIDEO_CLOSE="video.close",_Y.VIDEO_LENGTH="video.length",_Y.VIDEO_MUTE="video.mute",_Y.VIDEO_UNMUTE="video.unmute",_Y.REWARD_GRANTED="rewardGranted",_Y),n9=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}addToActivity(e){this.wrappedService.addToActivity(e)}clearActivity(){this.wrappedService.clearActivity()}getActivity(e){return this.wrappedService.getActivity(e)}getActivityEvents(){return this.wrappedService.getActivityEvents()}getActivityLogs(){return this.wrappedService.getActivityLogs()}getActivityEventPairs(e,t,n){return this.wrappedService.getActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}};const ie=e=>Object.values(n7).includes(e);var it=class extends n9{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&ie(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},ii=e=>new it(null!=e?e:eo()),ir=(e=ii(),t=ea())=>{let n=(null==t?void 0:t.getSceneType())===t7.image||(null==t?void 0:t.getSceneType())===t7.endcard;t&&"shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick?(null==t?void 0:t.getSceneType())===t7.video&&e.emit(n7.CLICK_URL,!0):e.emit(n7.CLICK_URL,!0),n&&e.emit(n7.POSTROLL_CLICK,!0)};const ia="scenes-key",io="gdpr";var is=class{getStoreKitOverlayAutoShowConfig(e=ir){let t="adv_pref"===this.fullCtaOptionTokenValue,n="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!nU(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&M(this.skOverlayAutoTokenValue)&&t,autoShowDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayDelaySecondsTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?e:()=>{}}}constructor(e,t,n,i,r,a,o=et(),s=en()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=o,this.placementTypeService=s}},il=(e=b())=>{let t=e.get(w.APP_STORE_ID);if(t)return t;let n=e.get(w.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);return(null==i?void 0:i[1])?i[1]:void 0},ic=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnVideoAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!(!nT(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=et(),i=en()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},id=e=>{var t;return!!e&&"false"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},iu=class{getStoreKitOverlayAutoShowConfig(e=ir){let t=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,n="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!nU(this.environmentService,this.placementTypeService)||!this.appStoreId||id(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!t&&parseInt(t,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let e=parseInt(null!=t?t:"5",10);return Number.isNaN(e)?3e3:Math.max(3e3,1e3*e)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?()=>e():()=>{}}}constructor(e,t,n,i,r,a,o,s,l,c=et(),d=en()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=o,this.skOverlayAutoCloseTokenValue=s,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=c,this.placementTypeService=d}},iE=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnEndcardAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!!nT(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=et()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const iv=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});var i_=((_j=i_||{}).RESOURCE="resource",_j.EXCEPTION="exception",_j.UNHANDLEDREJECTION="unhandledrejection",_j.PLAYABLE="playable",_j),ih=((_X={}).IMAGE="img",_X.VIDEO="video",_X),iS=()=>eo(),iT=(e,t=iS())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:i_.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]},ip=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!==(e=this.appRatingCount)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?iv.format(t):""}getAppContentRatingImg(){var e,t;return null!==(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!==(e=this.appContentRating)&&void 0!==e?e:""])&&void 0!==t?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!==(t=null!==(e=this.appRating)&&void 0!==e?e:this.appStoreRating)&&void 0!==t?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let o=parseFloat(n);return Number.isNaN(o)?parseFloat("4.4"):o}getAppName(){var e;if(this.appNameEncoded)try{return B(this.appNameEncoded)}catch(e){}return null!==(e=this.appName)&&void 0!==e?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return B(this.appDescriptionEncoded)}catch(e){}return null!==(e=this.appDescription)&&void 0!==e?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return B(this.appLongDescriptionEncoded)}catch(e){}return null!==(e=this.appLongDescription)&&void 0!==e?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return B(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!==(e=this.ctaButtonUrl)&&void 0!==e?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!==(e=this.appContentRating)&&void 0!==e?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!==(t=this.appIcon)&&void 0!==t?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:iT(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:o,appRatingCount:s,appLongDescription:l,appContentRating:c,appScreenShots:d,appDownloadCount:u,appRating:E,appStoreRating:_,appStoreId:v,appNameEncoded:h,appDescriptionEncoded:S,appLongDescriptionEncoded:T,errorLoggingReportingService:p=iS()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=o,this.appRatingCount=s,this.appLongDescription=l,this.appContentRating=c,this.appScreenShots=d,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=_,this.appStoreId=v,this.appNameEncoded=h,this.appDescriptionEncoded=S,this.appLongDescriptionEncoded=T,this.errorLoggingReportingService=p}};const ig=(e,t=b(),n=en())=>({appNameEncoded:t.get(w.APP_NAME_ENCODED),appStoreId:t.get(w.APP_STORE_ID),ctaButtonDelay:t.get(w.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(w.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(w.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(w.CTA_BUTTON_URL),ctaTarget:t9.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaOptionTokenValue:t.get(w.FULL_CTA_OPTION),fullCtaTokenValue:t.get(w.FULL_CTA),hasEndcard:t.has(w.EC_HTML)||t.has(w.EC_IMAGE),hasVideo:t.has(w.MAIN_VIDEO)||t.has(w.MAIN_STREAM),icon:t.get(w.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(w.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(w.SK_CTA_ONLY),skFscTokenValue:t.get(w.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var iC=class extends ip{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:n6(this.skCtaOnlyTokenValue),delay:parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"4",10)},fsc:{enabled:M(this.fullCtaTokenValue)&&"fsc_off"!==this.fullCtaOptionTokenValue,ctaUrl:this.ctaButtonUrl,target:n6(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:nK.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:o,enabled:s=!1,endcardCloseButtonDelaySeconds:l,fullCtaOptionTokenValue:c,fullCtaTokenValue:d,hasEndcard:u,hasVideo:E,icon:_,id:v,isFullscreen:h,name:S,showECCloseButtonCountDownTokenValue:T,skCtaOnlyTokenValue:p,skFscTokenValue:g,staticEndcardCloseButtonDelaySeconds:C},I){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:S,appIcon:_,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:I}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=o?o:t9.SKPV,this.enabled=s,this.endcardCloseButtonDelaySeconds=l,this.fullCtaOptionTokenValue=c,this.fullCtaTokenValue=d,this.hasEndcard=!!u,this.hasVideo=!!E,this.icon=_,this.id=v,this.isFullscreen=!!h,this.appName=S,this.showECCloseButtonCountDownTokenValue=T,this.skCtaOnlyTokenValue=p,this.skFscTokenValue=g,this.staticEndcardCloseButtonDelaySeconds=C}},iI=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?nK.CLOSE:M(this.endcardCloseButtonAsSkipTokenValue)?nK.SKIP:nK.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||M(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},iA=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},iO=class extends ip{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:n6(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}},im=((_z=im||{}).GRANT_REWARD="GRANT_REWARD",_z.FORFEIT_REWARD="FORFEIT_REWARD",_z),iN=((_$={}).CLOSE_AD="closeAd",_$.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",_$.ENSURE_REWARD_GRANTED="ensureRewardGranted",_$),iD=(e=es(),t=en(),n=nD,i=nI)=>({closeAd:()=>{n()},closeStoreKitOverlay:()=>{var e;null===(e=i())||void 0===e||e.close()},ensureRewardGranted:()=>{let n=e.hasExistingEvent({type:"incentivized-event",event:im.FORFEIT_REWARD}),i=e.hasExistingEvent({type:"incentivized-event",event:im.GRANT_REWARD});!t.isRewarded()||n||i||e.emit({type:"incentivized-event",event:im.GRANT_REWARD,fireOnlyOnce:!0})}}),iR=((_Z=iR||{}).ON_CREATIVE_VIEW="onCreativeView",_Z.DESTROY_IFRAME="destroyIframe",_Z.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",_Z.INIT_CHECKPOINTS="initCheckpoints",_Z.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",_Z.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",_Z.ON_SHOW="onShow",_Z);class iy extends t8{getId(){return"closed"}static getInstances(){let e=en();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new iy]}getSceneType(){return t7.closed}constructor(){super(),this.addEntryAction({name:iN.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:iR.DESTROY_IFRAME}),this.getEntryActions().some((e=>e.name===iN.CLOSE_AD))||this.addEntryAction({name:iN.CLOSE_AD}),this.addTransition(c({},n$)),this.addTransition(c({},n0))}}var iL=(e=b(),t=en())=>!(!t.isMrec()&&!t.isBanner())||M(e.get(w.START_MUTED))||M(e.get(w.REAL_START_MUTED)),iP=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null===(i=e.error)||void 0===i||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null===(t=e.complete)||void 0===t||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},ib=function(e){return t=>new iP((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})))},iw=(e,t)=>new iP((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),iV=(e,t,n)=>iw(e,"error-logging").pipe(ib((e=>e.event===t&&(!n||e.data.resource_type===n)))),iM=function(){return e=>new iP((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},ik=function(e){return t=>new iP((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null===(e=n.complete)||void 0===e||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},iU=(e,t)=>iw(e,"scene-event").pipe(ib((e=>e.event===t))),iB=((_q=iB||{}).CLICK="CLICK",_q.CLICK_METRICS="CLICK_METRICS",_q.NEXT_BUTTON_COUNTDOWN_TICK="NEXT_BUTTON_COUNTDOWN_TICK",_q.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",_q.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",_q.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",_q.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",_q.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",_q.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",_q.LOAD_COMPLETE="LOAD_COMPLETE",_q.LOAD_START="LOAD_START",_q.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",_q.PRELOAD_CANCELLED="PRELOAD_CANCELLED",_q.PRELOAD_COMPLETE="PRELOAD_COMPLETE",_q.PRELOAD_START="PRELOAD_START",_q.SCENE_END="SCENE_END",_q.SCENE_START="SCENE_START",_q.FORCE_COMPLETE_COUNT_DOWN="FORCE_COMPLETE_COUNT_DOWN",_q),iH=(e,t)=>new iP((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null===(e=n.complete)||void 0===e||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),iW=function(e){return t=>new iP((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null===(t=n.complete)||void 0===t||t.call(n))},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},ix=(e,t,n)=>new iP((i=>{let r=iH(e,t).subscribe({next:e=>{var t;i.next(e),null===(t=i.complete)||void 0===t||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),iF=(e,t,n)=>new iP((i=>{let r=0,a=null,o=t.subscribe({next:()=>{var e;i.next(r),null===(e=i.complete)||void 0===e||e.call(i),null==a||a.unsubscribe(),o.unsubscribe()}}),s=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null===(t=i.error)||void 0===t?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),s.unsubscribe()}}})),iK=function(e){return t=>new iP((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)}})}))},iG=function(e){return t=>new iP((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null===(r=n.error)||void 0===r||r.call(n,e)}},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})}))},iY=function(e){return t=>new iP((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null===(t=n.complete)||void 0===t||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},ij=e=>iU(e,iB.CLOSE_BUTTON_SHOW).pipe(iK((()=>iU(e,iB.CLICK).pipe(iG((()=>!0))))),ik(iU(e,iB.SCENE_END)),iY(!1));const iX="persistent-simple-cta",iz="mute-button",i$="mute-button-icon",iZ="#555FFF",iq="close-or-skip-button",iQ="countdown",iJ="last-chance-endcard-next-button",i0="last-chance-endcard-cta",i1="persistent-rich-cta-button",i2="next-button",i3="privacy-drawer",i5="shield-icon",i4=Symbol("source"),i6=e=>"scene-event"===e.type&&null!=e.event;var i8=class extends n9{emit(e){let t=this.getReportableEvent(e);t&&this.wrappedService.emit(t)}getEventCount(e){let t=this.getReportableEvent(e);return t?this.wrappedService.getActivityEvents().filter((e=>"event"===e.activity.type&&"scene-event"===e.activity.eventType&&e.activity.name===t.event&&(""===t.data.scene_id||e.activity.data.scene_id===t.data.scene_id)&&e.activity.data.scene_type===t.data.scene_type)).length:0}getReportableEvent(e){if(i6(e))return e;let t=this.injectedGetCurrentScene();return t?{type:"scene-event",event:e,data:{scene_id:t.getId(),scene_type:t.getSceneType()}}:void 0}constructor(e,t=ea){super(e),this.injectedGetCurrentScene=t}},i7=(e,t=ea)=>new i8(null!=e?e:eo(),t);const i9=e=>{let t=document.querySelector(`#${iq}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:o,left:s}=t.getBoundingClientRect();return(n<s&&n>=s-30||n>a&&n<=a+30)&&i>=r-30&&i<=o+30||(i<r&&i>=r-30||i>o&&i<=o+30)&&n>=s-30&&n<=a+30},re=e=>{let t=window.innerWidth-75,n=75;return e.clientX>=t&&e.clientY<=n},rt=(e,t=i7())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${iq}`)?i9(n):re(n))&&t.emit(iB.NEAR_CLOSE_BUTTON_CLICK)},rn=[iz,iq,i5,i3],ri=(e,t)=>{if(e instanceof Element){var n;let i=null!==(n=e.getAttribute("id"))&&void 0!==n?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||ri(e.parentElement,t))}return!0},rr=(e,t,n=ea())=>{let{clientX:i,clientY:r}="touches"in e?e.touches[0]:e;t.emit({type:"scene-event",event:iB.CLICK,data:{scene_id:n.getId(),scene_type:n.getSceneType(),click_coordinates:{x:i,y:r},click_target:e.target}})},ra=(e,t=i7)=>{let n=t();rr(e,n),rt(e,n)};var ro=(e,t)=>iU(e,iB.CLICK).pipe(ik(t),ib((e=>{var t;return ri(null===(t=e.data)||void 0===t?void 0:t.click_target,rn)})),iM(),iY(0)),rs=e=>ix(iU(e,iB.LAST_CHANCE_ENDCARD_OPEN),iU(e,iB.LAST_CHANCE_ENDCARD_CLOSE),iU(e,iB.SCENE_END)),rl=(...e)=>new iP((t=>{let n=[],i=()=>{n.forEach((e=>e()))},r=e=>{var n;t.next(e),null===(n=t.complete)||void 0===n||n.call(t),i()},a=e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},o=()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:r,error:a,complete:o});n.push(t)}))})),rc=e=>rl(iU(e,iB.SCENE_END).pipe(iG((()=>!1))),iU(e,iB.LAST_CHANCE_ENDCARD_OPEN).pipe(iK((()=>ro(e,iU(e,iB.LAST_CHANCE_ENDCARD_CLOSE)))),iG((e=>e>0)),iY(!1))),rd=e=>iF(iU(e,iB.SCENE_START),rl(iU(e,iB.CLOSE_BUTTON_SHOW),iU(e,iB.SCENE_END)),iU(e,iB.NEAR_CLOSE_BUTTON_CLICK)),ru=(e=es(),t=!1)=>{let n=i7(e),i=iH(iU(n,iB.SCENE_START),iU(n,iB.SCENE_END)),r=iU(n,iB.CLICK).pipe(iW(1)),a=ix(iU(n,iB.SCENE_START),r,iU(n,iB.SCENE_END)),o=iF(iU(n,iB.CLOSE_BUTTON_SHOW).pipe(iW(1)),iU(n,iB.SCENE_END),iU(n,iB.NEAR_CLOSE_BUTTON_CLICK)),s=ix(iU(n,iB.CLOSE_BUTTON_SHOW),iU(n,iB.CLOSE_BUTTON_CLICK),iU(n,iB.SCENE_END)),l=ij(n),c={click_count:ro(n,iU(n,iB.SCENE_END)),close_button_idle_time:s,duration:i,first_click:a,interaction_after_close_button_visible:l,near_click_count_after_close_button_appears:o,near_click_count_before_close_button_appears:rd(n)};return t&&(c.last_chance_endcard_duration=rs(n),c.last_chance_endcard_clicked=rc(n)),c},rE=(e,t)=>iw(e,"video").pipe(ib((e=>e.event===t))),rv=((_Q=rv||{}).BANDWIDTH_ESTIMATION="bandwidthEstimation",_Q.CAN_PLAY_THROUGH="canplaythrough",_Q.CLOSE="close",_Q.DURATION_CHANGE="durationchange",_Q.ENDED="ended",_Q.ERROR="error",_Q.HLS_LEVEL_PLAYLIST_LOADED="hlsLevelPlaylistLoaded",_Q.HLS_LEVEL_SWITCHED="hlsLevelSwitched",_Q.HLS_VIDEO_STALLED="hlsVideoStalled",_Q.MUTE="mute",_Q.PAUSE="pause",_Q.PLAY="play",_Q.PROGRESS="progress",_Q.SUSPEND="suspend",_Q.TIME_UPDATE="timeupdate",_Q.UNMUTE="unmute",_Q.WAITING="waiting",_Q),r_=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n},rh=((_J=rh||{}).PROGRESS="progress",_J.VIDEO_LENGTH="videoLength",_J.VIDEO_REACHED_DURATION="videoReachedDuration",_J),rS=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const rT=()=>eo(),rp=()=>eo(),rg=(e,t,n)=>{L().getMraidBridgeExt()&&t>0&&e>0&&rp().emit({type:"videoViewed",event:rh.VIDEO_LENGTH,data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0})},rC=(e,t,n)=>{let i=rS(e,t),r=rp();4===i&&r.emit({type:"videoViewed",event:rh.VIDEO_REACHED_DURATION,data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0})},rI=(e,t,n)=>{let i=rp();i.getActivityEvents().some((e=>e.activity.name===rh.PROGRESS&&e.activity.data.seconds>=n))||i.emit({type:"videoViewed",event:rh.PROGRESS,data:{current_time:e,duration:t,seconds:n}}),rg(e,t,n),rC(e,t,n)};var rA=(e,t,n=L(),i=ii())=>{var r,a,o,s;let l=n.getMraidBridgeExt();if(!l)return;let c=Math.floor(1e3*Math.max(null!==(o=null===(r=t.data)||void 0===r?void 0:r.current_time)&&void 0!==o?o:0,.1)),d=Math.floor(1e3*(null!==(s=null===(a=t.data)||void 0===a?void 0:a.duration)&&void 0!==s?s:0));switch(t.event){case rh.PROGRESS:l.notifyEventValuePairEvent("videoViewed",c);break;case rh.VIDEO_REACHED_DURATION:l.notifyEventValuePairEvent("videoViewed",d);break;case rh.VIDEO_LENGTH:l.notifyEventValuePairEvent("videoLength",d),i.emit(n7.VIDEO_LENGTH,!0)}};const rO=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],rm=(e,t)=>[n7.CHECKPOINT_0,n7.CHECKPOINT_25,n7.CHECKPOINT_50,n7.CHECKPOINT_75,n7.CHECKPOINT_100][Math.floor(e/t*4)],rf=(e,t=no(),n=ii())=>{let i=rO[e],r=rO.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(rm(i.currentTime,5),!0,{current_time:i.currentTime,duration:5}),rI(i.currentTime,5,Math.round(i.currentTime)),e!==r&&rf(e+1)})).start()};var rN=(e,t)=>iw(e,"incentivized-event").pipe(ib((e=>e.event===t))),rD=e=>new iP((t=>{let n=()=>{var e;t.next(im.FORFEIT_REWARD),null===(e=t.complete)||void 0===e||e.call(t)};rN(e,im.FORFEIT_REWARD).subscribe({next:n,error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:im.FORFEIT_REWARD})&&n()})),rR=e=>new iP((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:im.GRANT_REWARD})&&(t.next(im.FORFEIT_REWARD),null===(n=t.complete)||void 0===n||n.call(t))})),ry=(e,t,n)=>new iP((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null===(e=i.complete)||void 0===e||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),rL=(e,t,n=es(),i=no())=>new iP((r=>{let a=(e===t7.video?rE(n,rv.PLAY).pipe(iW(1),iK((e=>{var r;return rl(ry(1e3*r_(null===(r=e.data)||void 0===r?void 0:r.duration,t),i,im.GRANT_REWARD),iU(n,iB.SCENE_END).pipe(iG((()=>im.FORFEIT_REWARD))),rD(n),rR(n))}))):iU(n,iB.SCENE_START).pipe(iK((()=>rl(ry(1e3*r_(5,t),i,im.GRANT_REWARD),iU(n,iB.SCENE_END).pipe(iG((()=>im.FORFEIT_REWARD))),rD(n),rR(n)))))).subscribe({next:e=>{var t;e===im.GRANT_REWARD&&n.emit({type:"incentivized-event",event:im.GRANT_REWARD,fireOnlyOnce:!0}),null===(t=r.complete)||void 0===t||t.call(r)},error:e=>{var t;return null===(t=r.error)||void 0===t?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}})),rP=e=>{let t=null,n=iU(e,iB.PRELOAD_START),i=iU(e,iB.PRELOAD_COMPLETE),r=iU(e,iB.PRELOAD_CANCELLED),a=iU(e,iB.SCENE_END);return new iP((e=>{let o=n.subscribe({next:()=>{t=Date.now()}}),s=i.subscribe({next:()=>{var n;null!==t&&(e.next(Date.now()-t),null===(n=e.complete)||void 0===n||n.call(e))}}),l=()=>{var n;e.next(null!=t?-1*(Date.now()-t):0),null===(n=e.complete)||void 0===n||n.call(e)},c=r.subscribe({next:l}),d=a.subscribe({next:l});return{unsubscribe:()=>{o.unsubscribe(),s.unsubscribe(),c.unsubscribe(),d.unsubscribe()}}}))},rb=((_0={}).NESTED_IFRAME_WITH_CORS="cors",_0.NESTED_IFRAME_WITHOUT_CORS="basic",_0),rw=()=>eo(),rV=((_1=rV||{}).NESTED_IFRAME_TYPE="NESTED_IFRAME_TYPE",_1),rM=(e=ea,t=rw())=>{let n=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"iframe"===t.activity.eventType&&t.activity.name===rV.NESTED_IFRAME_TYPE&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).map((e=>{var t;return null===(t=e.activity.data)||void 0===t?void 0:t.nested_iframe_type}));return n.includes(rb.NESTED_IFRAME_WITH_CORS)?rb.NESTED_IFRAME_WITH_CORS:n.includes(rb.NESTED_IFRAME_WITHOUT_CORS)?rb.NESTED_IFRAME_WITHOUT_CORS:""},rk=(e,t,n=ea)=>new iP((i=>{let r=iU(e,iB.SCENE_END).subscribe({next:()=>{var e;i.next(rM(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),rU=(e,t=!1,n=es(),i=no())=>{let r=i7(n),a=iV(n,i_.PLAYABLE).pipe(iM()).pipe(ik(iU(r,iB.SCENE_END))),o=ix(iU(r,iB.LOAD_START),iU(r,iB.LOAD_COMPLETE),iU(r,iB.SCENE_END)),s=I(c({},ru(n,t)),{error_count:a,iframe_type:rk(r,n),load_duration:o,preload_duration:rP(r)});return e.enabled&&(s.grant_reward=rL(t7.endcard,e,n,i)),s},rB=(e,t)=>({ctaButtonUrl:e.get(w.CTA_BUTTON_URL),ctaButtonText:e.get(w.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(w.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(w.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(w.APP_NAME),appIcon:e.get(w.APP_ICON),appDescription:e.get(w.APP_DESCRIPTION),appRatingCount:e.get(w.APP_RATING_COUNT),appLongDescription:e.get(w.APP_LONG_DESCRIPTION),appContentRating:e.get(w.APP_CONTENT_RATING),appScreenShots:e.get(w.APP_SCREENSHOTS),appDownloadCount:e.get(w.APP_DOWNLOAD_COUNT),appRating:e.get(w.APP_RATING),appStoreRating:e.get(w.APP_STORE_RATING),appStoreId:e.get(w.APP_STORE_ID),appNameEncoded:e.get(w.APP_NAME_ENCODED),appDescriptionEncoded:e.get(w.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(w.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t}),rH=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},rW={},rx=function(e,t,n,i,r){var a=new Worker(rW[t]||(rW[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},rF=Uint8Array,rK=Uint16Array,rG=Int32Array,rY=new rF([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rj=new rF([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rX=new rF([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rz=function(e,t){for(var n=new rK(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new rG(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},r$=rz(rY,2),rZ=r$.b,rq=r$.r;rZ[28]=258,rq[258]=28;for(var rQ=rz(rj,0),rJ=rQ.b,r0=rQ.r,r1=new rK(32768),r2=0;r2<32768;++r2){var r3=(43690&r2)>>1|(21845&r2)<<1;r3=(61680&(r3=(52428&r3)>>2|(13107&r3)<<2))>>4|(3855&r3)<<4,r1[r2]=((65280&r3)>>8|(255&r3)<<8)>>1}var r5=function(e,t,n){for(var i,r=e.length,a=0,o=new rK(t);a<r;++a)e[a]&&++o[e[a]-1];var s=new rK(t);for(a=1;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new rK(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],u=s[e[a]-1]++<<d,E=u|(1<<d)-1;u<=E;++u)i[r1[u]>>l]=c}else for(a=0,i=new rK(r);a<r;++a)e[a]&&(i[a]=r1[s[e[a]-1]++]>>15-e[a]);return i},r4=new rF(288);for(r2=0;r2<144;++r2)r4[r2]=8;for(r2=144;r2<256;++r2)r4[r2]=9;for(r2=256;r2<280;++r2)r4[r2]=7;for(r2=280;r2<288;++r2)r4[r2]=8;var r6=new rF(32);for(r2=0;r2<32;++r2)r6[r2]=5;var r8=r5(r4,9,0),r7=r5(r4,9,1),r9=r5(r6,5,0),ae=r5(r6,5,1),at=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},an=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},ai=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},ar=function(e){return(e+7)/8|0},aa=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new rF(e.subarray(t,n))},ao=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],as=function(e,t,n){var i=Error(t||ao[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,as),!n)throw i;return i},al=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new rF(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new rF(3*r));var c=function(e){var t=n.length;if(e>t){var i=new rF(Math.max(2*t,e));i.set(n),n=i}},d=t.f||0,u=t.p||0,E=t.b||0,_=t.l,v=t.d,h=t.m,S=t.n,T=8*r;do{if(!_){d=an(e,u,1);var p=an(e,u+1,3);if(u+=3,!p){var g=e[(L=ar(u)+4)-4]|e[L-3]<<8,C=L+g;if(C>r){l&&as(0);break}s&&c(E+g),n.set(e.subarray(L,C),E),t.b=E+=g,t.p=u=8*C,t.f=d;continue}if(1==p)_=r7,v=ae,h=9,S=5;else if(2==p){var I=an(e,u,31)+257,O=an(e,u+10,15)+4,A=I+an(e,u+5,31)+1;u+=14;for(var m=new rF(A),f=new rF(19),N=0;N<O;++N)f[rX[N]]=an(e,u+3*N,7);u+=3*O;var D=at(f),R=(1<<D)-1,y=r5(f,D,1);for(N=0;N<A;){var L,P=y[an(e,u,R)];if(u+=15&P,(L=P>>4)<16)m[N++]=L;else{var w=0,b=0;for(16==L?(b=3+an(e,u,3),u+=2,w=m[N-1]):17==L?(b=3+an(e,u,7),u+=3):18==L&&(b=11+an(e,u,127),u+=7);b--;)m[N++]=w}}var V=m.subarray(0,I),M=m.subarray(I);h=at(V),S=at(M),_=r5(V,h,1),v=r5(M,S,1)}else as(1);if(u>T){l&&as(0);break}}s&&c(E+131072);for(var U=(1<<h)-1,k=(1<<S)-1,B=u;;B=u){var H=(w=_[ai(e,u)&U])>>4;if((u+=15&w)>T){l&&as(0);break}if(w||as(2),H<256)n[E++]=H;else{if(256==H){B=u,_=null;break}var x=H-254;if(H>264){var W=rY[N=H-257];x=an(e,u,(1<<W)-1)+rZ[N],u+=W}var F=v[ai(e,u)&k],K=F>>4;F||as(3),u+=15&F;M=rJ[K];if(K>3){W=rj[K];M+=ai(e,u)&(1<<W)-1,u+=W}if(u>T){l&&as(0);break}s&&c(E+131072);var Y=E+x;if(E<M){var G=a-M,j=Math.min(M,Y);for(G+E<0&&as(3);E<j;++E)n[E]=i[G+E]}for(;E<Y;++E)n[E]=n[E-M]}}t.l=_,t.p=B,t.b=E,t.f=d,_&&(d=1,t.m=h,t.d=v,t.n=S)}while(!d);return E!=n.length&&o?aa(n,0,E):n.subarray(0,E)},ac=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},ad=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},au=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:ap,l:0};if(1==r){var o=new rF(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};d!=r-1;)s=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:s.f+l.f,l:s,r:l};var E=a[0].s;for(i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var _=new rK(E+1),v=aE(n[d-1],_,0);if(v>t){i=0;var h=0,S=v-t,T=1<<S;for(a.sort((function(e,t){return _[t.s]-_[e.s]||e.f-t.f}));i<r;++i){var p=a[i].s;if(!(_[p]>t))break;h+=T-(1<<v-_[p]),_[p]=t}for(h>>=S;h>0;){var g=a[i].s;_[g]<t?h-=1<<t-_[g]++-1:++i}for(;i>=0&&h;--i){var C=a[i].s;_[C]==t&&(--_[C],++h)}v=t}return{t:new rF(_),l:v}},aE=function(e,t,n){return-1==e.s?Math.max(aE(e.l,t,n+1),aE(e.r,t,n+1)):t[e.s]=n},av=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new rK(++t),i=0,r=e[0],a=1,o=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(r),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(r);a=1,r=e[s]}return{c:n.subarray(0,i),n:t}},a_=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},ah=function(e,t,n){var i=n.length,r=ar(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return 8*(r+4+i)},aS=function(e,t,n,i,r,a,o,s,l,c,d){ac(t,d++,n),++r[256];for(var u,E,_,v,h=au(r,15),S=h.t,T=h.l,p=au(a,15),g=p.t,C=p.l,I=av(S),O=I.c,A=I.n,m=av(g),f=m.c,N=m.n,D=new rK(19),R=0;R<O.length;++R)++D[31&O[R]];for(R=0;R<f.length;++R)++D[31&f[R]];for(var y=au(D,7),L=y.t,P=y.l,w=19;w>4&&!L[rX[w-1]];--w);var b=c+5<<3,V=a_(r,r4)+a_(a,r6)+o,M=a_(r,S)+a_(a,g)+o+14+3*w+a_(D,L)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&b<=V&&b<=M)return ah(t,d,e.subarray(l,l+c));if(ac(t,d,1+(M<V)),d+=2,M<V){u=r5(S,T,0),E=S,_=r5(g,C,0),v=g;var U=r5(L,P,0);ac(t,d,A-257),ac(t,d+5,N-1),ac(t,d+10,w-4),d+=14;for(R=0;R<w;++R)ac(t,d+3*R,L[rX[R]]);d+=3*w;for(var k=[O,f],B=0;B<2;++B){var H=k[B];for(R=0;R<H.length;++R){var x=31&H[R];ac(t,d,U[x]),d+=L[x],x>15&&(ac(t,d,H[R]>>5&127),d+=H[R]>>12)}}}else u=r8,E=r4,_=r9,v=r6;for(R=0;R<s;++R){var W=i[R];if(W>255){ad(t,d,u[(x=W>>18&31)+257]),d+=E[x+257],x>7&&(ac(t,d,W>>23&31),d+=rY[x]);var F=31&W;ad(t,d,_[F]),d+=v[F],F>3&&(ad(t,d,W>>5&8191),d+=rj[F])}else ad(t,d,u[W]),d+=E[W]}return ad(t,d,u[256]),d+E[256]},aT=new rG([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ap=new rF(0),ag=function(e,t,n,i,r,a){var o=a.z||e.length,s=new rF(i+o+5*(1+Math.ceil(o/7e3))+r),l=s.subarray(i,s.length-r),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var u=aT[t-1],E=u>>13,_=8191&u,v=(1<<n)-1,h=a.p||new rK(32768),S=a.h||new rK(v+1),T=Math.ceil(n/3),p=2*T,g=function(t){return(e[t]^e[t+1]<<T^e[t+2]<<p)&v},C=new rG(25e3),I=new rK(288),O=new rK(32),A=0,m=0,f=a.i||0,N=0,D=a.w||0,R=0;f+2<o;++f){var y=g(f),L=32767&f,P=S[y];if(h[L]=P,S[y]=L,D<=f){var w=o-f;if((A>7e3||N>24576)&&(w>423||!c)){d=aS(e,l,0,C,I,O,m,N,R,f-R,d),N=A=m=0,R=f;for(var b=0;b<286;++b)I[b]=0;for(b=0;b<30;++b)O[b]=0}var V=2,M=0,U=_,k=L-P&32767;if(w>2&&y==g(f-k))for(var B=Math.min(E,w)-1,H=Math.min(32767,f),x=Math.min(258,w);k<=H&&--U&&L!=P;){if(e[f+V]==e[f+V-k]){for(var W=0;W<x&&e[f+W]==e[f+W-k];++W);if(W>V){if(V=W,M=k,W>B)break;var F=Math.min(k,W-2),K=0;for(b=0;b<F;++b){var Y=f-k+b&32767,G=Y-h[Y]&32767;G>K&&(K=G,P=Y)}}}P=h[L=P],k+=L-P&32767}if(M){C[N++]=268435456|rq[V]<<18|r0[M];var j=31&rq[V],X=31&r0[M];m+=rY[j]+rj[X],++I[257+j],++O[X],D=f+V,++A}else C[N++]=e[f],++I[e[f]]}}for(f=Math.max(f,D);f<o;++f)C[N++]=e[f],++I[e[f]];d=aS(e,l,c,C,I,O,m,N,R,f-R,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=S,a.p=h,a.i=f,a.w=D)}else{for(f=a.w||0;f<o+c;f+=65535){var z=f+65535;z>=o&&(l[d/8|0]=c,z=o),d=ah(l,d+1,e.subarray(f,z))}a.i=o}return aa(s,0,i+ar(d)+r)},aC=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,i=9;--i;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),aI=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,a=0|n.length,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)r+=i+=n[o];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}e=i,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},aA=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new rF(a.length+e.length);o.set(a),o.set(e,a.length),e=o,r.w=a.length}return ag(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},aO=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},am=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<i.length;++o){var s=i[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var c=s.toString();if(s.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;t+=c.slice(d,c.indexOf("(",d))}else for(var u in t+=c,s.prototype)t+=";"+l+".prototype."+u+"="+s.prototype[u].toString();else t+=c}else n[l]=s}return t},af=[],aN=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},aD=function(e,t,n,i){if(!af[n]){for(var r="",a={},o=e.length-1,s=0;s<o;++s)r=am(e[s],r,a);af[n]={c:am(e[o],r,a),e:a}}var l=aO({},af[n].e);return rx(af[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,l,aN(l),i)},aR=function(e){return postMessage(e,[e.buffer])},ay=function(e){return e&&{out:e.size&&new rF(e.size),dictionary:e.dictionary}},aL=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},aP=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ab=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&as(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},aw=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},aV=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&as(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&as(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function aM(e,t){return aA(e,t||{},0,0)}var ak=function(){function e(e,t){"function"==typeof e&&(t=e,e={}),this.ondata=t;var n=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new rF(32768),this.p=new rF(0),n&&this.o.set(n)}return e.prototype.e=function(e){if(this.ondata||as(5),this.d&&as(4),this.p.length){if(e.length){var t=new rF(this.p.length+e.length);t.set(this.p),t.set(e,this.p.length),this.p=t}}else this.p=e},e.prototype.c=function(e){this.s.i=+(this.d=e||!1);var t=this.s.b,n=al(this.p,this.s,this.o);this.ondata(aa(n,t,this.s.b),this.d),this.o=aa(n,this.s.b-32768),this.s.b=this.o.length,this.p=aa(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}();function aU(e,t){return al(e,{i:2},t&&t.out,t&&t.dictionary)}var aB="undefined"!=typeof TextDecoder&&new TextDecoder;try{aB.decode(ap,{stream:!0})}catch(e){}var aH=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:aa(e,n-1)};t+=r?3==r?String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):String.fromCharCode(i)}};"function"==typeof queueMicrotask&&queueMicrotask;var aW=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),ax=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e},aF=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},aK=class extends a{decompress(e){var t,n;let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);return function(e){if(aB)return aB.decode(e);var t=aH(e),n=t.s;return t.r.length&&as(8),n}(((n=ab(r))+8>r.length&&as(6,"invalid gzip data"),al(r.subarray(n,-8),{i:2},new rF(aw(r)),t))).toString()}decode(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompress(e):B(e);let i=aF(n),r=ax(i);return aW(r)}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=en(),t=iS()){super(),this.placementTypeService=e,this.errorLoggingService=t}},aG=()=>{let e=r.getInstance(),t=aK.getServiceIdentifier();return e.get(t)};const aY=[w.EC_IMAGE,w.EC_IMAGE_2,w.EC_HTML,w.ADM_HTML,w.EC_HTML_2];var aj=((_2={}).BASE64_ENCODED="base64-encoded",_2.GZIP="gzip",_2.NONE="none",_2);class aX extends n2{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return I(c({},e),{style:this.isLastPage()?nK.CLOSE:e.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:rU(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(e){let t=e.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!t,this.iframeContentData=e.initializeIframeContentData(this.endcardContent,t)}async getIframeContentData(){var e;return null!==(e=this.iframeContentData)&&void 0!==e?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return I(c({},super.getObservabilityData()),{has_nested_iframe:this.getHasNestedIframe()})}static getInstances(e=b(),t=en(),n=et(),i=iS(),r=aG()){let a=[w.EC_HTML,w.ADM_HTML,w.EC_HTML_2],o=[],s={[w.EC_HTML]:"endcard",[w.ADM_HTML]:"endcard",[w.EC_HTML_2]:"secondEndcard"},l=M(e.get(w.EC_HTML_PRELOAD));return a.filter((t=>e.has(t))).forEach(((a,c)=>{var d;let u=a===w.ADM_HTML,E=`${s[a]}_${c}`,_=new iC(ig(E,e,t),i);o.push(new aX({id:E,endcardContent:r.decode(null!==(d=e.get(a))&&void 0!==d?d:"",M(e.get(w.EC_HTML_COMPRESS))),index:c,isAlternative:!1,compressionType:M(e.get(w.EC_HTML_COMPRESS))?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new iu(c,this.isEndcardOnly(e),il(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.EC_SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new iE(c,il(e),e.get(w.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:_.getLastChanceEndcardConfig(),omsdkEnabled:u,closeButtonConfigProvider:new iI({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===c}),trackingEventMapConfig:new iA(!1).getTrackingEventMapConfig(),callToActionConfig:new iO({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:rB(e,i)}).getCallToActionConfig(),muted:iL(e,t),eligibleToPreload:l,placementTypeService:t,shouldSplitVideoEndcardClick:M(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rH({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),o}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:o,lastChanceEndcardConfig:s,omsdkEnabled:l,closeButtonConfigProvider:c,trackingEventMapConfig:d,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:_,placementTypeService:v=en(),shouldSplitVideoEndcardClick:h=!1,eventStreams:S,incentivizedConfig:T}){super({isFullscreen:v.isFullscreen()}),this.sceneType=t7.endcard,this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=o,this.lastChanceEndcardConfig=s,this.omsdkEnabled=l,this.trackingEventMapConfig=d,this.closeButtonConfigProvider=c,this.callToActionConfig=_,this.placementTypeService=v,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=h,this.eventStreams=S,this.incentivizedConfig=T,l&&this.addEntryAction({name:iR.INIT_OMSDK_HTML_DISPLAY_SERVICE}),this.addTransition(nZ),this.addTransition(nq),this.addTransition(nQ),this.addTransition(nJ),this.addOrUpdateTransition({name:t6.CLOSE,actions:[],scene:new iy}),this.addExitAction({name:iR.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:t6.CLOSE_BUTTON_WILL_SHOW,actions:[{name:iR.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:t6.CREATIVE_VIEW,actions:[{name:iR.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:iR.ON_SHOW})}}aX.isEndcardOnly=(e=b())=>{let t=!e.has(w.MAIN_VIDEO)&&!e.has(w.MAIN_STREAM),n=1===aY.filter((t=>e.has(t))).length;return t&&n};var az=aX,a$=class{getDelay(){return M(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||M(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return M(this.videoCloseButtonAsSkipTokenValue)?nK.SKIP:nK.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},aZ=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!id(this.videoProgressBarTokenValue),color:null!==(t=null!==(e=this.videoProgressBarColorTokenValue)&&void 0!==e?e:this.ctaButtonBackgroundTokenValue)&&void 0!==t?t:iZ}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const aq=(e=b(),t=en(),n=iS())=>{let i=rB(e,n);return{appStoreId:il(e),skCtaOnlyTokenValue:e.get(w.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(w.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var aQ=class extends ip{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?t9.SKPV:n6(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!M(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=en()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},aJ=class{getStreamManifest(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:B(this.mainManifestTokenValue),track_0:B(null!==(e=this.track0TokenValue)&&void 0!==e?e:""),chunks:this.chunkSeriesValues}}constructor(e,t,n){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n}},a0=function(e){if(null===e||"object"!=typeof e||"function"!=typeof e.getStreamManifest)return!1;let t=e.getStreamManifest();return!(void 0!==t&&(null===t||"object"!=typeof t||void 0!==t.manifest&&"string"!=typeof t.manifest||void 0!==t.track_0&&"string"!=typeof t.track_0||void 0!==t.chunks&&(!Array.isArray(t.chunks)||!t.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e)))))))},a1=e=>{let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")},a2=e=>`file://${window.location.pathname.replace("index.html","")}${e}`,a3=class{getCachedFirstTrack(){var e;if(!a0(this.scene)||!this.hasCachedFirstTrack())return"";let t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.track_0;return void 0===t?"":t}getCachedManifest(){var e;if(!a0(this.scene)||!this.hasCachedManifest())return"";let t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.manifest;return void 0===t?"":t}getCachedVideoSegmentUrls(){var e;if(!a0(this.scene))return[];let t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.chunks;return(null==t?void 0:t.length)?t.map((e=>a1(e)&&!e.toLowerCase().startsWith("file://")?a2(e):e)):[]}hasCachedFirstTrack(){var e;return!!a0(this.scene)&&!!(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.track_0)}hasCachedManifest(){var e;return!!a0(this.scene)&&!!(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.manifest)}hasCachedStreamChunks(){var e,t;if(!a0(this.scene))return!1;let n=null!==(t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.chunks)&&void 0!==t?t:[];return 0!==n.length&&a1(n[0])}getChunkFormat(){var e;if(!a0(this.scene)||!this.hasCachedStreamChunks())return"";let t=(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.chunks)[0].split(".");return t.length<2?"":t[t.length-1]}constructor(e=(null===(_3=er.getValue())||void 0===_3?void 0:_3.scene)){this.scene=e}},a5=(e,t)=>{let n=rE(e,rv.HLS_LEVEL_PLAYLIST_LOADED),i=iU(t,iB.SCENE_END);return new iP((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null===(n=t.data)||void 0===n?void 0:n.starting_sequence_number),null===(i=e.complete)||void 0===i||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null===(t=e.complete)||void 0===t||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))},a4=(e=ea,t=rT())=>{var n,i,r;return null!==(r=null===(i=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"video"===t.activity.eventType&&t.activity.name===rv.BANDWIDTH_ESTIMATION&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).pop())||void 0===i||null===(n=i.activity.data)||void 0===n?void 0:n.bwe)&&void 0!==r?r:-1},a6=(e,t,n=ea)=>new iP((i=>{let r=iU(e,iB.SCENE_END).subscribe({next:()=>{var e;i.next(a4(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),a8=(e,t=!1,n=es(),i=no())=>{let r=i7(n),a=iV(n,i_.RESOURCE,ih.VIDEO).pipe(iM()).pipe(ik(iU(r,iB.SCENE_END))),o=ix(iU(r,iB.LOAD_START),iU(r,iB.LOAD_COMPLETE),iU(r,iB.SCENE_END)),s=ix(iU(r,iB.CTA_BUTTON_SHOW),iU(r,iB.CTA_BUTTON_CLICK),iU(r,iB.SCENE_END)),l=I(c({},ru(n,t)),{average_bandwidth:a6(r,n),cta_duration:s,error_count:a,hls_starting_sequence_number:a5(n,r),load_duration:o,preload_duration:rP(r)});return e.enabled&&(l.grant_reward=rL(t7.video,e,n,i)),l};class a7 extends n2{getTransitions(){let e=super.getTransitions();return e.push(n3,n5,n4,nZ,nq,nQ,nJ),e}getId(){return this.id}getSceneType(){return t7.video}getVideoPlayer(){return this.videoType===nn.PROGRESSIVE?nt.PROGRESSIVE:window.Hls.isSupported()?nt.CUSTOM:nt.NATIVE}getVideoUrl(){return this.videoType===nn.PROGRESSIVE&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i;let r=new a3(this);return{cached:r.getCachedVideoSegmentUrls().length,format:r.getChunkFormat(),manifest:r.hasCachedManifest(),local:+!!this.url.toLowerCase().startsWith("file://"),player:this.getVideoPlayer(),segments:null!==(n=null===(t=this.getStreamManifest())||void 0===t||null===(e=t.chunks)||void 0===e?void 0:e.length)&&void 0!==n?n:0,track:r.hasCachedFirstTrack(),url:null!==(i=this.getVideoUrl())&&void 0!==i?i:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(e){let t=this.closeButtonConfigProvider.getCloseButtonConfig(e);return I(c({},t),{style:this.isLastPage()?nK.CLOSE:t.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}setCanSkipToNextScene(e){this.canSkipToNextScene=e}getStreamManifest(){return this.streamManifest}getEventStreams(){return this.eventStreams?this.eventStreams:a8(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}static isLoopingVideo(e,t=!1){return t||M(e)}static getInstances(e=b(),t=en(),n=et(),i=iS()){let r=[w.MAIN_VIDEO,w.MAIN_STREAM],a=[],o=e.get(w.ORIGINAL_VIDEO_URL),s=a7.isLoopingVideo(e.get(w.VIDEO_LOOPING),a7.isVideoOnly(e));return r.filter((t=>e.has(t))).forEach(((r,l)=>{var c;let d=r===w.MAIN_STREAM?nn.HLS:nn.PROGRESSIVE,u=`video_${l}`,E=new iC(ig(u,e,t),i),_=new aQ(aq(e,t,i)).getCallToActionConfig(),v=new is(il(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig();a.push(new a7({id:u,url:null!==(c=e.get(r))&&void 0!==c?c:"",index:l,isAlternative:!1,videoType:d,streamManifest:new aJ(e.get(w.MAIN_MANIFEST),e.get(w.TRACK_0),e.getSeriesValues("STREAM_CHUNK_")).getStreamManifest(),progressBarConfig:new aZ({videoProgressBarTokenValue:e.get(w.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(w.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(w.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new n8({skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),id:u,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:v,appStoreOnDelayConfig:new ic(e.get(w.APP_STORE_ON_VIDEO_AUTO_DELAY),il(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:_,lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),trackingEventMapConfig:new iA(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new a$({closeButtonDelaySecondsTokenValue:e.get(w.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(w.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(w.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(w.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}),originalVideoUrl:o,loopVideo:s,showDownloadButton:M(e.get(w.VIDEO_SHOW_CTA))&&(!_.isPersistent||v.enabled),isFullscreen:t.isFullscreen(),muted:iL(e,t),shouldSplitVideoEndcardClick:M(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rH({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:s,appStoreOnDelayConfig:l,callToActionConfig:c,lastChanceEndcardConfig:d,progressBarConfig:u,closeButtonConfigProvider:E,originalVideoUrl:_,trackingEventMapConfig:v,showDownloadButton:h,loopVideo:S=!1,muted:T=!1,isFullscreen:p,shouldSplitVideoEndcardClick:g=!1,eventStreams:C,incentivizedConfig:I}){super({isFullscreen:p}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.progressBarConfig=u,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=s,this.appStoreOnDelayConfig=l,this.callToActionConfig=c,this.showDownloadButton=h,this.lastChanceEndcardConfig=d,this.closeButtonConfigProvider=E,this.originalVideoUrl=_,this.loopVideo=S,this.muted=T,this.trackingEventMapConfig=v,this.shouldSplitVideoEndcardClick=g,this.eventStreams=C,this.incentivizedConfig=I,this.canSkipToNextScene=!1,this.addTransition({name:t6.NEXT,actions:[{name:t4.CLOSE_VIDEO}]})}}a7.isVideoOnly=(e=b())=>{let t=!e.some(...aY),n=1===[w.MAIN_VIDEO,w.MAIN_STREAM].filter((t=>e.has(t))).length;return t&&n};var a9=function(e){return e instanceof a7&&Object.values(nn).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},oe=e=>e instanceof az&&e.getSceneType()===t7.endcard,ot=class extends a{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e,t=t1(e)){return(null==t?void 0:t.state.value)===t3.PRELOADING}getHTMLScenesToPreload(e){if(e.isChild())return;let t=[];if(a9(e)){oe(e.next)&&e.next.eligibleToPreload&&t.push({scene:e.next,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1});let n=e.getTransitions().find((e=>e.name===t6.COMPLETE));oe(null==n?void 0:n.scene)&&n.scene!==e.next&&n.scene.eligibleToPreload&&t.push({scene:n.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1})}else if(oe(e)&&e.eligibleToPreload){let n=t1(e.getId());(null==n?void 0:n.state.context.preloadSuccess)&&(t.push({scene:e,isCloseButtonVisible:!0,isPrivacyButtonVisible:!0,shouldRenderIFrame:!0,startPreloading:!1}),e.getTransitions().forEach((e=>{e.scene&&oe(e.scene)&&e.scene.eligibleToPreload&&t.push({scene:e.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!0})})))}return t.length>0?t:void 0}startPreloading(e,t=t1(e)){null==t||t.send(t2.PRELOAD)}cancelPreloading(e,t=t1(e)){null==t||t.send(t2.CANCEL_PRELOAD)}};const on=e=>"observability"===e.type&&null!=e.event;var oi=class extends n9{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.getActivityEvents().filter((e=>{let{activity:i}=e;return i.type===F.EVENT&&"observability"===i.eventType&&!!i.data&&t.every((e=>this.isEventMatch(i.data,n.data,e)))})).length}getReportableEvent(e,t){return on(e)?e:{type:"observability",event:F.EVENT,data:"string"==typeof e?{name:e,metric:t}:e}}isEventMatch(e,t,n){return Array.isArray(e)?e.some((e=>Array.isArray(t)?t.some((t=>e[n]===t[n])):e[n]===t[n])):Array.isArray(t)?t.some((t=>(null==e?void 0:e[n])===t[n])):(null==e?void 0:e[n])===t[n]}},or=e=>new oi(null!=e?e:eo()),oa=class extends a{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null===(t=e.error)||void 0===t?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.is_fatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null===(t=this.currentScene())||void 0===t?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,o=null!==(i=null===(n=e.data)||void 0===n||null===(t=n.content)||void 0===t?void 0:t.message)&&void 0!==i?i:"";a&&!this.isIgnoredError(o)&&(e.data.content.error_source=Y.PLAYABLE,this.send({type:"error-logging",event:i_.PLAYABLE,data:{error:e.data.content,scene_id:null===(r=ea())||void 0===r?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:i_.UNHANDLEDREJECTION,data:{error:{message:null!==(n=null===(t=e.reason)||void 0===t?void 0:t.toString())&&void 0!==n?n:"Unhandled rejection error",error_source:Y.TEMPLATE}}}),this.observabilityEventReportingService.emit(K.TEMPLATE_ERROR,G.TEMPLATE_ERROR)}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:i_.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:Y.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n),this.observabilityEventReportingService.emit(K.TEMPLATE_ERROR,G.TEMPLATE_ERROR)}getErrorCode(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.resource_type;return n===ih.IMAGE?1e4:n===ih.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:i_.RESOURCE,data:{resource_type:ih.IMAGE,error:{resource_url:t,error_source:Y.RESOURCE,message:X}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),o=null!==(r=null===(t=e.data.error)||void 0===t?void 0:t.message)&&void 0!==r?r:"Unknown error";null===(i=this.mraidService.getMraidBridgeExt())||void 0===i||null===(n=i.notifyError)||void 0===n||n.call(i,a,o,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=L(),t=iS(),n=or(),i=ea){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.observabilityEventReportingService=n,this.currentScene=i}},oo={};function os(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(oo=os).default=os;class ol extends Error{}var oc=(e,t=1e4,n=new ol("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var o;let s=e();((o=oo)&&o.__esModule?o.default:o)(s)?s.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):s?i(s):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)}));class od extends a{addEventStreams(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:iB.SCENE_END,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:iB.SCENE_START,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{oc((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),od.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=i7()){super(),this.reportingService=e,this.sceneEventStreams={}}}od.MAX_WAIT_TIME=2e3;var ou=()=>({dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}}),oE=class extends a{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}},ov=class extends oE{static getServiceIdentifier(){return"UrlCacheServiceInterface"}};class o_{static async hasSufficientSpace(){var e;if(!(null===(e=window.navigator.storage)||void 0===e?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&o_.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Unknown error from IndexedDB")}static async open(e){if(await o_.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,o=window.indexedDB.open(i,a);o.onupgradeneeded=e=>o_.handleUpgrade(e,r),o.onsuccess=e=>t(e.target.result),o.onerror=e=>n(o_.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(o_.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(o_.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(o_.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(o_.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(o_.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(o_.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(o_.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(o_.convertToError(t.error))}))}),void 0)}constructor(e,t,n=iS()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var oh=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e,t,n){this.indexedDatabaseService=o_.open(e).then((i=>i?new o_(i,e,t):new n)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},oS=class extends a{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e=ou(),t=iS()){super(),this.indexedDatabaseService=new oh(e,t,ov).getIndexedDatabaseService()}},oT=((_5={}).LANDSCAPE="landscape",_5.PORTRAIT="portrait",_5.UNKNOWN="unknown",_5),op=((_4={}).LOAD_FAIL="LOAD_FAIL",_4.PLAY="PLAY",_4.CAN_PLAY="CAN_PLAY",_4.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",_4.PAUSE="PAUSE",_4.END="END",_4.TIME_UPDATE="TIME_UPDATE",_4.CLOSE="CLOSE",_4.DURATION_CHANGE="DURATION_CHANGE",_4.WAITING="WAITING",_4.SUSPEND="SUSPEND",_4.RETRY="RETRY",_4.MAXIMIZE="MAXIMIZE",_4.MINIMIZE="MINIMIZE",_4),og=((_6={}).LOADING="LOADING",_6.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",_6.PLAYING="PLAYING",_6.PAUSED="PAUSED",_6.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",_6.ENDED="ENDED",_6.FINAL="FINAL",_6),oC=((_8={}).UPDATE_PROGRESS="updateProgress",_8.EMIT_PROGRESS="emitProgress",_8.EMIT_LOAD="emitLoad",_8.EMIT_PLAY="emitPlay",_8.EMIT_PAUSE="emitPause",_8.EMIT_CLOSE="emitClose",_8.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",_8.INCREMENT_LOOP_COUNT="incrementLoopCount",_8.REPORT_VIDEO_START="reportVideoStart",_8.SET_CAN_PLAY="setCanPlay",_8.EMIT_DURATION_CHANGE="emitDurationChange",_8.EMIT_TIME_UPDATE="emitTimeUpdate",_8.EMIT_WAITING="emitWaiting",_8.EMIT_SUSPEND="emitSuspend",_8.UPDATE_CURRENT_TIME="updateCurrentTime",_8.RESET_CURRENT_TIME="resetCurrentTime",_8.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",_8.EMIT_SCENE_EVENT="emitTrackingEvent",_8),oI=((_7=oI||{}).FSC="FSC",_7);const oA=()=>eo(),oO=()=>eo();var om=class extends a{setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:I(c({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!==(e=this.videoScene.getFullScreenClickConfig().target)&&void 0!==e?e:t9.SKPV}),trackingEventMapConfig:I(c({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){var e;this.fullScreenCallToActionReportingService.emit({type:"fsc",event:oI.FSC,data:{scene_id:null===(e=this.videoScene)||void 0===e?void 0:e.getId()}})}videoAdViewableChange(e,t,n=!1){this.videoScene&&this.videoInterpreter&&(t.event!==el.MAXIMIZED||n?t.event===el.MINIMIZED&&this.videoInterpreter.send({type:op.MINIMIZE}):this.videoInterpreter.send({type:op.MAXIMIZE,hasHlsVideo:this.videoScene.videoType===nn.HLS}))}isPortrait(){return this.environmentService.getOrientation()===W.PORTRAIT}closeVideo(){var e;null===(e=this.videoInterpreter)||void 0===e||e.send({type:op.CLOSE}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=et(),t=oO()){super(),this.environmentService=e,this.fullScreenCallToActionReportingService=t,this.videoElement=null}},of=()=>({dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}}),oN=class extends oE{static getServiceIdentifier(){return"UserActivityServiceInterface"}},oD=class extends a{findObservabilityActivityEvent(e){return t=>{var n;let i=t.activity;if("observability"===(null==i?void 0:i.eventType)&&(Array.isArray(i.data)&&i.data.some((t=>t.name===e))||(null===(n=i.data)||void 0===n?void 0:n.name)===e))return i}}findSceneEventActivityEvent(e,t){return n=>{var i;if("eventType"in n.activity&&"scene-event"===n.activity.eventType&&n.activity.name===e&&(null===(i=n.activity.data)||void 0===i?void 0:i.scene_type)===t)return n.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(K.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find((e=>"video"===e.activity.eventType&&e.activity.name===rv.CLOSE));if(null==t||null===(e=t.activity.data)||void 0===e?void 0:e.maximum_viewing_time)return Math.floor(1e3*t.activity.data.maximum_viewing_time)}getEndcardSceneEndActivity(){return this.reportingService.getActivityEvents().find((e=>"observability"===e.activity.eventType&&!!e.activity.data&&!Array.isArray(e.activity.data)&&e.activity.data.name===K.SCENE_END&&e.activity.data.scene_type===t7.endcard))}getEndcardInteractions(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null===(t=n.activity)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.click_count}getEndcardDuration(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null===(t=n.activity)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(K.VIDEO_START)),n=e.find(this.findSceneEventActivityEvent(iB.CLOSE_BUTTON_SHOW,t7.video));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findSceneEventActivityEvent(iB.SCENE_START,t7.endcard)),n=e.find(this.findSceneEventActivityEvent(iB.CLOSE_BUTTON_SHOW,t7.endcard));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionAfterCloseButton(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null===(t=n.activity)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.interaction_after_close_button_visible}getUserActivityData(){var e,t,n;return{eventId:null!==(e=this.tokenService.get(w.SESSION_ID))&&void 0!==e?e:"",creativeId:null!==(t=this.tokenService.get(w.CREATIVE_ID))&&void 0!==t?t:"",adSource:this.tokenService.get(w.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!==(n=this.tokenService.get(w.ORIGINAL_VIDEO_URL))&&void 0!==n?n:this.tokenService.get(w.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionAfterCloseButton:this.getEndcardInteractionAfterCloseButton(),rewarded:this.placementTypeService.isRewarded(),createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()}}async addRecord(){let e=await this.indexedDatabaseService,t=this.getUserActivityData();return e.addRecord(t)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e=of(),t=iS(),n=b(),i=es(),r=a4,a=en()){super(),this.indexedDatabaseService=new oh(e,t,oN).getIndexedDatabaseService(),this.tokenService=n,this.reportingService=i,this.placementTypeService=a,this.injectedGetVideoStreamAverageBandwidth=r}},oR=()=>{var e;let t=null===(e=er.getValue())||void 0===e?void 0:e.scene;if((null==t?void 0:t.getSceneType())===t7.video)return t;if((null==t?void 0:t.getSceneType())===t7.composite){let e=t.getScenes().find((e=>e.getSceneType()===t7.video));if(e)return e}},oy=(e,t=oR)=>{var n;let i=null===(n=t())||void 0===n?void 0:n.getId();if(i)return(null!=e?e:t0()).interpreterMap.get(i)},oL=((_9={}).SHOW="SHOW",_9.HIDE="HIDE",_9),oP=((he={}).SHOWING="SHOWING",he.HIDDEN="HIDDEN",he),ob=((ht={}).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",ht.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide",ht);const ow="last-chance-endcard",oV=e=>({id:null!=e?`${ow}-${e}`:ow,initial:oP.HIDDEN,context:{delay:0},states:{[oP.SHOWING]:{on:{[oL.HIDE]:{target:oP.HIDDEN,actions:[ob.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[oP.HIDDEN]:{on:{[oL.SHOW]:{target:oP.SHOWING,actions:[ob.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),oM={actions:{[ob.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{let e=i7(),t=or();e.emit(iB.LAST_CHANCE_ENDCARD_OPEN),t.emit(K.SCENE_START,G.LAST_CHANCE_ENDCARD_SCENE_START)},[ob.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{i7().emit(iB.LAST_CHANCE_ENDCARD_CLOSE)}}};var ok=(e,t)=>{let n=null!=t?t:t0(),i=null!=e?`${ow}-${e}`:ow;return n.interpreterMap.get(i)},oU=(e=ea,t=ok)=>{let n=e();if(!n)return!1;let i=t(n.getId());return null==i?void 0:i.state.matches(oP.SHOWING)},oB=(e,t,n)=>{if(!n)return;let i=n.getBoundingClientRect(),r=Math.max(i.left-e,0,e-i.right),a=Math.max(i.top-t,0,t-i.bottom);return parseInt(`${Math.sqrt(r*r+a*a)}`,10)};const oH=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i},r=!1)=>{var a;let o,s=i.getActivityEvents();if(n){let t=s.find((t=>{var i;return(null===(i=t.activity.data)||void 0===i?void 0:i.scene_id)===e&&t.activity.name===n}));if(!t)return r?[]:null;o=t.timestamp}let l=i=>{var r;return(null===(r=i.activity.data)||void 0===r?void 0:r.scene_id)===e&&i.activity.name===t&&(!n||i.timestamp>o)};return r?s.filter(l):null!==(a=s.find(l))&&void 0!==a?a:null},oW=e=>oH(e,!0),ox=e=>oH(e,!1),oF=e=>{let t=oW(e);return 0===t.length?null:t[t.length-1]},oK=e=>{let t=oW(e);return 0===t.length?null:t[0]},oG=e=>e.reduce(((e,[t,n])=>e+(n.timestamp-t.timestamp)),0),oY=(e,t)=>oG(e.getActivityEventPairs("viewability",el.MINIMIZED,el.MAXIMIZED).filter((e=>e[0].timestamp>t))),oj=(e,t)=>oG(e.getActivityEventPairs("store-kit-product-view",ew.APP_STORE_OPEN,ew.APP_STORE_CLOSE).filter((e=>e[0].timestamp>t))),oX=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=i7()})=>{var r,a;let o=null!==(a=null===(r=ox({sceneId:e,eventName:t,precedingEventName:n,reportingService:i}))||void 0===r?void 0:r.timestamp)&&void 0!==a?a:null;if(null===o)return;let s=oY(i,o),l=oj(i,o);return{sceneEventTimestamp:o,elapsedTimeSinceEvent:Date.now()-o,backgroundDuration:s,appStoreDuration:l}},oz=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=i7()})=>{let r=oX({sceneId:e,eventName:t,precedingEventName:n,reportingService:i});if(void 0===r)return;let{elapsedTimeSinceEvent:a,appStoreDuration:o,backgroundDuration:s}=r;return a-s+o},o$=e=>e?iB.LAST_CHANCE_ENDCARD_OPEN:void 0,oZ=({coordinates:e,clickTarget:t,targetElement:n})=>(null==n?void 0:n.contains(t))||t.contains(n)?0:oB(e.x,e.y,n),oq=(e,t)=>{var n,i,r;return t?null===(i=e.getLastChanceEndcardConfig)||void 0===i||null===(n=i.call(e).close)||void 0===n?void 0:n.countdown:null===(r=e.getCloseButtonConfig)||void 0===r?void 0:r.call(e,{}).countdown},oQ=e=>{let t=e(),n=null==t?void 0:t.state.context.currentTime;return void 0!==n?parseInt(""+1e3*n,10):void 0},oJ=(e,t)=>new Promise((n=>{let i=iw(e,"tpat").pipe(ib((e=>[n7.POSTROLL_CLICK,n7.CLICK_URL].includes(e.event))),iG((()=>!0)));rl(ry(200,t,!1),i).subscribe({next:e=>{n(e)},error:()=>n(!1),complete:()=>n(!1)})})),o0=()=>({nextButton:document.querySelector(`#${iJ}, #${i2}`),closeButton:document.querySelector(`#${iq}`),ctaButton:document.querySelector(`#${iX}, #${i0}, #${i1}`),privacyButton:document.querySelector(`#${i5}`),muteButton:document.querySelector(`#${i$}`),countdown:document.querySelector(`#${iQ}`)}),o1=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{let i=oF({sceneId:e,eventName:iB.NEXT_BUTTON_COUNTDOWN_TICK,precedingEventName:o$(t),reportingService:n});if(!i)return 0;let r=Date.now()-i.timestamp,a=1e3*i.activity.data.delay;return r<=1e3?-(a-r):-a},o2=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>oz({sceneId:e,eventName:t?iB.LAST_CHANCE_ENDCARD_OPEN:iB.SCENE_START,reportingService:n}),o3=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{var i;let r=oK({sceneId:e,eventName:iB.NEXT_BUTTON_COUNTDOWN_TICK,precedingEventName:o$(t),reportingService:n});return parseInt(""+1e3*(null!==(i=null==r?void 0:r.activity.data.delay)&&void 0!==i?i:0),10)},o5=e=>{if(!o0().closeButton)return parseInt(`${o1(e)}`,10);let{sceneId:t,lastChanceEndcardVisible:n,reportingService:i}=e;return oz({sceneId:t,eventName:iB.CLOSE_BUTTON_SHOW,precedingEventName:o$(n),reportingService:i})},o4=({coordinates:e,clickTarget:t,lastChanceEndcardVisible:n})=>{let i=o0();return{closeDistance:oZ({coordinates:e,clickTarget:t,targetElement:i.nextButton}),ctaDistance:oZ({coordinates:e,clickTarget:t,targetElement:i.ctaButton}),privacyDistance:oZ({coordinates:e,clickTarget:t,targetElement:i.privacyButton}),muteDistance:n?void 0:oZ({coordinates:e,clickTarget:t,targetElement:i.muteButton})}},o6=e=>{let{data:t={}}=e;return{sceneId:t.scene_id,coordinates:t.click_coordinates,clickTarget:t.click_target,eventName:e.event}},o8=e=>{let{eventName:t,sceneId:n,coordinates:i,clickTarget:r}=e;return t===iB.CLICK&&!!n&&!!i&&!!r},o7=e=>[iB.SCENE_START,iB.LAST_CHANCE_ENDCARD_OPEN].includes(e),o9=(e,t,n,i)=>(r,a)=>{let o=o6(a),s=!!i();if(o8(o)){let t=n();t&&e({currentScene:t,coordinates:o.coordinates,clickTarget:o.clickTarget,lastChanceEndcardVisible:s})}o7(o.eventName)&&t()};var se=class extends a{setupEventHandlers(){this.injectedSceneEventReportingService.addEventHandler("scene-event",o9(this.collectClickMetrics.bind(this),this.resetSceneClickIndex.bind(this),this.injectedGetCurrentScene,this.injectedGetIsLastChanceEndcardVisible))}resetSceneClickIndex(){this.sceneClickIndex=void 0}updateGlobalMetrics(){var e,t;this.clickIndex=(null!==(e=this.clickIndex)&&void 0!==e?e:-1)+1,this.sceneClickIndex=(null!==(t=this.sceneClickIndex)&&void 0!==t?t:-1)+1}async collectClickMetrics({currentScene:e,coordinates:t,clickTarget:n,lastChanceEndcardVisible:i}){let r={sceneId:e.getId(),lastChanceEndcardVisible:i,reportingService:this.injectedSceneEventReportingService};this.updateGlobalMetrics();let a=I(c({clickX:parseInt(String(t.x),10),clickY:parseInt(String(t.y),10),width:window.innerWidth,height:window.innerHeight,clickIndex:this.clickIndex,sceneClickIndex:this.sceneClickIndex},o4({coordinates:t,clickTarget:n,lastChanceEndcardVisible:i})),{sceneElapsedDuration:o2(r),closeCountdown:oq(e,i),closeButtonTimeStamp:o5(r),minimumView:o3(r),videoTimeStamp:i?void 0:oQ(this.injectedGetVideoInterpreter),mmp:await oJ(this.injectedTpatReportingService,this.injectedTimerService)});this.injectedObservabilityEventReportingService.emit({type:"observability",event:F.EVENT,data:c({scene_id:e.getId(),scene_type:i?"lcec":e.getSceneType(),name:K.CLICK_METRICS},this.mapClickMetricsForObservability(a))})}mapClickMetricsForObservability(e){return{click_index:e.clickIndex,click_x:e.clickX,click_y:e.clickY,close_button_timestamp:e.closeButtonTimeStamp,close_countdown:e.closeCountdown,close_distance:e.closeDistance,cta_distance:e.ctaDistance,height:e.height,minimum_view:e.minimumView,mmp:e.mmp,mute_distance:e.muteDistance,privacy_distance:e.privacyDistance,scene_click_index:e.sceneClickIndex,scene_elapsed_duration:e.sceneElapsedDuration,video_timestamp:e.videoTimeStamp,width:e.width}}static getServiceIdentifier(){return"ClickMetricsServiceInterface"}constructor({injectedGetVideoInterpreter:e=oy,injectedGetIsLastChanceEndcardVisible:t=oU,injectedSceneEventReportingService:n=i7(),injectedObservabilityEventReportingService:i=or(),injectedGetCurrentScene:r=ea,injectedTpatReportingService:a=ii(),injectedTimerService:o=no()}={}){super(),this.injectedGetVideoInterpreter=e,this.injectedGetIsLastChanceEndcardVisible=t,this.injectedSceneEventReportingService=n,this.injectedObservabilityEventReportingService=i,this.injectedGetCurrentScene=r,this.injectedTpatReportingService=a,this.injectedTimerService=o,this.clickIndex=void 0,this.sceneClickIndex=void 0,this.setupEventHandlers()}},st=class extends a{static getServiceIdentifier(){return"CloseButtonServiceInterface"}constructor(...e){super(...e),this.cachedConfig=new Map}},sn=0;function si(e,t,n,i,r,a){t||(t={});var o,s,l=t;if("ref"in l)for(s in l={},t)"ref"==s?o=t[s]:l[s]=t[s];var c={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--sn,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===l[s]&&(l[s]=o[s]);return eO.vnode&&eO.vnode(c),c}const sr={V4_9_0:new U("4.9.0"),V4_9_3:new U("4.9.3"),V5_0_0:new U("5.0.0"),V5_0_1:new U("5.0.1"),V5_1_2:new U("5.1.2"),V5_2_1:new U("5.2.1")};var sa=((hn=sa||{}).SILENT="silent",hn.UN_SILENT="un-silent",hn),so=(e=L())=>{var t,n,i;return null!==(i=null===(n=e.getMraidExt())||void 0===n||null===(t=n.isSilent)||void 0===t?void 0:t.call(n))&&void 0!==i&&i},ss=(e=r.getInstance())=>e.get(ia),sl=(e=ss())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();(i===t7.video||i===t7.endcard)&&t.push(e),i===t7.composite&&n(e.getScenes())}))};return n(e),t.some((e=>e.muted))},sc=()=>eo();const sd=(e=eo())=>e.getActivityEvents().some((e=>"silent"===e.activity.eventType&&(e.activity.name===sa.SILENT||e.activity.name===sa.UN_SILENT))),su=(e,t,n)=>{t||n||e.emit({type:"silent",event:sa.UN_SILENT})},sE=(e,t)=>{e.emit({type:"silent",event:t?sa.SILENT:sa.UN_SILENT})};var sv=(e,t=L(),n=sc(),i=et(),r=sl())=>{let a=so(t);var o;i.getOperatingSystem()===H.iOS?(null===(o=t.getMraid())||void 0===o||o.removeEventListener("silentChange",e),su(n,r,a)):sE(n,a)},s_=()=>{let e=r.getInstance(),t=ek.getServiceIdentifier();return e.get(t)},sh=()=>eo(),sS=(e=sh(),t=s_())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?el.MAXIMIZED:el.MINIMIZED})},sT=()=>{let e=r.getInstance(),t=ot.getServiceIdentifier();return e.get(t)},sp=((hi={}).INFO="info",hi.READY="ready",hi.ERROR="error",hi.STATE_CHANGE="stateChange",hi.ORIENTATION_CHANGE="orientationChange",hi.VIEWABLE_CHANGE="viewableChange",hi.SIZE_CHANGE="sizeChange",hi.SILENT_CHANGE="silentChange",hi),sg=((hr={}).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow",hr),sC=class extends a{getEventCallbacks(e,t){return this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=this.callbacks[e][t]||[],[...this.callbacks[e][t]]}updateEventCallbacks(e,t,n){this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=n}addEventListener(e,t,n){if(!this.allowedMraidEvents.includes(t))return;let i=this.getEventCallbacks(e,t);this.updateEventCallbacks(e,t,[...i,n])}removeEventListener(e,t,n){if(this.allowedMraidEvents.includes(t))if(n){let i=this.getEventCallbacks(e,t).filter((e=>e!==n));this.updateEventCallbacks(e,t,i)}else this.updateEventCallbacks(e,t,[])}flushAllEventCallbacks(e){this.callbacks[e]&&Object.keys(this.callbacks[e]).forEach((t=>{this.updateEventCallbacks(e,t,[])}))}init(){this.mraidEvents.forEach((e=>{let t=(...n)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(t),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage();let i=ea();i&&this.getEventCallbacks(i.getId(),e).forEach((e=>{e(...n)}))};this.mraidService.getMraid().addEventListener(e,t)}))}triggerEvent(e,t,...n){"viewableChange"===t&&this.injectedPreloadService.isHTMLPreloading(e)||this.getEventCallbacks(e,t).forEach((e=>{e(...n)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=L(),n=sv,i=sS,r=sT()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(sg)],this.callbacks={}}},sI=()=>{let e=r.getInstance(),t=sC.getServiceIdentifier();return e.get(t)};const sA=(e=b())=>e.has(w.ERID_ADVERTISER_INFO,w.ERID_ADVERTISER_LINK,w.ERID_RECOMMEND_RULE,w.CTA_BUTTON_URL),sO=e=>e?`?${e.toString()}`:"",sm=(e=b())=>{if(sA(e)){let t=new URLSearchParams;return t.set("adSource",B(e.get(w.ERID_ADVERTISER_INFO))),t.set("adUrl",B(e.get(w.ERID_ADVERTISER_LINK))),t.set("adRulesUrl",B(e.get(w.ERID_RECOMMEND_RULE))),t.set("adCtaUrl",e.get(w.CTA_BUTTON_URL)),`https://cdn-lb.vungle.com/privacy-policy-and-ad-info-erid/index.html${sO(t)}`}return e.get(w.VUNGLE_PRIVACY_URL)};var sf=()=>({[nc.SET_PRIVACY_BUTTON_VISIBLE]:g({isPrivacyButtonVisible:!0}),[nc.SET_PRIVACY_BUTTON_HIDDEN]:g({isPrivacyButtonVisible:!1}),[nc.OPEN_PRIVACY_URL]:()=>{var e,t;let n=et(),i=b(),r=or(),a=n.getOperatingSystem(),o=a===H.Android||a===H.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(sr.V5_0_0);r.emit(K.PRIVACY_CTA,G.PRIVACY_CTA),o&&!sA(i)?null===(e=L().getMraidBridgeExt())||void 0===e||e.openPrivacy(sm(i)):null===(t=L().getMraid())||void 0===t||t.open(sm(i))},[nc.SET_PRIVACY_DRAWER_OPEN]:g({isPrivacyDrawerOpen:!0}),[nc.SET_PRIVACY_DRAWER_CLOSED]:g({isPrivacyDrawerOpen:!1}),[nc.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=sI(),n=s_();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable();let i=ea();i&&t.triggerEvent(i.getId(),sp.VIEWABLE_CHANGE,n.isViewable())}}),sN=()=>{let e=r.getInstance(),t=tJ.getServiceIdentifier();return e.get(t)},sD=()=>{let e=r.getInstance(),t=om.getServiceIdentifier();return e.get(t)},sR=()=>{let e=r.getInstance(),t=oa.getServiceIdentifier();return e.get(t)},sy=(e=oy,t=sD())=>({[t4.MUTE_SOUND]:()=>{sN().mute()},[t4.UN_MUTE_SOUND]:()=>{sN().unmute()},[t4.EMIT_MUTED]:()=>{let e=rT(),t=sN();e.emit({type:"video",event:t.isMuted()?rv.MUTE:rv.UNMUTE})},[t4.EMIT_VIDEO_ERROR]:(e,t)=>{rT().emit({type:"video",event:rv.ERROR,data:t})},[t4.CLOSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:op.CLOSE})},[t4.CLOSE_VIDEO_CURRENT_SCENE]:()=>{var t;null===(t=e())||void 0===t||t.send({type:op.CLOSE})},[t4.PAUSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:op.PAUSE})},[t4.PLAY_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:op.PLAY})},[t4.POSTROLL_VIEW]:()=>{ii().emit(n7.POSTROLL_VIEW,!0)},[t4.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{or().emit(K.VIDEO_SKIP_TO_ENDCARD,G.VIDEO_SKIP_TO_ENDCARD)},[t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT]:()=>{var n;let i=ea(),r=null===(n=e())||void 0===n?void 0:n.state.context.videoElement;t.setVideoContext(i,r,e())},[t4.SHOW_PICTURE_IN_PICTURE]:g({shouldRenderPictureInPicture:()=>!0}),[t4.CLOSE_PICTURE_IN_PICTURE]:g({shouldRenderPictureInPicture:()=>!1}),[t4.SEND_FATAL_VIDEO_ERROR]:()=>{let e=sR(),t={type:"error-logging",event:i_.RESOURCE,data:{resource_type:ih.VIDEO,is_fatal:!0,error:Error($)}};e.send(t)}}),sL=(e=i7())=>({[nF.EMIT_CLOSE_BUTTON_SHOW]:()=>{e.emit(iB.CLOSE_BUTTON_SHOW)},[nF.EMIT_CLOSE_BUTTON_CLICK]:()=>{e.emit(iB.CLOSE_BUTTON_CLICK)},[nF.SET_CLOSE_BUTTON_VISIBLE]:g({isCloseButtonVisible:!0}),[nF.SET_CLOSE_BUTTON_HIDDEN]:g({isCloseButtonVisible:!1})}),sP=()=>"true"===b().get(w.OM_ENABLED),sb=((ha={}).REMOVE_HANDLER="REMOVE_HANDLER",ha),sw=()=>{try{return window.OmidSessionClient.default}catch(e){return}},sV=class{init(e,t){var n,i;if(this.sessionClient=sw(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:o,VerificationScriptResource:s,AdEvents:l,MediaEvents:c}=this.sessionClient;if(t){let e=new s(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let d=et().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,d||this.vungleData.partnerVersion),this.context=new o(this.partner,this.verificationScriptResources),void 0!==e&&(null===(n=this.context)||void 0===n||n.setVideoElement(e)),this.adSession=new r(this.context),(null===(i=this.adSession)||void 0===i?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new c(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}},sM=((ho=sM||{}).HTML_DISPLAY="htmlDisplay",ho.VIDEO="video",ho),sk=((hs=sk||{}).LOADED="loaded",hs),sU=((hl=sU||{}).SESSION_START="sessionStart",hl.SESSION_ERROR="sessionError",hl.SESSION_FINISH="sessionFinish",hl),sB=class extends sV{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null===(e=this.adSession)||void 0===e||e.setCreativeType(sM.HTML_DISPLAY),null===(t=this.adSession)||void 0===t||t.setImpressionType(sk.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){eo().emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,null===(t=this.adEvents)||void 0===t||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===sU.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();e.type===sU.SESSION_FINISH&&eo().emit({type:"cta",event:sb.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},sH=()=>{if(sP()){let e=sB.getServiceIdentifier(),t=new sB;r.getInstance().bind(e,t)}},sW=e=>{e.length>0&&((new Image).src=e)},sx=()=>eo();const sF=(e,t)=>`${e}_${t}`,sK=e=>{let t=e.split("_");return t[t.length-1]},sG=(e,t)=>{var n,i;if(!(null===(n=t.data)||void 0===n?void 0:n.trackingEventMapConfig.enabled))return;let r=sK(t.event),a=null===(i=t.data)||void 0===i?void 0:i.trackingEventMapConfig.events;if(!(null==a?void 0:a[r]))return;let o=a[r];null==o||o.forEach((e=>{sW(e)}))};var sY=(e=!0,t=sx())=>{tc((()=>e?(t.addEventHandler("tracking-event",sG),()=>{t.removeEventHandler("tracking-event",sG)}):()=>{}),[t,e])},sj=(e,t,n,i=!1,r=sx())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let o=sF(t,e);r.emit({type:"tracking-event",event:o,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},sX=(e,t=ss())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},sz=(e=ea,t=t1,n=ii,i=sj)=>({[iR.ON_CREATIVE_VIEW]:()=>{let t=e();t&&[t7.endcard,t7.image].includes(t.getSceneType())&&i(ne.CREATIVE_VIEW,t.getId(),t.getTrackingEventMapConfig(),!0)},[iR.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{let e=ea();e&&sI().flushAllEventCallbacks(e.getId())},[iR.DESTROY_IFRAME]:g({shouldRenderIFrame:!1}),[iR.INIT_CHECKPOINTS]:()=>{!n().hasExistingEvent({type:"tpat",event:n7.CHECKPOINT_0})&&s_().isViewable()&&rf(0)},[iR.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{sH()},[iR.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=sI(),t=ea();t&&(e.triggerEvent(t.getId(),sg.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(t.getId(),sg.CLOSE_BUTTON_WILL_SHOW))},[iR.ON_SHOW]:()=>{let e=t0().interpreterMap.get("ad");if(e){let n=t(sX(e.state).getId());null==n||n.send({type:t2.SHOW})}}});const s$=ei({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");var sZ=((hc={}).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",hc.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard",hc),sq=()=>({showLastChanceEndcard:()=>{let e=er.getValue().scene;if(n1(e)){let t=ok(e.getId());s$.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:oL.SHOW})}},closeLastChanceEndcard:()=>{s$.setValue({isLastChanceEndcardOverlayShowing:!1});let e=er.getValue().scene;if(n1(e)){let t=ok(e.getId());null==t||t.send({type:oL.HIDE})}}}),sQ=class extends a{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!==(t=e.autoShowDelay)&&void 0!==t?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!==(i=e.autoCloseDelay)&&void 0!==i?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:np.OFF}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:np.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=no()){super(),this.storeKitOverlayService=e,this.timerService=t}},sJ=()=>{let e=r.getInstance(),t=sQ.getServiceIdentifier();if(e.has(t))return e.get(t)},s0=((hd={}).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService",hd),s1=(e=sJ)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),s2=class extends a{fireStoreKitOverlayWithDelay(e){let t=nI();new R(e,(()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())})).start()}openStoreViewWithDelay(e){if(nb()&&nU())return void this.fireStoreKitOverlayWithDelay(e);let t=no().getNewTimer(e,(()=>{let e=nP();null==e||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null===(e=this.timer)||void 0===e||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},s3=()=>{let e=r.getInstance(),t=s2.getServiceIdentifier();if(e.has(t))return e.get(t)},s5=((hu={}).RESET_APP_STORE_ON_DELAY_SERVICE="resetAppStoreOnDelayService",hu),s4=(e=s3)=>({resetAppStoreOnDelayService:()=>{let t=e();null==t||t.reset()}}),s6=()=>c({},iD(),sf(),sy(),nO(),s1(),nW(),nl(),na(),sL(),sz(),sq(),s4()),s8=(e=b())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,isFreeForm:e.has(w.AD_EXPERIENCE),allowDebug:e.has(w.IS_RUNNING_INSIDE_EMBED)||e.has(w.IS_STAFF_DEVICE_BID),isIncentivized:M(e.get(w.INCENTIVIZED)),globalTimer:0}),s7=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},s9=()=>{let e=new s7,t=ss(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:s8()}},le=((hE=le||{}).DECODING_ERROR="decoding_error",hE),lt=(e=L(),t=en())=>{var n,i,r,a,o,s;return null!==(s=null!==(o=null===(i=e.getMraidExt())||void 0===i||null===(n=i.getConsentRequired)||void 0===n?void 0:n.call(i))&&void 0!==o?o:null===(a=e.getMraid())||void 0===a||null===(r=a.getConsentRequired)||void 0===r?void 0:r.call(a))&&void 0!==s&&s&&!t.isBanner()},ln=class{parseAdExperienceData(e){try{let t=B(e);return JSON.parse(t)}catch(e){return void this.freeFormReportingService.emit({type:"free-form",event:le.DECODING_ERROR})}}getAdExperience(e=lt(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!==(t=this.tokenService.get(w.AD_EXPERIENCE))&&void 0!==t?t:"",i=this.parseAdExperienceData(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!==(n=this.adExperienceCache)&&void 0!==n?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=lt(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[t6.NEXT]:{target:t}}},e.statemachine.initial=io}return e}getAdMachineConfig(){let e=this.getAdExperience();return I(c({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>I(c({},t),{id:e}))):[]}constructor(e=b(),t=eo(),n=L(),i=en(),r=aG()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i,this.htmlDecoderService=r}},li=(e=new ln,t=ss())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r,a;let o=e.name,s=null===(i=e.scene)||void 0===i?void 0:i.getId(),l=null===(r=n.states[t].on)||void 0===r?void 0:r[o],d={actions:Array.from(new Set([...Array.from(null!==(a=null==l?void 0:l.actions)&&void 0!==a?a:[]),...e.actions.map((e=>e.name))])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};s&&(d.target=s),n.states[t].on[o]=c({},null!=l?l:{},d)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),I(c({},n),{context:c({},s8(),n.context)})},lr=()=>eo(),la=((hv=la||{}).SCENE_BUILDER_COMPLETE="SCENE_BUILDER_COMPLETE",hv),lo=(e,t,n={})=>{let i=[],r=new Set,a=new Set,o=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(s){var l,c,d;let u,E;if(a.has(s))return;a.add(s);let _=o[s],v=_?_.getSceneType():t7.closed,h=!!_&&_.isAlternative();u=1===a.size?"start":v===t7.closed?"end":"intermediate";let S=[];h&&S.push("Alternate"),S.push((E=n[v]||v)?E.charAt(0).toUpperCase()+E.slice(1):E),i.some((e=>e.id===s))||i.push({id:s,label:S.join(" "),type:u,alternative:h,connections:[]});let T=(null===(l=e.states[s])||void 0===l?void 0:l.on)||{},p=null;if("LAST_CHANCE_ENDCARD"in T){p=`${s}_last_chance`,i.some((e=>e.id===p))||i.push({id:p,label:"Last Chance Endcard",alternative:h,type:"intermediate",connections:[]});let e=`${s}->${p}`;r.has(e)||(r.add(e),null===(d=i.find((e=>e.id===s)))||void 0===d||null===(c=d.connections)||void 0===c||c.push(p))}Object.keys(T).forEach((e=>{let n=T[e];if(null==n?void 0:n.target){let e=n.target,l=s;p&&(l=p);let c=`${l}->${e}`;var a,o;if(!r.has(c))r.add(c),null===(o=i.find((e=>e.id===l)))||void 0===o||null===(a=o.connections)||void 0===a||a.push(e),t(e)}}))}(e.initial),{nodes:i.map((e=>{var t;let n=null===(t=e.connections)||void 0===t?void 0:t.filter((t=>{var n;return t!==t7.closed||!(null===(n=e.connections)||void 0===n?void 0:n.some((e=>e!==t7.closed)))}));return I(c({},e),{connections:n})}))}},ls=(e=b(),t=lr())=>{let n;n=e.has(w.AD_EXPERIENCE)?li():s9();let i={actions:c({},s6())};return e.has(w.IS_RUNNING_INSIDE_EMBED)&&t.emit({type:"scene-builder-event",event:la.SCENE_BUILDER_COMPLETE,data:lo(n,ss(),{endcard:"Playable"})}),[n,i]};const ll=(e=t0())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=ls();return e.createMachine(n,i)};var lc=(e=t0())=>e.interpret(ll(e)),ld=function(e,t,n=t0()){let i=tu((()=>n.createMachine(e,t)),[e]),r=tY(i.initialState),[a,o]=tu((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return tc((()=>(a.status!==d.Running&&a.start(),()=>{o.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]},lu=((h_={}).CALL="CALL",h_.DONE="DONE",h_),lE=((hh={}).IDLE="IDLE",hh.BUSY="BUSY",hh);const lv=e=>({id:`throttle-${e}`,initial:lE.IDLE,context:{},states:{IDLE:{on:{[lu.CALL]:{target:lE.BUSY}}},BUSY:{on:{[lu.DONE]:{target:lE.IDLE}}}}});var l_=()=>{let e=r.getInstance(),t=od.getServiceIdentifier();return e.get(t)};const lh={[t7.video]:G.VIDEO_SCENE_START,[t7.endcard]:G.ENDCARD_SCENE_START};var lS=e=>{let t=e.getSceneType();return t&&t in lh?[lh[t]]:[]},lT=(e,t=or(),n=ss)=>{if(e.getSceneType()===t7.closed)return;let i=c({name:K.SCENE_START,scene_id:e.getId(),scene_type:e.getSceneType(),scene_index:n().indexOf(e)},e.getObservabilityData()),r=[i,...lS(e).map((e=>I(c({},i),{metric:e})))];t.emit(r)},lp=()=>{let e=lc(),t=e.send,n=tY(e.state),i=ld(lv("ad")),[r,a]=i,o=tu((()=>e=>{[t6.NEXT,t6.LAST_CHANCE_ENDCARD,t6.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?r.value.matches(lE.IDLE)&&(a({type:lu.CALL}),t(e),window.setTimeout((()=>{a({type:lu.DONE})}),500)):t(e)}),[i]);return tc((()=>{let t=e.subscribe((e=>{let t=n.value;if(n.value=e,e.changed&&t.value!==e.value){let n=sX(t),i=l_();i.end(n);let r=sX(e);er.setValue({scene:r}),i.start(r),lT(r)}}));return()=>{t.unsubscribe()}}),[e]),[n,o]},lg=()=>(tc((()=>{no().getNewTimer(500,(()=>{nD()})).start()}),[]),si("div",{id:"app-store-transition-fallback",className:"wnLcbW_fallback",children:si("button",{title:"Close","aria-label":"Close",id:iq,type:"button",onClick:()=>{nD()},className:"closeIcon",children:si("div",{className:"closeIcon"})})})),lC=class extends ej{componentDidCatch(e,t){eo().emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},lI=class{getConsentTitleText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentTitleText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentTitleText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentBodyText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentBodyText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentAcceptButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentAcceptButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentDenyButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentDenyButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I do not consent"}consentAction(e){var t;null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||t.consentAction(e)}constructor(e=L()){this.mraidService=e}},lA=({sendAdEvent:e=()=>{}})=>{let t=new lI,n=n=>{t.consentAction(n),e({type:t6.NEXT})};return si("div",{className:"C4yOdG_gdpr",id:"gdpr",children:[si("div",{className:"C4yOdG_content",children:[si("header",{className:"C4yOdG_header",children:[si("span",{className:"C4yOdG_icon"}),si("h3",{id:"gdpr-title",className:"C4yOdG_title",children:t.getConsentTitleText()})]}),si("p",{id:"gdpr-body-text",className:"C4yOdG_bodyText",children:t.getConsentBodyText()})]}),si("div",{className:"C4yOdG_buttons",children:[si("button",{type:"button",id:"gdpr-accept",className:"C4yOdG_primaryButton",onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),si("button",{type:"button",id:"gdpr-deny",className:"C4yOdG_secondaryButton",onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})};const lO=e=>4===e.length?e:lO(`0${e}`),lm=e=>e.split("").map((e=>lO(parseInt(e,16).toString(2)))).join("").split("");var lf=class{constructor(e=b()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(w.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return lm(e)}}};hX="_0zGmtq_bit",hz="_0zGmtq_one";const lN=(e,t)=>`bit-${e}-${t}`;var lD=()=>{let e=new lf;return en().isFullscreen()?si("div",{className:"_0zGmtq_watermark",id:"watermark",children:[si("div",{className:`${hz}  _0zGmtq_leading ${hX}`}),e.getBits().map(((e,t)=>si("div",{className:`${hX} ${"0"===e?"_0zGmtq_zero":hz}`,id:lN(e,t)},lN(e,t))))]}):null};const lR={[V.ACCELERATE]:"#96633d",[V.EDSP]:"#853d96",[V.UNKNOWN]:"#333"};var ly=({handleClick:e,adSource:t})=>si("button",{type:"button",id:i5,title:"Liftoff Privacy",className:"m2_mMq_privacyButton",onClick:e,"aria-label":"Liftoff Privacy",children:si("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[si("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:lR[null!=t?t:V.UNKNOWN],opacity:".6",strokeWidth:"0"}),si("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),si("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),si("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),si("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})}),lL=((hS={})[hS.LEFT=0]="LEFT",hS[hS.RIGHT=1]="RIGHT",hS[hS.UP=2]="UP",hS[hS.DOWN=3]="DOWN",hS),lP=((hT=lP||{})[hT.HORIZONTAL=0]="HORIZONTAL",hT[hT.VERTICAL=1]="VERTICAL",hT);const lb=tR(0),lw=tR(0),lV=tR(!1),lM=tR(0);var lk=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=td(null),o=(e,t)=>Math.abs(e)>Math.abs(t),s=(e,t)=>o(e,t)?+(e>0):t>0?3:2,l=(e,t)=>o(e,t)?Math.abs(e):Math.abs(t),c=(e,t)=>{let n=e-lb.value,i=t-lw.value;return{Direction:s(n,i),Orientation:+!o(n,i),Distance:l(n,i),DeltaX:n,DeltaY:i}};return si("div",{ref:a,title:"swipe",onTouchStart:e=>{lV.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),lb.value=t,lw.value=n,lM.value=Date.now()},onTouchEnd:e=>{var o;let s=null==a||null===(o=a.current)||void 0===o?void 0:o.childNodes;if(!lV||!s)return;let{endX:l,endY:d}=(e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!==(i=null===(t=e.detail)||void 0===t?void 0:t.clientX)&&void 0!==i?i:0,endY:null!==(r=null===(n=e.detail)||void 0===n?void 0:n.clientY)&&void 0!==r?r:0}})(e),u=c(l,d),E=s[0];if(((e,t)=>e.Distance>=.05*t)(u,0===u.Orientation?E.clientWidth:E.clientHeight)){switch(u.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}lV.value=!1}},children:e})},lU=(...e)=>e.filter(Boolean).join(" "),lB=(e,t,n=eo())=>(tc((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)}),lH=((hp={})[hp.LOVE=1]="LOVE",hp[hp.BROKEN=2]="BROKEN",hp[hp.OFFENSIVE=3]="OFFENSIVE",hp),lW=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!==(e=this.tokenService.get(w.CREATIVE_ID))&&void 0!==e?e:""}getEventId(){var e;return null!==(e=this.tokenService.get(w.SESSION_ID))&&void 0!==e?e:""}getVersions(){var e;return`SDK ${this.environmentService.getSdkVersion().toString()}, VM ${null!==(e=window.appVersion)&&void 0!==e?e:"0.0.0"}, OS ${this.environmentService.getOsVersion().toString()}`}handleDrawerClose(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout((()=>{e({type:t6.OPEN_PRIVACY_PAGE})}),50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=b(),t=en(),n=et(),i=or()){this.tokenService=e,this.placementTypeService=t,this.environmentService=n,this.observabilityReportingService=i,this.handleFeedbackSubmit=e=>{let t={1:G.AD_FEEDBACK_LOVE,2:G.AD_FEEDBACK_BROKEN,3:G.AD_FEEDBACK_OFFENSIVE};this.observabilityReportingService.emit(K.AD_FEEDBACK,t[e])}}};h$="_0LRN8a_title";const lx=[{type:lH.LOVE,text:"Love it",emoji:""},{type:lH.BROKEN,text:"Broken",emoji:""},{type:lH.OFFENSIVE,text:"Offensive",emoji:""}];var lF=({handleFeedbackSubmit:e})=>{let t=tY(null),n=n=>{t.value=n,e(t.value)};return si("div",{className:"_0LRN8a_container",children:t.value?si("div",{className:"_0LRN8a_completeContainer",children:[si("div",{className:lU(h$,"_0LRN8a_thanks"),children:"Thank you"}),si("span",{className:"_0LRN8a_complete"})]}):si("div",{className:"_0LRN8a_popup",children:[si("div",{className:lU(h$,"_0LRN8a_question"),children:"What do you think of this ad?"}),si("div",{className:"_0LRN8a_options",children:lx.map((e=>si("button",{type:"button",className:"_0LRN8a_option",onClick:()=>n(e.type),children:[si("span",{className:"_0LRN8a_optionText",children:e.text}),si("span",{className:"_0LRN8a_emoji",children:e.emoji})]},e.type)))})]})})},lK=({label:e,value:t,id:n})=>{let i=tY(!1);return si("div",{className:"rM5gmW_adInfoRow",id:n,children:[si("div",{className:"rM5gmW_adInfoLabel",children:e}),si("button",{type:"button",className:lU("rM5gmW_adInfoValue",i.value?"rM5gmW_expanded":""),onClick:()=>{i.value=!i.value},children:t})]})},lG=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,versions:a,handleFeedbackSubmit:o,allowDebug:s=!1})=>{let l=tY([]);return lB("debug",((e,t)=>{var n;s&&(null===(n=t.data)||void 0===n?void 0:n.message)&&(l.value=[...l.value,t.data.message])})),si("div",{className:lU("FbTWOG_popupContainer",e?"FbTWOG_popupContainerDisplay":""),id:i3,children:[si("div",{className:e?"FbTWOG_mask":"FbTWOG_displayNone",id:"privacy-popup-mask",onClick:n,role:"none"}),si(lk,{onSwipeDown:n,children:si("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:lU("FbTWOG_privacyPopup",e?"FbTWOG_show":"FbTWOG_hide"),children:[si("div",{className:"FbTWOG_popupHeader",children:si("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:si("span",{className:"closeIcon privacy"})})}),si("div",{className:"FbTWOG_popupBody",children:si(lF,{handleFeedbackSubmit:o})}),si("div",{className:"FbTWOG_privacyPolicy",children:si("button",{type:"button",className:"FbTWOG_readMore","aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy"})}),si("div",{className:"FbTWOG_popupFooter",children:[si("div",{className:"FbTWOG_adInfoTitle",children:"Ad Info"}),si(lK,{label:"Creative ID:",value:i,id:"privacy-drawer-creative-id"}),si(lK,{label:"Event ID:",value:r,id:"privacy-drawer-event-id"}),si(lK,{label:"Versions:",value:a,id:"privacy-drawer-versions"}),l.value.length>0&&si("div",{className:"FbTWOG_debug",children:[si("h3",{children:"Debug Messages"}),si("div",{className:"debug-container",children:l.value.map((e=>si("div",{className:"debug-message",children:e},e)))})]})]})]})})]})},lY=((hg=lY||{}).CLOSE="vungle.events.request.close",hg),lj=()=>eo();const lX=tR(!1);var lz=({sendAdEvent:e,privacyService:t=new lW,customMraidEventReportingService:n=lj(),allowDebug:i=!1})=>{let r=()=>{lX.value=!1,t.handleDrawerClose(e)};return lB("custom-mraid",((e,t)=>{t.event===lY.CLOSE&&lX&&r()}),n),si(eY,{children:[si(ly,{handleClick:()=>{t.handleIconClick(e),lX.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&si(lG,{isOpen:lX.value,closeHandler:r,handleReadMoreClick:()=>{lX.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),versions:t.getVersions(),handleFeedbackSubmit:t.handleFeedbackSubmit,allowDebug:i})]})},l$=function(e,t){let n=td(0),i=td(0);return tc((()=>{let r=r=>{let a=Date.now();a-i.current>800&&(n.current=0),n.current+=1,i.current=a;let{clientX:o,clientY:s}=r;n.current>=3&&(e(o,s,t),n.current=0)};return window.addEventListener("pointerdown",r),()=>window.removeEventListener("pointerdown",r)}),[e,t]),null},lZ=(e,t=ni())=>{let n=tY(e),i=td(void 0),r=()=>{var e;null==i||null===(e=i.current)||void 0===e||e.destroy(),i.current=void 0};return tc((()=>{var e;void 0===i.current&&(i.current=t.getNewInterval(1e3,(()=>{let e=n.value-1;n.value=e<=0?0:e})),null===(e=i.current)||void 0===e||e.start());return()=>r()}),[]),tQ((()=>{0===n.value&&r()})),lB("scene-event",((e,t)=>{t.event===iB.FORCE_COMPLETE_COUNT_DOWN&&(n.value=0)})),n},lq=({delay:e,handleCountdownUpdate:t,isVisible:n=!0,children:i})=>{let r=lZ(e);if(tc((()=>{t&&t(r.value)}),[r.value]),r.value>0&&!n)return si("div",{id:iQ,className:"NQnIja_countdownInvisible"});if(r.value>0&&n){let e=Math.round(r.value);return 0===e?null:si("div",{id:iQ,className:"NQnIja_countdown",children:e})}return si("div",{children:i})};const lQ=[P.MREC,P.BANNER,P.IN_LINE];var lJ=class{placementSupportsNextButton(){return!lQ.includes(this.placementTypeService.getPlacementType())}constructor(e=en(),t=i7(),n=ea()){this.placementTypeService=e,this.sceneEventReportingService=t,this.scene=n,this.handleCountdownUpdate=e=>{this.sceneEventReportingService.emit({type:"scene-event",event:iB.NEXT_BUTTON_COUNTDOWN_TICK,data:{scene_id:this.scene.getId(),scene_type:this.scene.getSceneType(),delay:e}})}}},l0=(e=ii())=>e.getActivityEvents().some((e=>e.activity.name===n7.CLICK_URL||e.activity.name===n7.POSTROLL_CLICK)),l1=class{getButtonPadding(e=0,t=10){return l0()?t:Math.min(Math.max(parseInt(this.tokenService.get(w.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=b()){this.tokenService=e}},l2=({sendEvent:e=()=>{},type:t=nK.CLOSE,service:n=new l1,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===nK.SKIP?"mqB7Ka_skipIcon":"closeIcon",o=t===nK.SKIP?"Skip button":"Close button",s=tY(n.getButtonPadding());tc((()=>{e&&e({type:t6.CLOSE_BUTTON_WILL_SHOW})}),[]),lB("tpat",(()=>{s.value=n.getButtonPadding()}));let l=-s.value;return si("button",{title:o,"aria-label":o,id:iq,type:"button",style:{padding:`${s.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:t6.CLOSE_BUTTON_CLICK}),r(),e(i?{type:t6.LAST_CHANCE_ENDCARD}:{type:t6.NEXT})},children:si("div",{className:a})})};const l3=tR(!0);var l5=({sendAdEvent:e,showLastChanceEndcard:t=!1,config:n,beforeClick:i=()=>{}})=>{let{delay:r=0,countdown:a=!0}=n,o=new lJ,s=r>0;return lB("viewability",((e,t)=>{l3.value=t.event===el.MAXIMIZED})),o.placementSupportsNextButton()?si("div",{id:t?iJ:i2,className:"LJWyoG_nextButton",role:"button",tabIndex:0,"data-countdown-running":l3.value,children:s?si(lq,{delay:r,isVisible:a,handleCountdownUpdate:o.handleCountdownUpdate,children:si(l2,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):si(l2,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):null},l4=(e,t)=>{tc((()=>{let n=window.setInterval((()=>{var i;(null===(i=e.current)||void 0===i?void 0:i.complete)&&(t({type:t6.PRIVACY_LOGO_SHOW}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[])},l6=class{clickHandler(e,t){this.reportingService.emit({type:"fsc",event:oI.FSC,data:{cta_url:t,scene_id:e}})}constructor(e=oO()){this.reportingService=e}};const l8=tR(!1),l7=(e,t)=>{l8.value=t.event===el.MINIMIZED},l9=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var ce=({config:e,ctaUrl:t,sceneId:n,service:i=new l6,reportingService:r=sh(),children:a})=>(tc((()=>(r.addEventHandler("viewability",l7),()=>{r.removeEventHandler("viewability",l7)})),[]),si(eY,{children:[e.enabled&&si("button",{className:lU("_7pzQ5q_overlayCta",l8.value?"_7pzQ5q_hidden":""),type:"button",id:l9(e.id),"aria-label":"fsc","aria-hidden":l8.value,onClick:()=>i.clickHandler(n,t)}),a]})),ct=e=>{let[t]=ld(oV(e),oM);return t},cn=((hC=cn||{}).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",hC.ENDCARD_CTA="ENDCARD_CTA",hC.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",hC.PERSISTENT_CTA="PERSISTENT_CTA",hC),ci=class{emitClickEvents(e){this.ctaReportingService.emit({type:"cta",event:cn.LAST_CHANCE_ENDCARD_CTA,data:{scene_id:e}})}constructor(e=eo()){this.ctaReportingService=e}};const cr=tR(!1);var ca=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i,sceneId:r})=>{var a,o,s,l,c,d,u,E;let _=new ci,v=td(null),h=ct(e.id);l4(v,t);let S=()=>{cr.value=!0,_.emitClickEvents(r)};return tc((()=>{i(e.enabled&&!h.value.matches(oP.HIDDEN))}),[e.enabled,h.value]),!e.enabled||h.value.matches(oP.HIDDEN)?null:si("div",{className:lU("poFP6W_overlay",null!=(null===(a=e.appMeta)||void 0===a?void 0:a.icon)?"poFP6W_opaque":""),id:"last-chance-endcard-overlay",children:si(ce,{config:{enabled:!!(null===(o=e.fsc)||void 0===o?void 0:o.enabled)},sceneId:r,children:[si(l5,{sendAdEvent:t,config:null!==(E=e.close)&&void 0!==E?E:{},showLastChanceEndcard:!1}),si("div",{className:lU("poFP6W_lastChanceEndCard",n?"poFP6W_backgroundNone":""),id:"last-chance-endcard",children:[(null===(s=e.appMeta)||void 0===s?void 0:s.icon)&&si("img",{className:"poFP6W_icon",ref:v,src:null===(l=e.appMeta)||void 0===l?void 0:l.icon,alt:null===(c=e.appMeta)||void 0===c?void 0:c.name,id:"last-chance-endcard-app-icon",onClick:S,"aria-hidden":"true"}),si("p",{className:"poFP6W_name",id:"last-chance-endcard-app-name",onClick:S,"aria-hidden":"true",children:null===(d=e.appMeta)||void 0===d?void 0:d.name}),si("button",{type:"button",className:lU("poFP6W_button",cr.value?"":"poFP6W_animate"),"data-animate":!cr.value,onClick:S,id:i0,children:null===(u=e.cta)||void 0===u?void 0:u.text})]})]})})},co=(e,t=!0)=>{tc((()=>t?(e&&e({type:t6.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:t6.CLOSE_BUTTON_UNMOUNT})}):()=>{}),[t])},cs=((hI=cs||{}).APP_META_UPDATE="APP_META_UPDATE",hI),cl=()=>eo(),cc=(e,t=!0,n=cl())=>{tc((()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:cs.APP_META_UPDATE,data:null!==(i=e.getCallToActionConfig().appMeta)&&void 0!==i?i:{enabled:!1}})}),[t])};const cd=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null===(n=e.nodeValue)||void 0===n?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?si(t,{sceneId:a["scene-id"]||""}):eK(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)};var cu=({htmlString:e,VmComponent:t})=>{let[n,i]=(e7=1,tl(tT,null));return tc((()=>{i(cd(e,t))}),[e]),n},cE=(e=es())=>{let t=i7(e);return{duration:iH(iU(t,iB.SCENE_START),iU(t,iB.SCENE_END))}},cv=class extends n2{getTransitions(){let e=super.getTransitions();return e.push(n3,n5,n4,nZ,nq,nQ,nJ),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return this.htmlDecoderService.decode(this.html,!1)}getSceneType(){return this.sceneType}addScenes(e){this.scenes.push(...e)}getScenes(){return this.scenes}getSceneById(e){return this.scenes.find((t=>t.getId()===e))}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return I(c({},e),{style:this.isLastPage()?nK.CLOSE:e.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:cE()}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfigProvider:i,lastChanceEndcardConfig:r,placementTypeService:a=en(),htmlDecoderService:o=aG(),eventStreams:s}){super({isFullscreen:null==a?void 0:a.isFullscreen()}),this.scenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfigProvider=i,this.lastChanceEndcardConfig=r,this.placementTypeService=a,this.htmlDecoderService=o,this.sceneType=t7.composite,this.eventStreams=s}},c_=(e,t=ea)=>tu((()=>{let n=t();return n instanceof cv&&n.getSceneType()===t7.composite&&n.getScenes().find((t=>t.getId()===e))||null}),[e]),ch=(e=lc)=>tu((()=>e().send),[]),cS=((hA={}).SHOW="ASOD_SHOW",hA.CLOSE="ASOD_CLOSE",hA),cT=((hO={}).INITIAL="ASOD_INITIAL",hO.SHOWN="ASOD_SHOWN",hO),cp=((hm={}).SET_DELAY="ASOD_SET_DELAY",hm.OPEN_APP_STORE="ASOD_OPEN_APP_STORE",hm);const cg=e=>({id:`app-store-on-delay-${e}`,initial:cT.INITIAL,context:{delay:0},states:{[cT.INITIAL]:{on:{[cS.SHOW]:{target:cT.SHOWN,actions:[cp.SET_DELAY]}}},[cT.SHOWN]:{entry:[cp.OPEN_APP_STORE]}}}),cC={actions:{[cp.SET_DELAY]:g({delay:(e,t)=>t.delay}),[cp.OPEN_APP_STORE]:e=>{let t=s3();null==t||t.openStoreViewWithDelay(e.delay)}}};var cI=(e,t,n=!0,i=!0)=>{let[,r]=ld(cg(e),cC);tc((()=>t.enabled&&n&&i?(r({type:cS.SHOW,delay:t.autoShowDelay}),()=>{let e=s3();null==e||e.reset()}):()=>{}),[n,i])},cA=(e,t=!0,n=sJ(),i=nI())=>{let r=tY(null==i?void 0:i.canOpen()),a=tY(!1);tc((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),tc((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),tc((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},cO=(e=b())=>{var t;return null!==(t=e.get(w.CTA_BUTTON_URL))&&void 0!==t?t:""},cm=class extends a{openCTAWithMraid(){var e;this.url&&(null===(e=this.mraidService.getMraid())||void 0===e||e.open(this.url))}openOverlayView(){var e;null===(e=this.storeKitOverlayService)||void 0===e||e.open()}openProductView(){var e;null===(e=this.productViewService)||void 0===e||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null===(e=this.productViewService)||void 0===e?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&sW(t)}handleProductViewCTA(){var e,t;null!==(e=this.productViewService)&&void 0!==e&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null===(t=this.productViewService)||void 0===t?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r}=e;if((void 0===e.fireMMPEvents||e.fireMMPEvents)&&this.injectedFireMMPEvents(),this.url=n||this.ctaButtonUrl,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===H.iOS)switch(t){case t9.OFF:this.openCTAWithMraid();break;case t9.SKO:this.handleOverlayViewCTA();break;case t9.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=L(),t=et(),n=nP(),i=nI(),r=nU(),a=il(),o=cO(),s=ir){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.ctaButtonUrl=o,this.injectedFireMMPEvents=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},cf=()=>{let e=r.getInstance(),t=cm.getServiceIdentifier();return e.get(t)},cN=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=cf(),injectedEmitTrackingEvent:a=sj,sceneEventReportingService:o=i7()})=>lB("fsc",((s,l)=>{var c;(null===(c=l.data)||void 0===c?void 0:c.scene_id)===n&&(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(ne.CLICK_THROUGH,n,e),o.emit(iB.CLICK))})),cD=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=cf(),injectedEmitTrackingEvent:a=sj,sceneEventReportingService:o=i7()})=>lB("cta",((s,l)=>{var c,d,u;if((null===(c=l.data)||void 0===c?void 0:c.scene_id)===n&&e){let{target:s,url:c}=e,E=l.event===cn.ENDCARD_CTA;r.invoke({target:s,url:null!==(u=null===(d=l.data)||void 0===d?void 0:d.cta_url)&&void 0!==u?u:c,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:E}),a(ne.CLICK_THROUGH,n,t),o.emit(iB.CLICK)}})),cR=(e=document.documentElement)=>"ontouchstart"in e?"touchstart":"click",cy=(e,t,n=!0,i=ra,r=i7)=>{tc((()=>{if(!n||t)return()=>{};let e=e=>{i(e,r)};return document.body.addEventListener(cR(),e,!0),()=>{document.body.removeEventListener(cR(),e,!0)}}),[e,n])};const cL=tR(!1);var cP=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,useBackgroundImage:r=!1})=>{let a=td(null);cI(e.getId(),e.getAppStoreOnDelayConfig()),cA(e.getStoreKitOverlayAutoShowConfig()),l4(a,t),co(t),sY(),cc(e),cN({fullScreenClickConfig:cL.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),cD({callToActionConfig:cL.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),tc((()=>{t({type:t6.CREATIVE_VIEW})}),[]),cy(e.getId(),e.isChild());let o=e.getId();return si(eY,{children:[si(ca,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{cL.value=e},sceneId:o}),si("div",{className:null!=i?i:"J2DrKG_staticImageEndcard",style:r?{backgroundImage:`url(${e.url})`}:{},children:si(ce,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,sceneId:o,children:[n&&!cL.value&&si(l5,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),si("img",{src:e.url,ref:a,alt:"image",id:o})]})})]})},cb=((hf={}).Native="native",hf.Custom="custom",hf.NotSupported="not-supported",hf),cw=((hN={}).Manifest="manifest",hN.Video="video",hN),cV=(e=er)=>{let t=e.getValue().scene;return a9(t)?ei({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class cM extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){let i=new a3;this.hasCachedManifest(t,i)?this.loadFromString(i.getCachedManifest(),e,t):this.hasCachedLevel(t,i)?this.loadFromString(i.getCachedFirstTrack(),e,t):super.openAndSendXhr(e,t,n)}load(e,t,n,i=er,r=cV,a=rT()){let{onSuccess:o}=n;super.load(e,t,I(c({},n),{onSuccess:(e,t,n,s)=>{var l,c;o(e,t,n,s);let d=null===(l=n.levelDetails)||void 0===l?void 0:l.startSN;"level"===n.type&&void 0!==d&&(a.emit({type:"video",event:rv.HLS_LEVEL_PLAYLIST_LOADED,data:{starting_sequence_number:d}}),null===(c=r(i))||void 0===c||c.setValue({startSn:d}))}}))}hasCachedLevel(e,t=new a3){return"level"===e.type&&0===e.id&&t.hasCachedFirstTrack()}hasCachedManifest(e,t=new a3){return"manifest"===e.type&&t.hasCachedManifest()}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null===(e=this.callbacks)||void 0===e||e.onSuccess(i,this.stats,n,t)}))}}var ck=()=>r.getInstance().get(oS.getServiceIdentifier());class cU extends window.Hls.DefaultConfig.loader{getLocalFileURL(e,t=cV,n=er){var i,r;let a=new a3,o=Number(e.sn),s=null!==(r=null===(i=t(n))||void 0===i?void 0:i.getValue().startSn)&&void 0!==r?r:1;return a.getCachedVideoSegmentUrls()[o-s]}shouldLoadFromFileURL(e){if("main"!==e.type||"initSegment"===e.sn)return!1;let t=this.getLocalFileURL(e);return(null==t?void 0:t.length)>0&&a1(t)}async load(e,t,n){if(this.shouldLoadFromFileURL(e.frag))e.url=this.getLocalFileURL(e.frag),super.load(e,t,n);else{let i=ck(),r=await i.get(e.url);r?(this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):super.load(e,t,n)}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(e&&t&&!n.aborted){if(4!==t.readyState)return void super.readystatechange();if(this.shouldLoadFromFileURL(this.context.frag)){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else{var i;if((null===(i=t.response)||void 0===i?void 0:i.byteLength)>=0&&!this.loadedFromCache){let n=ck();null==n||n.addRecord({url:e.url,data:new Uint8Array(t.response)})}super.readystatechange()}}}}var cB=e=>"data:application/x-mpegurl;base64,"+btoa(e),cH=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=i+4,a=n[e].charAt(r);for(let t=i+5;t<n[e].length&&r===i+4;t+=1)n[e].charAt(t)===a&&(r=t);let o=n[e].substring(i+5,r);if(!o.toLowerCase().startsWith("http")){let a=t.split("/");a.pop(),a.push(o),n[e]=n[e].substring(0,i+5)+a.join("/")+n[e].substring(r)}}return n.join("\n")},cW=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXT-X-STREAM-INF"))if(i){if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t;return r.join("\n")},cx=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},cF=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")){if(n[e+1].toLowerCase().startsWith("http"))return n[e+1];let i=t.split("/");return i.pop(),i.push(n[e+1]),i.join("/")}},cK=class{getStreamPlayer(e){if(null===e)return cb.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==H.iOS||t.isGreaterThanOrEqualTo(new U("7")))return cb.Custom}return""!==e.canPlayType(this.hlsMediaType)?cb.Native:cb.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:cM,fLoader:cU,debug:!1});this.addEventListeners(n),n.loadSource(e),n.attachMedia(t)}async getHlsManifest(e){if(!this.streamPunkService.hasCachedStreamChunks()&&!this.streamPunkService.hasCachedFirstTrack())return this.streamPunkService.hasCachedManifest()?cB(cx(this.streamPunkService.getCachedManifest(),e)):e;try{let t;if(this.streamPunkService.hasCachedManifest())t=this.streamPunkService.getCachedManifest();else{let n=await this.getManifest(e);if(void 0===n)return e;t=await n.text()}let n=cF(t,e);if(!n){let n=this.updateStream(t,e);return cB(n)}try{let i;if(this.streamPunkService.hasCachedFirstTrack())i=this.streamPunkService.getCachedFirstTrack();else{let t=await this.getVideo(n);if(void 0===t)return e;i=await t.text()}let r=this.updateStream(i,n),a=cB(r),o=cW(t,a,n),s=cH(o,e);return cB(s)}catch(t){return this.handleStreamError(t,n,cw.Video),e}}catch(t){return this.handleStreamError(t,e,cw.Manifest),e}}insertCachedVideoSegments(e,t){let n=this.streamPunkService.getCachedVideoSegmentUrls().reverse(),i=t.split("/");i.pop();let r=e.split("\n");for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXTINF"))if(n.length>0)r[e+1]=n.pop();else if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=i.concat(t).join("/")}return r.join("\n")}updateStream(e,t){return cH(this.insertCachedVideoSegments(e,t),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null===(i=e.message)||void 0===i?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);if(n.ok||0===n.status)return n;this.errorLoggingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}})}getManifest(e){return this.getStream(e,cw.Manifest)}getVideo(e){return this.getStream(e,cw.Video)}getBandwidthEstimate(e,t,n){if(Number.isFinite(e)&&!(e<=0)&&!(e>419430400)&&!(t<50)&&!Number.isNaN(n))return Math.round(n/8/1024)}addEventListeners(e){e.on(window.Hls.Events.FRAG_LOADED,((t,n)=>{if("main"===n.frag.type){let t=n.frag.stats.bwEstimate,i=n.frag.stats.loading.end-n.frag.stats.loading.start,r=e.bandwidthEstimate,a=this.getBandwidthEstimate(t,i,r);a&&this.videoReportingService.emit({type:"video",event:rv.BANDWIDTH_ESTIMATION,data:{scene_id:this.scene.getId(),bwe:a}})}})),e.on(window.Hls.Events.LEVEL_SWITCHED,((t,n)=>{this.videoReportingService.emit({type:"video",event:rv.HLS_LEVEL_SWITCHED,data:{scene_id:this.scene.getId(),level:n.level,bitrate:e.levels[n.level].bitrate}})})),e.on(window.Hls.Events.ERROR,((t,n)=>{if(n.fatal)switch(n.type){case window.Hls.ErrorTypes.MEDIA_ERROR:n.details===window.Hls.ErrorDetails.BUFFER_STALLED_ERROR&&this.videoReportingService.emit({type:"video",event:rv.HLS_VIDEO_STALLED,data:{scene_id:this.scene.getId(),level:e.currentLevel,bitrate:e.levels[e.currentLevel].bitrate}}),this.errorLoggingService.emit({type:"error-logging",event:i_.RESOURCE,data:{error:Error(`HLS media error: ${n.details}`)}}),e.recoverMediaError();break;case window.Hls.ErrorTypes.NETWORK_ERROR:this.errorLoggingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:Error(`HLS network error: ${n.details}`)}});break;default:e.destroy()}}))}constructor(e,t=et(),n=iS(),i=rT(),r=new a3(e)){this.scene=e,this.environmentService=t,this.errorLoggingService=n,this.videoReportingService=i,this.streamPunkService=r,this.hlsMediaType="application/vnd.apple.mpegurl"}},cG=class{monitorVideoHealth(e,t,n){var i;n&&(null!=(null===(i=this.videoMonitorTimer)||void 0===i?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{!e.value.matches(og.AUTO_PLAY_FAIL)&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(Q))})),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new cK(this.scene,this.environmentService,this.errorLoggingService,this.videoReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case cb.Custom:i.loadHls(t,e);break;case cb.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit(K.HLS_NOT_SUPPORTED,G.HLS_NOT_SUPPORTED),n({type:t6.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e,t=no(),n=et(),i=iS(),r=or(),a=sN(),o=rT()){this.scene=e,this.timerService=t,this.environmentService=n,this.errorLoggingService=i,this.observabilityReportingService=r,this.muteService=a,this.videoReportingService=o}},cY=(e=b(),t=en())=>t.isRewarded()&&e.has(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(w.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(w.CLOSE_BUTTON_DELAY_SECONDS)):0,cj=(e,t=en(),n=cY())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e),cX=class extends sV{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null===(e=this.adSession)||void 0===e||e.setCreativeType(sM.VIDEO),null===(t=this.adSession)||void 0===t||t.setImpressionType(sk.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){eo().emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!cj(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null===(t=this.adEvents)||void 0===t||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===sU.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if(e.type===sU.SESSION_FINISH){let e=eo();e.emit({type:"video",event:sb.REMOVE_HANDLER}),e.emit({type:"cta",event:sb.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null===(i=this.mediaEvents)||void 0===i||i.bufferFinish());let r=rS(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=+!n,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume=+("mute"!==e),null===(t=this.mediaEvents)||void 0===t||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null===(n=this.mediaEvents)||void 0===n||n.pause());null===(t=this.mediaEvents)||void 0===t||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null===(t=this.mediaEvents)||void 0===t||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null===(e=this.mediaEvents)||void 0===e||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const cz=()=>b().has(w.OM_SDK_DATA)&&sP();var c$=e=>{if(cz()){var t;let n=null!==(t=b().get(w.OM_SDK_DATA))&&void 0!==t?t:"";r.getInstance().bind(cX.getServiceIdentifier(),new cX(e,n))}},cZ=((hD={}).SHOWING="SHOWING",hD.HIDDEN="HIDDEN",hD),cq=((hR={}).SHOW="SHOW",hR.HIDE="HIDE",hR.CLOSE="CLOSE",hR),cQ=((hy={}).PAUSE_VIDEO="pauseVideo",hy.PLAY_VIDEO="playVideo",hy.FORFEIT_REWARD="forfeitReward",hy);const cJ="incentivized-dialog",c0=()=>({id:cJ,initial:cZ.HIDDEN,context:{},states:{[cZ.HIDDEN]:{on:{[cq.SHOW]:{target:cZ.SHOWING,actions:[cQ.PAUSE_VIDEO,nr.PAUSE_INTERVALS,ns.STANDBY_TIMERS]}}},[cZ.SHOWING]:{on:{[cq.HIDE]:{target:cZ.HIDDEN,actions:[cQ.PLAY_VIDEO,nr.START_INTERVALS,ns.WAKE_TIMERS]},[cq.CLOSE]:{target:cZ.HIDDEN,actions:[cQ.FORFEIT_REWARD,nr.START_INTERVALS,ns.WAKE_TIMERS]}}}}}),c1={actions:c({},nl(),{pauseVideo:()=>{let e=oy();null==e||e.send({type:op.PAUSE})},playVideo:()=>{let e=oy();null==e||e.send({type:op.PLAY})},forfeitReward:()=>{eo().emit({type:"incentivized-event",event:im.FORFEIT_REWARD,fireOnlyOnce:!0}),or().emit(K.FORFEIT_REWARD)}},na())};var c2=e=>(null!=e?e:t0()).interpreterMap.get(cJ),c3=(e,t,n=ea(),i=oy(),r=lc(),a=c2())=>{if(!a9(n))return;let o=!1;r.state.context.isPrivacyDrawerOpen&&(o=!0),(null==a?void 0:a.state.value)===cZ.SHOWING&&(o=!0),t.event!==el.MAXIMIZED||o?t.event===el.MINIMIZED&&(null==i||i.send({type:op.MINIMIZE})):null==i||i.send({type:op.MAXIMIZE,hasHlsVideo:n.videoType===nn.HLS})},c5=(e=en())=>!e.isBanner();const c4={marginLeft:"0px",marginTop:"0px"},c6=tR(c4);var c8=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i})=>{let r=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=c({},c4),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:o}=null==e?void 0:e.parentElement,s=i/r;a/o>s?t.marginLeft=(a-o*s)/2+"px":t.marginTop=(o-a/s)/2+"px",c6.value=t};return tc((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}))),tc((()=>{r()}),[n,i]),n?si("button",{type:"button",className:t?"S2LOeW_muted":"S2LOeW_unmuted",id:iz,title:t?"Unmute":"Mute","aria-label":"Mute button",style:c6.value,onClick:()=>{e({type:t?t6.UNMUTE:t6.MUTE})},children:si("span",{className:"S2LOeW_icon",id:i$})}):null},c7=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r})=>n?si("div",{role:"progressbar",title:"Video progress",className:"OaF7uW_videoProgress","aria-label":"Video progress",children:si("span",{className:!r&&e>0?"":"OaF7uW_paused",style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null,c9=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r})=>{var a;let o=new cG(i),s=new cK(i),l=tu((()=>sh()),[]),{url:c}=i,d=td(null),u=td(null),E=td(null),_=tY(0),v=tY(c),h=o.getMutedSignal(),S=tY(""),T=t=>{e({type:t,eventTarget:d.current,url:v.value})},p=()=>{T(op.CAN_PLAY),t({type:t6.PRIVACY_LOGO_SHOW})},g=e=>{t({type:t6.VIDEO_ERROR,error:Error(e),videoUrl:v.value}),t({type:t6.VIDEO_FAILURE})},C=()=>{setTimeout((()=>{d.current&&(d.current.muted=h.value)}),100)},I=()=>{u.current=no().getNewTimer(1e4,(()=>{n.value.value!==og.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&g(q)})),u.current.start()};return tc((()=>{var r,a,o;switch(n.value.value){case og.PLAYING:null===(a=u.current)||void 0===a||null===(r=a.destroy)||void 0===r||r.call(a),(()=>{var t;let i=null===(t=d.current)||void 0===t?void 0:t.play();i?i.then(C).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:op.AUTO_PLAY_FAIL}):"aborterror"===n||g(J)})):window.setTimeout((()=>{var t;n.value.value===og.PLAYING&&0===(null===(t=document.getElementsByTagName("video")[0])||void 0===t?void 0:t.currentTime)&&e({type:op.AUTO_PLAY_FAIL})}),2500)})();break;case og.LOAD_FAIL_RETRY:(()=>{e({type:op.RETRY});let t=i.originalVideoUrl;t&&t!==v.value?v.value=t:g(Z)})();break;case og.PAUSED:null===(o=d.current)||void 0===o||o.pause();break;case og.ENDED:if(i.loopVideo)e({type:op.PLAY});else{let n=i.getLastChanceEndcardConfig().enabled;e({type:op.CLOSE}),t(n?{type:t6.LAST_CHANCE_ENDCARD}:{type:t6.COMPLETE})}}}),[n.value.value]),tQ((()=>{d.current&&v.value&&(c$(d.current),d.current.setAttribute("muted","true"),i.videoType===nn.PROGRESSIVE&&(e=>{d.current&&e&&(d.current.setAttribute("src",e),d.current.load(),i.canSkipToNextScene?I():o.monitorVideoHealth(n,g,d.current))})(v.value))})),tQ((()=>{let e=s.getStreamPlayer(d.current);if(v.value&&i.videoType===nn.HLS&&e!==cb.NotSupported){let t=async()=>{e===cb.Native?S.value=await s.getHlsManifest(v.value):S.value=v.value};i.canSkipToNextScene?I():o.monitorVideoHealth(n,g,d.current),t()}})),tQ((()=>{""!==S.value&&(null==d?void 0:d.current)&&o.startStreamingVideo(d.current,S.value,t)})),tQ((()=>{var e,t;d.current&&(null===(e=(t=n.value).matches)||void 0===e?void 0:e.call(t,og.PLAYING))&&!d.current.paused&&!d.current.ended&&(d.current.muted=h.value)})),tc((()=>(l.addEventHandler("viewability",c3),()=>{l.removeEventHandler("viewability",c3)})),[e,l]),tc((()=>{let e=t=>{d.current&&(d.current.readyState>2?p():no().getNewTimer(t,(()=>{e(t)})).start())};e(200)}),[]),si("div",{className:lU("ok_seq_videoPlayerWrap","videoPlayer"),ref:E,id:i.getId(),children:[si(c8,{sendAdEvent:t,isMuted:h.value,isVisible:n.value.context.canPlay&&c5(),videoPlayerHeight:null===(a=E.current)||void 0===a?void 0:a.clientHeight}),si("video",{title:"Video player",id:"video-player",ref:d,muted:!0,playsInline:!0,className:"ok_seq_videoPlayer",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{v.value===c?T(op.LOAD_FAIL):g(z)},onDurationChange:()=>{T(op.DURATION_CHANGE)},onWaiting:()=>{T(op.WAITING)},onSuspend:()=>{T(op.SUSPEND)},onCanPlay:p,onCanPlayThrough:()=>{rT().emit({type:"video",event:rv.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==og.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(_.value=i.currentTime,e({eventTarget:i,type:op.TIME_UPDATE}))},onEnded:()=>{_.value=0,e({type:op.END})},onSeeking:e=>{let t=e.target,n=t.currentTime-_.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=_.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),si(c7,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===og.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},de=(e,t=et())=>{var n;let i=t.getOperatingSystem();if(i===H.Android)return!!(null!==(n=null==e?void 0:e.filter)&&void 0!==n?n:null==e?void 0:e.webkitFilter);if(i===H.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1},dt=({isInLine:e=!1})=>{var t,n,i,r;let a=td(null),o=td(null),s=td(),l=td(),c=tY(!1),d=tY(window.document.body.clientWidth),u=tY(window.document.body.clientHeight),E=tY(0),_=tY(0),v=tY(0),h=tY(0),S=null===(t=oy())||void 0===t?void 0:t.state.context.videoElement,T=null===(n=oy())||void 0===n?void 0:n.state.context.canPlay,p=null===(i=oy())||void 0===i?void 0:i.state.context.videoWidth,g=null===(r=oy())||void 0===r?void 0:r.state.context.videoHeight,C=()=>{var e,t;a.current&&(d.value=null===(e=a.current)||void 0===e?void 0:e.clientWidth,u.value=null===(t=a.current)||void 0===t?void 0:t.clientHeight)},I=()=>{if(!S)return;let t=S.videoHeight>S.videoWidth;c.value=(e||t)&&!!S&&(!!e||S.videoWidth/S.videoHeight<d.value/u.value)&&de(s.current)},O=()=>{C(),(()=>{var e;null===(e=s.current)||void 0===e||e.clearRect(0,0,v.value,h.value)})(),I()};return tc((()=>{S&&(E.value=S.clientHeight,_.value=S.clientWidth),I()}),[null==S?void 0:S.clientHeight,null==S?void 0:S.clientWidth,s.current]),tc((()=>(T&&(window.addEventListener("resize",O),C(),(()=>{if(o.current&&d&&u&&p&&g&&u){var e;let t=p/d.value,n=g/u.value,i=p/g<d.value/u.value?t:n,r=Math.floor(Number(p/i)),a=Math.floor(Number(g/i));s.current=null===(e=o.current)||void 0===e?void 0:e.getContext("2d"),v.value=r,h.value=a}})(),l.current=ni().getNewInterval(60,(()=>{c.value&&s.current&&s.current.drawImage(S,0,0,v.value,h.value)})),l.current.start()),()=>{var e;window.removeEventListener("resize",O),null===(e=l.current)||void 0===e||e.destroy()})),[T]),si("div",{id:"video-blur",ref:a,className:"RypQCq_videoBlurWrap",children:si("canvas",{id:"video-blur-canvas",ref:o,width:v,height:h})})},dn=({isVisible:e,sendVideoEvent:t})=>e?si("div",{role:"none",className:"dDtiqq_tapToPlayMask",onClick:()=>{var e;null===(e=document.getElementsByTagName("video")[0])||void 0===e||e.play(),t({type:op.PLAY})},id:"tap-to-play",title:"tap-to-play",children:si("div",{className:"dDtiqq_tapToPlayContainer",children:[si("div",{className:"dDtiqq_tapToPlayIcon"}),si("div",{className:"dDtiqq_tapToPlayText",children:"Tap to play"})]})}):null;const di=(e,t)=>{e.emit({type:"cta",event:cn.DOWNLOAD_BUTTON_CTA,data:{scene_id:t}})};var dr=({callToActionReportingService:e,sceneId:t})=>si("button",{className:"Zz6y0G_download","aria-label":"cta",id:"download-button",type:"button",onClick:()=>{di(e,t)},children:si("span",{className:"Zz6y0G_downloadIcon"})}),da=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return si("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[si("defs",{children:si("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[si("stop",{offset:"0%","stop-color":"#ffd055"}),si("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),si("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),si("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},ds=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const dl=12,dc=5,dd=0;var du=({id:e,size:t=12,count:n=5,value:i=0})=>{let r=[],a=new ds;for(let o=0;o<n;o+=1){let n=a.getOffsetPercent(o,i);r.push(si(da,{id:e,index:o,size:t,offset:n},o))}return si("span",{id:e,children:r})},dE=class{getVideoComputedHeight(){let e=oy(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t,n,i){let r=e.target;if(n.some((e=>null!==r.closest(`#${e}`))))return this.ctaReportingService.emit({type:"cta",event:cn.PERSISTENT_CTA,data:{scene_id:i}}),void this.sceneEventReportingService.emit(iB.CTA_BUTTON_CLICK);t.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:oI.FSC,data:{scene_id:i}})}constructor(e=oA(),t=oO(),n=i7()){this.ctaReportingService=e,this.fullCtaReportingService=t,this.sceneEventReportingService=n}};const dv=tR(!1);var d_=({fullScreenClickConfig:e,callToActionConfig:t,sceneId:n,sceneEventReportingService:i=i7(),timerService:r=no(),ctaReportingService:a=oA(),fullCtaReportingService:o=oO()})=>{var s,l,c,d;return tc((()=>{r.getNewTimer(t.delay,(()=>{dv.value=!0,i.emit(iB.CTA_BUTTON_SHOW)})).start()}),[]),si("div",{id:iX,className:lU("UUyEIq_persistentSimpleCta",dv.value?"UUyEIq_slideIn":""),"aria-hidden":"true",onClick:t=>{new dE(a,o,i).handleClick(t,e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"],n)},children:[(null===(s=t.appMeta)||void 0===s?void 0:s.icon)&&si("img",{className:"UUyEIq_appIcon",id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null===(l=t.appMeta)||void 0===l?void 0:l.name)||(null===(c=t.appMeta)||void 0===c?void 0:c.company))&&si("div",{className:"UUyEIq_appDetail",id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&si("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&si("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&si(du,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),si("button",{className:"UUyEIq_persistentSimpleCtaBtn",style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})},dh=({fullScreenClickConfig:e,callToActionConfig:t,sceneId:n})=>{var i,r,a,o,s,l,c,d;tc((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),tc((()=>{i7().emit(iB.CTA_BUTTON_SHOW)}),[]);let u=null===(i=t.appMeta)||void 0===i?void 0:i.isRatingGreaterThanMinimum;return si("div",{id:"persistent-rich-cta",className:"DwKKSa_persistentRichCta",onClick:t=>{(new dE).handleClick(t,e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"],n)},"aria-hidden":"true",children:[(null===(r=t.appMeta)||void 0===r?void 0:r.icon)&&si("img",{className:"DwKKSa_appIcon",alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null===(a=t.appMeta)||void 0===a?void 0:a.icon}),si("div",{className:"DwKKSa_appInfo",children:[(null===(o=t.appMeta)||void 0===o?void 0:o.name)&&si("h1",{id:"persistent-rich-cta-app-name",children:null===(s=t.appMeta)||void 0===s?void 0:s.name}),u&&si(du,{value:null===(l=t.appMeta)||void 0===l?void 0:l.rating,id:"persistent-rich-cta-app-rating"}),!u&&si("p",{id:"persistent-rich-cta-company-name",children:null===(c=t.appMeta)||void 0===c?void 0:c.company}),si("button",{className:"DwKKSa_persistentRichCtaBtn",type:"button",style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},id:i1,children:t.text})]})]})};const dS=(e,t)=>{e.enabled?oO().emit({type:"fsc",event:oI.FSC,data:{scene_id:t}}):oA().emit({type:"cta",event:cn.PERSISTENT_CTA,data:{scene_id:t}})};var dT=({fullScreenClickConfig:e,callToActionConfig:t,sceneId:n})=>{var i;let r=new dE,a=td(null);tc((()=>{r.updateScreenshotsHeight(a)}),[window.innerHeight,window.innerWidth]);let o=null===(i=t.appMeta)||void 0===i?void 0:i.screenshots;return o&&0!==o.length?si("div",{id:"persistent-rich-cta-screenshots",ref:a,className:"dalDea_persistentRichCtaScreenshots",onClick:()=>dS(e,n),"aria-hidden":"true",children:o.map((e=>e&&si("div",{className:"dalDea_slide",children:si("img",{alt:e,src:e})},e)))}):null},dp=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;if(e===oT.UNKNOWN)return null;let o=n.getId();return!i&&e===oT.LANDSCAPE&&t===W.PORTRAIT&&(null!==(a=null===(r=n.getCallToActionConfig().appMeta)||void 0===r?void 0:r.screenshots)&&void 0!==a?a:[]).length>0?si(eY,{children:[si(dh,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),sceneId:o}),si(dT,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),sceneId:o})]}):si(d_,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),sceneId:o})},dg=((hL=dg||{}).PERCENTAGE="percentage",hL.ABSOLUTE="absolute",hL);const dC=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},dI=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),dA=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",dO=e=>{let t=r.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t=e.split(".")[1],n=dA(t);return{type:n,tpat_event:e,value:"percentage"===n?dI(t):dC(t)}})),t.bind(e,n),n):[]};var dm=(e,t)=>{let n=b();t.event===rv.PROGRESS&&n.has(w.TPAT_PROGRESS_EVENTS)&&dO(n.get(w.TPAT_PROGRESS_EVENTS)).forEach((n=>{var i,r;if((null===(i=t.data)||void 0===i?void 0:i.current_time)&&(null===(r=t.data)||void 0===r?void 0:r.duration)){let{current_time:i,duration:r}=t.data,a=Math.floor(i/r*100),o=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&o>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const df=[n7.CHECKPOINT_0,n7.CHECKPOINT_25,n7.CHECKPOINT_50,n7.CHECKPOINT_75,n7.CHECKPOINT_100],dN=(e,t)=>df[rS(e,t)],dD=(e,t=eo())=>{let n=[];return df.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n};var dR=(e,t,n,i=ii())=>{let r=dN(e,t);dD(rS(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,current_time:e,duration:t})})),i.emit(r,!0,{progress:n,current_time:e,duration:t})},dy=(e,t,n,i=sx())=>{if((null==n?void 0:n.getSceneType())!==t7.video)return;let r=[ne.START,ne.FIRST_QUARTILE,ne.MIDPOINT,ne.THIRD_QUARTILE,ne.COMPLETE][rS(e,t)];r&&sj(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const dL=e=>({id:e.getId(),initial:og.LOADING,context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:oT.UNKNOWN,videoPlayer:e.getVideoPlayer()},states:{[og.LOADING]:{entry:oC.EMIT_LOAD,on:{[op.LOAD_FAIL]:{target:og.LOAD_FAIL_RETRY},[op.CAN_PLAY]:{target:og.PLAYING,actions:[oC.SET_CAN_PLAY,oC.REPORT_VIDEO_START]},[op.PAUSE]:og.PAUSED,[op.DURATION_CHANGE]:{actions:oC.EMIT_DURATION_CHANGE},[op.WAITING]:{actions:oC.EMIT_WAITING},[op.SUSPEND]:{actions:oC.EMIT_SUSPEND}}},[og.LOAD_FAIL_RETRY]:{on:{[op.RETRY]:og.LOADING}},[og.PLAYING]:{entry:oC.EMIT_PLAY,on:{[op.MINIMIZE]:{target:og.PAUSED,actions:[oC.UPDATE_CURRENT_TIME]},[op.PAUSE]:og.PAUSED,[op.END]:og.ENDED,[op.AUTO_PLAY_FAIL]:og.AUTO_PLAY_FAIL,[op.TIME_UPDATE]:{actions:[oC.UPDATE_PROGRESS,oC.EMIT_PROGRESS,oC.EMIT_CHECKPOINT_TPAT_EVENT,oC.EMIT_SCENE_EVENT,oC.EMIT_TIME_UPDATE]},[op.SUSPEND]:{actions:oC.EMIT_SUSPEND},[op.WAITING]:{actions:oC.EMIT_WAITING},[op.CLOSE]:{target:og.FINAL,actions:oC.EMIT_CLOSE}}},[og.PAUSED]:{entry:oC.EMIT_PAUSE,on:{[op.MINIMIZE]:{actions:[oC.UPDATE_CURRENT_TIME]},[op.CAN_PLAY]:{actions:oC.SET_CAN_PLAY},[op.MAXIMIZE]:{target:og.PLAYING,actions:[oC.RESET_CURRENT_TIME]},[op.PLAY]:og.PLAYING,[op.TIME_UPDATE]:{actions:[oC.UPDATE_PROGRESS,oC.EMIT_PROGRESS,oC.EMIT_CHECKPOINT_TPAT_EVENT,oC.EMIT_SCENE_EVENT]},[op.AUTO_PLAY_FAIL]:og.AUTO_PLAY_FAIL,[op.CLOSE]:{target:og.FINAL,actions:oC.EMIT_CLOSE}}},[og.AUTO_PLAY_FAIL]:{entry:[ns.STANDBY_TIMERS,nr.PAUSE_INTERVALS],on:{[op.PLAY]:{target:og.PLAYING,actions:[ns.WAKE_TIMERS,nr.START_INTERVALS]}}},[og.ENDED]:{on:{[op.PLAY]:{target:og.PLAYING,actions:[oC.INCREMENT_LOOP_COUNT]},[op.PAUSE]:og.PAUSED,[op.CLOSE]:{target:og.FINAL,actions:oC.EMIT_CLOSE_FULLY_PLAYED}}},[og.FINAL]:{}}}),dP={actions:c({[oC.UPDATE_PROGRESS]:g({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[oC.EMIT_PROGRESS]:e=>{void 0!==e.duration&&rT().emit({type:"video",event:rv.PROGRESS,data:{progress:e.progress,current_time:e.currentTime,duration:e.duration}})},[oC.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&dR(e.currentTime,e.duration,e.progress)},[oC.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&dy(e.currentTime,e.duration,ea())},[oC.EMIT_PAUSE]:()=>{rT().emit({type:"video",event:rv.PAUSE})},[oC.EMIT_PLAY]:e=>{rT().emit({type:"video",event:rv.PLAY,data:{duration:e.duration}})},[oC.REPORT_VIDEO_START]:e=>{let t=sN(),n=or(),i=b(),r={[nt.CUSTOM]:G.CUSTOM_VIDEO_PLAYER,[nt.NATIVE]:G.NATIVE_VIDEO_PLAYER,[nt.PROGRESSIVE]:G.PROGRESSIVE_VIDEO_PLAYER};n.emit([{name:K.VIDEO_START,metric:G.VIDEO_START,is_muted:t.isMuted(),actual_video_duration:e.duration,expected_video_duration:Number(i.get(w.VIDEO_DURATION))},{name:K.VIDEO_START,metric:r[e.videoPlayer]}]),i7().emit(iB.LOAD_COMPLETE)},[oC.INCREMENT_LOOP_COUNT]:g({loopCount:e=>e.loopCount+1}),[oC.EMIT_CLOSE]:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;rT().emit({type:"video",event:rv.CLOSE,data:{is_video_fully_played:t,maximum_viewing_time:n}})},[oC.EMIT_CLOSE_FULLY_PLAYED]:e=>{rT().emit({type:"video",event:rv.CLOSE,data:{is_video_fully_played:!0,maximum_viewing_time:null==e?void 0:e.duration}})},[oC.SET_CAN_PLAY]:g({canPlay:()=>!0,duration:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.duration},videoWidth:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!==(n=t.eventTarget)&&void 0!==n?n:{};return i/r>1?oT.LANDSCAPE:oT.PORTRAIT}}),[oC.EMIT_DURATION_CHANGE]:(e,t)=>{var n;eo().emit({type:"video",event:rv.DURATION_CHANGE,data:{duration:null===(n=t.eventTarget)||void 0===n?void 0:n.duration}})},[oC.EMIT_WAITING]:()=>{eo().emit({type:"video",event:rv.WAITING})},[oC.EMIT_SUSPEND]:(e,t)=>{var n;eo().emit({type:"video",event:rv.SUSPEND,data:{ready_state:null===(n=t.eventTarget)||void 0===n?void 0:n.readyState}})},[oC.EMIT_TIME_UPDATE]:()=>{eo().emit({type:"video",event:rv.TIME_UPDATE})},[oC.UPDATE_CURRENT_TIME]:g({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[oC.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[oC.EMIT_LOAD]:()=>{i7().emit(iB.LOAD_START)}},na(),nl())};var db=e=>ld(dL(e),dP),dw=class{getCloseButtonDelaySeconds(e,t){return void 0===e?6:cj(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?nK.CLOSE:t}getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig({videoDuration:t}),i=e.isLastPage();return{delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)}}shouldReplaceShowStoreKitOverlay(){var e;return this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null===(e=this.productViewService)||void 0===e?void 0:e.isDone())}constructor(e=nU(),t=nP(),n=en()){this.isStoreKitOverlaySupported=e,this.productViewService=t,this.placementTypeService=n}},dV=(e,t=c2(),n=eo())=>i=>{if([t6.NEXT,t6.LAST_CHANCE_ENDCARD].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:im.GRANT_REWARD}))return void(null==t||t.send({type:cq.SHOW}));null==t||t.send({type:cq.HIDE})}e(i)},dM=()=>{let e=r.getInstance(),t=cX.getServiceIdentifier();if(e.has(t))return e.get(t)};const dk=(e,t)=>{var n,i;let r=dM();if(r)switch(t.event){case rv.DURATION_CHANGE:{let e=(null===(n=t.data)||void 0===n?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case rv.WAITING:case rv.SUSPEND:r.onVideoBuffering();break;case rv.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case rv.MUTE:case rv.UNMUTE:r.onSoundChange(t.event);break;case rv.PLAY:case rv.PAUSE:r.onVideoStateChanged(t.event);break;case rv.CLOSE:(null===(i=t.data)||void 0===i?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case cn.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case sb.REMOVE_HANDLER:es().removeEventHandler(t.type,dk)}};var dU=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>si("div",{id:null!=i?i:"dialog",role:"dialog",className:"W6zMza_dialogBox",style:{visibility:n?"visible":"hidden"},children:si("div",{className:"W6zMza_dialog",children:si("div",{className:"W6zMza_dialogContent",children:[si("div",{className:"W6zMza_dialogTitle",children:e}),si("div",{className:"W6zMza_dialogBody",children:[si("div",{className:"W6zMza_dialogText",children:t}),si("div",{className:"W6zMza_dialogActions",children:r})]})]})})}),dB=class{getTitleText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_TITLE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close this video?":"Close this ad?"}getBodyText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_BODY_TEXT))&&void 0!==e?e:`Are you sure you want to skip this ${this.hasFollowUpAdExperience?"video":"ad"}? Finish watching to claim your reward.`}getCloseText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_CLOSE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close Video":"Close Ad"}getContinueText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_CONTINUE_TEXT))&&void 0!==e?e:"Continue"}constructor(e,t=b(),n=ea()){var i;this.tokenService=t,this.hasFollowUpAdExperience=(null==n||null===(i=n.next)||void 0===i?void 0:i.getSceneType())!==t7.closed||e}},dH=()=>{let[e,t]=ld(c0(),c1);return[e,t]},dW=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=dH(),r=new dB(t);return si(dU,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(cZ.SHOWING),children:si(eY,{children:[si("div",{className:"eDiOmG_primaryButton",children:si("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:cq.HIDE})},children:[r.getContinueText(),si("span",{className:"eDiOmG_continueIcon",id:"incentivized-dialog-continue-icon"})]})}),si("div",{className:"eDiOmG_secondaryButton",children:si("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:cq.CLOSE}),e({type:t?t6.LAST_CHANCE_ENDCARD:t6.NEXT})},children:r.getCloseText()})})]})})};const dx=tR(!1),dF=tR(!1);var dK=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,isFreeForm:i,showVideoBlur:r=!1,placementTypeService:a=en()})=>{let o=new dw,[s,l]=db(e),c=a.isRewarded()&&!i?dV(t):t,d=e.getStoreKitOverlayAutoShowConfig().enabled;cI(e.getId(),e.getAppStoreOnDelayConfig(),s.value.context.canPlay),cA(e.getStoreKitOverlayAutoShowConfig(),dF.value),lB("video",dm),cy(e.getId(),e.isChild()),co(t),sY(),cc(e),cD({callToActionConfig:dx.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),cN({fullScreenClickConfig:dx.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),lB("cta",((e,t)=>{dx.value||dk(e,t)})),lB("fsc",((e,t)=>{dx.value||dk(e,t)}));let u=e.getId();return si(eY,{children:[si(dW,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),si(ca,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{dx.value=e},sceneId:u}),si(ce,{config:e.getFullScreenClickConfig(),sceneId:u,children:[s.value.context.canPlay&&n&&!dx.value&&si(l5,{config:o.getCloseButtonConfig(e,s.value.context.duration),sendAdEvent:c,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),si(dn,{isVisible:s.value.matches(og.AUTO_PLAY_FAIL),sendVideoEvent:l}),si(dt,{isInLine:en().isInLine()||r}),si(c9,{scene:e,videoState:s,sendVideoEvent:l,sendAdEvent:t,onMetadataLoaded:()=>{dF.value=!0}}),e.showDownloadButton&&si(lq,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:si(dr,{sceneId:u,callToActionReportingService:eo()})}),e.getCallToActionConfig().isPersistent&&!d&&s.value.context.canPlay&&si(dp,{scene:e,videoOrientation:s.value.context.orientation,viewportOrientation:et().getOrientation(),disableRichCta:e.isChild()})]})]})},dG=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:null==t||null===(n=t.error)||void 0===n?void 0:n.message,stack:null==t||null===(i=t.error)||void 0===i?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))},dY=((hP={}).ADD_EVENT_LISTENER="addEventListener",hP.CACHE_FILE="cacheFile",hP.CLOSE="close",hP.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",hP.EXIT_ALTERNATIVE="exitAlternative",hP.FETCH_FILE="fetchFile",hP.GET_CURRENT_POSITION="getCurrentPosition",hP.GET_DEFAULT_POSITION="getDefaultPosition",hP.GET_EXPAND_PROPERTIES="getExpandProperties",hP.GET_MAX_SIZE="getMaxSize",hP.GET_PLACEMENT_TYPE="getPlacementType",hP.GET_SCREEN_SIZE="getScreenSize",hP.GET_STATE="getState",hP.GET_VIEWABLE="getViewable",hP.GRANT_REWARD="grantReward",hP.IS_VIEWABLE="isViewable",hP.NEXT="next",hP.OPEN="open",hP.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",hP.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",hP.REMOVE_EVENT_LISTENER="removeEventListener",hP.SET_ORIENTATION_PROPERTIES="setOrientationProperties",hP.SHOW_ALTERNATIVE="showAlternative",hP.SHOW_CLOSE="showClose",hP.IS_REWARDED="isRewarded",hP.GET_NEW_TIMER="getNewTimer",hP.GET_NEW_INTERVAL="getNewInterval",hP),dj=((hb={}).CREATE_CALENDAR_EVENT="createCalendarEvent",hb.EXPAND="expand",hb.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",hb.GET_CONSENT_BODY_TEXT="getConsentBodyText",hb.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",hb.GET_CONSENT_REQUIRED="getConsentRequired",hb.GET_CONSENT_TITLE_TEXT="getConsentTitleText",hb.GET_ORIENTATION_PROPERTIES="getOrientationProperties",hb.GET_RESIZE_PROPERTIES="getResizeProperties",hb.GET_VERSION="getVersion",hb.PLAY_VIDEO="playVideo",hb.RESIZE="resize",hb.SET_EXPAND_PROPERTIES="setExpandProperties",hb.SET_RESIZE_PROPERTIES="setResizeProperties",hb.STORE_PICTURE="storePicture",hb.USE_CUSTOM_CLOSE="useCustomClose",hb),dX=()=>({[dj.CREATE_CALENDAR_EVENT]:()=>{},[dj.EXPAND]:()=>{},[dj.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>{},[dj.GET_CONSENT_BODY_TEXT]:()=>{},[dj.GET_CONSENT_DENY_BUTTON_TEXT]:()=>{},[dj.GET_CONSENT_REQUIRED]:()=>{},[dj.GET_CONSENT_TITLE_TEXT]:()=>{},[dj.GET_ORIENTATION_PROPERTIES]:()=>{},[dj.GET_RESIZE_PROPERTIES]:()=>{},[dj.GET_VERSION]:()=>()=>"1.0",[dj.PLAY_VIDEO]:()=>{},[dj.RESIZE]:()=>{},[dj.SET_EXPAND_PROPERTIES]:()=>{},[dj.SET_RESIZE_PROPERTIES]:()=>{},[dj.STORE_PICTURE]:()=>{},[dj.USE_CUSTOM_CLOSE]:()=>()=>!1}),dz=()=>({width:window.innerWidth,height:window.innerHeight}),d$=()=>I(c({},dz()),{useCustomClose:!1,isModal:!1}),dZ=()=>c({x:0,y:0},dz());const dq=new U("5.0.0");var dQ=(e=et())=>e.getMraidVersion().isGreaterThanOrEqualTo(dq);const dJ=(e=or())=>e.getEventCount(K.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND)>=2;var d0=async(e,t=nP(),n=dJ(),i=dQ(),r=or())=>{if(n)return!1;if(r.emit(K.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND),null==t||t.open(),i)try{await oc((()=>null==t?void 0:t.isOpen()),e)}catch(e){return!1}return!0},d1=e=>!!e&&!![t7.video,t7.image,t7.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,d2=()=>({[dY.CACHE_FILE]:(e,t,n=ck)=>(e,t)=>{var i;return!(!e||!t||"string"!=typeof e||!e.toLowerCase().startsWith("http")||!ArrayBuffer.isView(t)||(null===(i=n())||void 0===i||i.addRecord({url:e,data:t}),0))},[dY.EXIT_ALTERNATIVE]:(e,t,n=lc,i=d1)=>()=>{if(s$.getValue().isLastChanceEndcardOverlayShowing)return;let e=ea(),t={type:t6.NEXT};e&&i(e)&&(t={type:t6.LAST_CHANCE_ENDCARD}),n().send(t)},[dY.FETCH_FILE]:(e,t,n=ck)=>async e=>{var t;if(!e||"string"!=typeof e||!e.toLowerCase().startsWith("http"))return;let i=await(null===(t=n())||void 0===t?void 0:t.get(e));return null==i?void 0:i.data},[dY.GRANT_REWARD]:(e,t,n=L,i=or(),r=ii())=>{let a=n().getMraidBridgeExt();return i.emit(K.GRANT_REWARD,G.GRANT_REWARD),null==a||a.notifySuccessfulViewAd(),r.emit(n7.REWARD_GRANTED,!0),()=>null},[dY.NEXT]:(e,t,n=lc)=>e=>{s$.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[dY.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t,n=nU,i=nI)=>async()=>{if(!n())return!1;let e=i();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:np.OFF});try{return await oc((()=>e.isOpen()),3e3),!0}catch(e){return!1}},[dY.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t,n=nT,i=nP,r=d0)=>async()=>{if(!n())return!1;let e=i();return null!=e&&!!e.isOpen()||(null==e||e.open(),await r(3e3))},[dY.SHOW_ALTERNATIVE]:(e,t,n=lc,i=or())=>e=>{s$.getValue().isLastChanceEndcardOverlayShowing||(i.emit(K.ALTERNATIVE_VIEW,G.ALTERNATIVE_VIEW),n().send(e))},[dY.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t,n=nU,i=nI)=>async()=>{if(!n())return!1;let e=i();if(!e.isOpen())return!0;e.close();try{return await oc((()=>!e.isOpen()),3e3),!0}catch(e){return!1}},[dY.SHOW_CLOSE]:(e,t,n=i7())=>()=>{n.emit(iB.FORCE_COMPLETE_COUNT_DOWN)},[dY.IS_REWARDED]:(e,t,n=en())=>()=>n.isRewarded(),[dY.GET_NEW_TIMER]:(e,t,n=no())=>(e,t)=>n.getNewTimer(e,t),[dY.GET_NEW_INTERVAL]:(e,t,n=ni())=>(e,t)=>n.getNewInterval(e,t)}),d3=(e,t)=>{if(!e.isFullscreen()||t.getOperatingSystem()===H.Android||t.getOperatingSystem()===H.Unknown)return!1;let n=new U("6.12.0");return!t.getSdkVersion().isLessThanOrEqualTo(n)},d5=(hw=(e,t)=>{oA().emit({type:"cta",event:cn.ENDCARD_CTA,data:{cta_url:e,scene_id:t}})},t=!1,function(...n){!t&&(e||(hw.apply(this,n),t=!0,e=window.setTimeout((()=>{t=!1,e=void 0}),300)))}),d4=()=>c({[dY.CLOSE]:(e,t,n=lc)=>()=>n().send(t6.CLOSE),[dY.ADD_EVENT_LISTENER]:(e,t)=>(e,n,i=sI)=>{i().addEventListener(t,e,n)},[dY.IS_VIEWABLE]:(e,t,n=s_,i=sT)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[dY.GET_VIEWABLE]:(e,t,n=s_,i=sT)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[dY.GET_CURRENT_POSITION]:()=>dZ,[dY.GET_DEFAULT_POSITION]:()=>dZ,[dY.GET_EXPAND_PROPERTIES]:()=>d$,[dY.GET_MAX_SIZE]:()=>dz,[dY.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[dY.GET_SCREEN_SIZE]:()=>dz,[dY.GET_STATE]:e=>e.getState.bind(e),[dY.OPEN]:(e,t,n=en(),i=i7,r=d5)=>n.isFullscreen()?e=>{r(e,t)}:e=>0===i().getEventCount(iB.CLICK)?null:r(e,t),[dY.REMOVE_EVENT_LISTENER]:(e,t)=>(e,n,i=sI)=>{i().removeEventListener(t,e,n)},[dY.SET_ORIENTATION_PROPERTIES]:(e,t,n=en(),i=et())=>d3(n,i)?e.setOrientationProperties.bind(e):()=>null},d2()),d6=()=>I(c({},d4(),dX()),{supports:()=>e=>Object.values(dY).includes(e)}),d8=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e,t=L().getMraid(),n=d6(),i=or()){this.sceneId=e,this.originalMraid=t,this.commandHandlers=n,this.observabilityEventReportingService=i,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t,sceneId:n}=this;return{get:(i,r)=>e[r]?e[r](i,n):i[r]?i[r]:(t.emit({name:K.UNKNOWN_MRAID_COMMAND,value:r}),()=>!1)}}}},d7=(e,t=i7())=>{e.addEventListener("load",(()=>{t.emit(iB.LOAD_COMPLETE)}))},d9=(e,t,n,i=ra,r=sj)=>{e&&e.document.addEventListener(cR(),(e=>{(null==e?void 0:e.isTrusted)&&r(ne.CLICK_THROUGH,n,t),i(e)}),!0)},ue=((hV=ue||{})[hV.MUTE=0]="MUTE",hV[hV.UNMUTE=1]="UNMUTE",hV),ut=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(+!e.shouldMute,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}},un=((hM={}).AUDIO="audio",hM.VIDEO="video",hM.IFRAME="iframe",hM.DEFAULT="default",hM),ui=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},ur=class{isNodeAllowed(e){return[un.AUDIO,un.VIDEO].includes(ui(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class ua{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;ua.isWindowAccessible(e.contentWindow)&&ua.interceptAllMediaElements(e.contentWindow,this.mute);let n=!ua.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:rV.NESTED_IFRAME_TYPE,data:{nested_iframe_type:n?rb.NESTED_IFRAME_WITHOUT_CORS:rb.NESTED_IFRAME_WITH_CORS,scene_id:null===(t=this.injectedGetCurrentScene())||void 0===t?void 0:t.getId()}})}handleNewNode(e){ui(e)===un.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null===(n=t.mute)||void 0===n?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null===(n=t.unmute)||void 0===n?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=rw(),r=ea){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}ua.instances=new Map,ua.hasIframeCrossOriginUrl=e=>{var t;return null===(t=e.src)||void 0===t?void 0:t.toLowerCase().startsWith("http")},ua.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},ua.interceptAllMediaElements=(e,t,n=rw(),i=ea)=>{let r=new ua(e,[new ur(e),new ut(e,t)],t,n,i);ua.instances.set(e,r)},ua.muteAllMedias=()=>{ua.instances.forEach((e=>{ua.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},ua.unmuteAllMedias=()=>{ua.instances.forEach((e=>{ua.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var uo=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},us=(e,t)=>{e.document.addEventListener("click",(e=>{let n=e.target.closest("a");if(n){if(!e.isTrusted)return void e.preventDefault();n.href&&(e.preventDefault(),t(n.href))}}),{capture:!0})},ul=e=>null!==e.contentDocument;class uc{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){ul(e)&&new uc(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}observeNestedIframes(){let e=new this.targetWindow.MutationObserver(this.handleMutation);this.startObservation(e)}startObservation(e){let{document:t}=this.targetWindow,n=()=>{this.checkExistingIframes(),this.observeDocument(e)};"loading"===t.readyState?t.addEventListener("DOMContentLoaded",n):n()}observeDocument(e){e.observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t,this.handleNewIframe=e=>{ui(e)===un.IFRAME&&uc.init(e,this.interceptors)},this.handleMutation=e=>{e.reduce(((e,t)=>e.concat(Array.from(t.addedNodes))),[]).forEach(this.handleNewIframe)}}}var ud=class extends lJ{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){return this.scene.getCloseButtonConfig()}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,uo(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),uo(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=this.openUrl;let o=e.target.closest("a");(null==o||null===(i=o.href)||void 0===i?void 0:i.startsWith("http"))?e.preventDefault():null===(r=(a=e.target).click)||void 0===r||r.call(a)}},i=()=>{var e;"loading"!==(null===(e=t.document)||void 0===e?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.placementTypeService.isFullscreen()?this.initMraidInIframeForFullscreen(e.contentWindow):this.initMraidInIframeForNonFullscreen(e)}getLastChanceEndcardConfig(e,t){let n=this.scene.getLastChanceEndcardConfig();return n.enabled&&e?I(c({},n),{enabled:t}):n}getInsertIframeTags(e){return`<base target="_parent" ${e?`href=${e}`:""}><style>body {margin: 0;padding: 0;overflow: hidden;}</style>`}loadNestedIframe(e,t){if(!(null==t?void 0:t.content))return;let n=()=>{this.loadNestedIframe(e,t)},i=e.querySelector("iframe");if(!i)return void e.addEventListener("DOMContentLoaded",n);e.removeEventListener("DOMContentLoaded",n),i.width="100%",i.height="100%";let{content:r,baseUrl:a}=t,o=this.getInsertIframeTags(a);this.loadIframe(i,r,o)}async loadIframe(e,t,n){try{let i=e.contentWindow,r=null==i?void 0:i.document;this.injectMethodToIframe(e),r.open(),this.injectedAddErrorListenerToIframe(i),this.injectedAddLoadListenerToIframe(i),this.addSourceInfoToFunctions(i),r.write(n+t),r.close(),uc.init(e,[this.addLoadEventForAndroid,this.blockBeforeunloadEvent,this.addSourceInfoToFunctions,this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),us(i,this.openUrl),this.injectedInterceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t,r=this.getInsertIframeTags();await this.loadIframe(e.current,n,r);let a=e.current.contentWindow;this.loadNestedIframe(a.document,i)}}constructor(e,t=iS(),n=et(),i=en(),r=new d8(e.getId()),a=sN(),o=i7(),s=dG,l=d7,c=ua.interceptAllMediaElements){super(i,o,e),this.scene=e,this.errorLoggingService=t,this.environmentService=n,this.placementTypeService=i,this.proxyMraidService=r,this.muteService=a,this.sceneEventReportingService=o,this.injectedAddErrorListenerToIframe=s,this.injectedAddLoadListenerToIframe=l,this.injectedInterceptAllMediaElements=c,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{let t=this.scene;d9(e,t.getTrackingEventMapConfig(),t.getId())},this.openUrl=e=>{d5(e,this.scene.getId())},this.addLoadEventForAndroid=e=>{if(this.environmentService.getOperatingSystem()===H.Android){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},this.blockBeforeunloadEvent=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},this.addSourceInfoToFunctions=e=>{e.Object.defineProperty(e.Function.prototype,i4,{value:"iframe",writable:!0,enumerable:!1,configurable:!0})}}},uu=(e=sN())=>{tc((()=>{e.isMuted()?ua.muteAllMedias():ua.unmuteAllMedias()}),[e.getMutedSignal().value])};const uE=window.addEventListener;var uv=e=>{var t;let n=(t=(t,n,i)=>{e&&"iframe"===n[i4]?e.addEventListener(t,n,i):uE.call(window,t,n,i)},e7=8,tu((function(){return t}),[e]));tc((()=>(window.addEventListener=n,()=>{window.addEventListener=uE})),[n])},u_=({sendAdEvent:e,htmlService:t,scene:n})=>{var i;let r=td(null),[a,o]=(e7=1,tl(tT,!1));return tc((()=>{a&&requestAnimationFrame((async()=>{t.getIframeContentData(n).then((e=>{t.updateIframeContent(r,e)}))}))}),[a]),uu(),uv(null===(i=r.current)||void 0===i?void 0:i.contentWindow),si("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:t6.PRIVACY_LOGO_SHOW}),o(!0)},ref:r,className:"oAV7cW_endcardIframe",allow:"autoplay",scrolling:"no",frameBorder:"0"})},uh=()=>{let e=r.getInstance(),t=sB.getServiceIdentifier();if(e.has(t))return e.get(t)};const uS=(e,t)=>{let n=uh();if(n)switch(t.event){case cn.ENDCARD_CTA:n.onCtaClick();break;case sb.REMOVE_HANDLER:es().removeEventHandler(t.type,uS)}};var uT=((hk=uT||{}).PRELOAD="preload",hk);const up=e=>Object.values(uT).includes(e);class ug extends n9{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&up(e)?{type:"debug",event:e}:"object"==typeof e?e:void 0}}var uC=e=>new ug(null!=e?e:eo());const uI=(e,t)=>({id:t,context:{id:t,preloadSuccess:!1},initial:e?t3.INITIAL:t3.SHOWING,states:{[t3.INITIAL]:{on:{[t2.SHOW]:{target:t3.SHOWING},[t2.PRELOAD]:{target:t3.PRELOADING,actions:[t5.INITIALIZE_PRELOAD]}}},[t3.PRELOADING]:{on:{[t2.SHOW]:{target:t3.SHOWING,actions:[t5.MARK_PRELOAD_SUCCESS,t5.EMIT_SHOW,t5.TRIGGER_VIEWABLE_CHANGE]},[t2.CANCEL_PRELOAD]:{target:t3.INITIAL,actions:[t5.CANCEL_PRELOAD,t5.FLUSH_MRAID_EVENTS]}}},[t3.SHOWING]:{}}}),uA=(e=sI(),t=s_(),n=i7())=>({actions:{[t5.INITIALIZE_PRELOAD]:()=>{n.emit(iB.PRELOAD_START)},[t5.FLUSH_MRAID_EVENTS]:()=>{let t=sX(lc().state);e.flushAllEventCallbacks(t.getId())},[t5.EMIT_SHOW]:e=>{n.emit(iB.PRELOAD_COMPLETE),uC().emit(uT.PRELOAD,!1,{message:`preloading finished succesfully for ${e.id}`})},[t5.CANCEL_PRELOAD]:e=>{n.emit(iB.PRELOAD_CANCELLED),uC().emit(uT.PRELOAD,!1,{message:`preloading got cancelled for ${e.id}`})},[t5.TRIGGER_VIEWABLE_CHANGE]:()=>{let n=sX(lc().state);e.triggerEvent(n.getId(),sp.VIEWABLE_CHANGE,t.isViewable())},[t5.MARK_PRELOAD_SUCCESS]:g({preloadSuccess:!0})}});var uO=(e,t)=>ld(uI(e,t),uA()),um=((hU=um||{})[hU.Eligible=1]="Eligible",hU[hU.Not_Eligible=2]="Not_Eligible",hU[hU.Started=3]="Started",hU[hU.Canceled=4]="Canceled",hU),uf=(e,t=sT())=>{let n=tY(e?1:2);return[e=>{1===n.value&&(n.value=3,t.startPreloading(e))},e=>{3===n.value&&(n.value=4,t.cancelPreloading(e))}]},uN=(e=i7())=>{let t=tY(e.getEventCount({type:"scene-event",event:iB.CLICK,data:{scene_id:"",scene_type:t7.endcard}})>0);return lB("scene-event",((e,n)=>{n.event===iB.CLICK&&ri(n.data.click_target,rn)&&(t.value=!0)}),e),[t.value]},uD=()=>{let e=e=>{Object.entries({"z-index":"auto",isolation:"isolate"}).forEach((([t,n])=>{e.style.setProperty(t,n,"important")}))},t=t=>{let n=new MutationObserver((()=>{e(t)}));return e(t),n.observe(t,{attributes:!0,attributeFilter:["style"]}),n};tc((()=>{let e=new Map,n=Element.prototype.appendChild;return Element.prototype.appendChild=function(i){if((e=>e.nodeType===Node.ELEMENT_NODE&&"style"in e)(i)){let n=t(i);e.set(i,n)}return n.call(this,i)},()=>{e.forEach(((e,t)=>{e.disconnect(),t.remove()})),Element.prototype.appendChild=n}}),[])};const uR=tR(!1),uy=(e,t)=>{if(t)return uR.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var uL=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1,startPreloading:a=!1,customClassName:o,sceneEventReportingService:s})=>{let l=new ud(e),[c]=uO(r,e.getId()),d=c.value.matches(t3.SHOWING);cI(e.getId(),e.getAppStoreOnDelayConfig(),!0,d),cA(e.getStoreKitOverlayAutoShowConfig(),d),cD({callToActionConfig:uy(e,d),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),cN({fullScreenClickConfig:d&&uR.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),lB("cta",((e,t)=>{d&&(uR.value||uS(e,t))}));let[u,E]=uf(r);lB("video",((t,n)=>{if(r)switch(n.event){case rv.SUSPEND:var i,a;(null===(i=n.data)||void 0===i?void 0:i.ready_state)&&(null===(a=n.data)||void 0===a?void 0:a.ready_state)<HTMLMediaElement.HAVE_FUTURE_DATA&&E(e.getId());break;case rv.WAITING:E(e.getId());break;case rv.CAN_PLAY_THROUGH:u(e.getId())}})),co(t,d),sY(d),cc(e,d),cy(e.getId(),e.isChild(),d),tc((()=>{d&&t({type:t6.CREATIVE_VIEW})}),[d]),tc((()=>{a&&u(e.getId())}),[e,a]);let[_]=uN(s),v=l.getLastChanceEndcardConfig(az.isEndcardOnly(),_);if(uD(),c.value.matches(t3.INITIAL))return null;let h=e.getId();return si(eY,{children:[d&&si(ca,{config:v,sendAdEvent:t,onVisibilityChange:e=>{uR.value=e},sceneId:h}),si("div",{className:null!=o?o:"oAV7cW_endcard",id:h,style:{visibility:c.value.matches(t3.PRELOADING)?"hidden":""},children:[i&&!uR.value&&si(l5,{sendAdEvent:t,config:l.getCloseButtonConfig(),showLastChanceEndcard:v.enabled}),n&&si(u_,{sendAdEvent:t,htmlService:l,scene:e})]})]})},uP=({isCloseButtonVisible:e,scene:t,sendEvent:n,shouldRenderIFrame:i,preloadService:r=sT(),customClassName:a})=>{let o=r.getHTMLScenesToPreload(t);return(null==o?void 0:o.length)?si("div",{children:o.map((e=>si(uL,{scene:e.scene,sendAdEvent:n,shouldRenderIFrame:e.shouldRenderIFrame,isCloseButtonVisible:e.isCloseButtonVisible,eligibleToPreload:!0,startPreloading:e.startPreloading,customClassName:a},e.scene.getId())))}):oe(t)&&si(uL,{scene:t,sendAdEvent:n,shouldRenderIFrame:i,isCloseButtonVisible:e,eligibleToPreload:!1,startPreloading:!1,customClassName:a},t.getId())},ub=({scene:e,sendEvent:t,isCloseButtonVisible:n,shouldRenderIFrame:i,isFreeForm:r=!1,showVideoBlur:a=!1,useBackgroundImage:o=!1,imageCustomClassName:s,htmlCustomClassName:l,preloadService:c})=>si(eY,{children:[e instanceof az&&e.getSceneType()===t7.image&&si(cP,{scene:e,sendAdEvent:t,isCloseButtonVisible:n,useBackgroundImage:o,customClassName:s},e.getId()),a9(e)&&si(dK,{scene:e,sendAdEvent:t,isCloseButtonVisible:n,isFreeForm:r,showVideoBlur:a},e.getId()),si(uP,{isCloseButtonVisible:n,scene:e,sendEvent:t,shouldRenderIFrame:i,customClassName:l,preloadService:c})]});hZ="_37VDnG_composite";var uw=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=c_(e,t),r=ch(n);return i?si("div",{className:"_37VDnG_component",children:si(ub,{scene:i,sendEvent:r,isCloseButtonVisible:!1,shouldRenderIFrame:!0,showVideoBlur:!0,imageCustomClassName:"_37VDnG_compositeImage",useBackgroundImage:!0,htmlCustomClassName:"_37VDnG_compositeHtml"})}):null};const uV=tR(!1);var uM=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{co(t),sY(),cc(e),cD({callToActionConfig:e.getLastChanceEndcardConfig().cta,sceneId:e.getId()}),cN({fullScreenClickConfig:e.getLastChanceEndcardConfig().fsc,sceneId:e.getId()}),cy(e.getId(),e.isChild());let i=tu((()=>e.getDecodedHtml()),[e]);return si("div",{className:hZ,children:[si(ca,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{uV.value=e},sceneId:e.getId()}),n&&!uV.value&&si(l5,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),e&&e.getSceneType()===t7.composite&&si("div",{className:hZ,children:si(cu,{htmlString:i,VmComponent:uw})})]})},uk=(e=sD())=>{let t=e.getVideoInterpreter(),n=tY(null==t?void 0:t.state);return tc((()=>{if(!t)return()=>{};let{state:e,status:i}=t;i!==d.Running&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]},uU=()=>eo(),uB=({isPrivacyDrawerOpen:e,service:t=sD(),pictureInPictureReportingService:n=uU()})=>{var i;let r=td(null),[a]=uk(t),o=tu((()=>sh()),[]),s=tY(!1),l=tY(!1),c=tY(!1),d=e=>{e===lL.LEFT&&(c.value=!0),e===lL.UP&&(l.value=!0)},u=()=>{n.emit({type:"picture-in-picture",event:nN.CLOSE,fireOnlyOnce:!0})};tc((()=>{let e=t.getVideoElement(),n=r.current;e&&n&&(n.appendChild(e),s.value=!0,e.onended=()=>{u()})}),[]);let E=(n,i)=>{t.videoAdViewableChange(n,i,e)};return tc((()=>(o.addEventHandler("viewability",E),()=>{o.removeEventHandler("viewability",E)})),[o]),tc((()=>{var e;let n=t.getVideoElement();if(n)switch(null===(e=a.value)||void 0===e?void 0:e.value){case og.PLAYING:n.play();break;case og.PAUSED:n.pause()}}),[null===(i=a.value)||void 0===i?void 0:i.value]),tc((()=>{r.current&&(t.isPortrait()?r.current.style.height="auto":r.current.style.width="auto")}),[t.isPortrait()]),cN(t.getFullScreenCallToActionEventHandlerProps()),si(lk,{onSwipeUp:()=>d(lL.UP),onSwipeLeft:()=>d(lL.LEFT),children:si("button",{type:"button","aria-label":"Picture in Picture",ref:r,onClick:()=>t.clickHandler(),onAnimationEnd:()=>{s.value=!1},onTransitionEnd:u,className:lU("i0Mp0G_pictureInPictureContainer",""+(s.value?"i0Mp0G_animatingVideo":"i0Mp0G_animationEnded"),""+(c.value?"i0Mp0G_slideLeft":""),""+(l.value?"i0Mp0G_slideUp":""))})})},uH=(e,t,n,i=or())=>{i.emit({name:K.FRUSTRATION_CLICKS,metric:G.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})},uW=(e,t=lj())=>{t.emit({type:"custom-mraid",event:lY.CLOSE,data:{is_video_scene:a9(e)}})},ux=()=>document.querySelector("#dynamic"),uF=(e,t,n,i=ux())=>{tc((()=>{let r=()=>{t(n)};return null==i||i.addEventListener(e,r),()=>{null==i||i.removeEventListener(e,r)}}),[i])},uK=()=>{let[e,t]=lp(),n=sX(e.value),i=n.getSceneType();l$(uH,n),uF(lY.CLOSE,uW,n);let{isCloseButtonVisible:r,isPrivacyButtonVisible:a,isPrivacyDrawerOpen:o,shouldRenderIFrame:s,shouldRenderPictureInPicture:l,isFreeForm:c,allowDebug:d}=e.value.context,u=a&&i!==t7.closed;return si("div",{id:"gRz7DW_ad",children:si(lC,{children:[si(lD,{}),l&&si(uB,{isPrivacyDrawerOpen:o}),u&&si(lz,{sendAdEvent:t,allowDebug:d}),i===t7.gdpr&&si(lA,{sendAdEvent:t}),si(ub,{scene:n,sendEvent:t,isCloseButtonVisible:r,shouldRenderIFrame:s,isFreeForm:c}),i===t7.composite&&si(uM,{scene:n,sendAdEvent:t,isCloseButtonVisible:r},n.getId()),i===t7.closed&&si(lg,{})]})})},uG=(e=lc(),t=l_(),n=lT,i=sX)=>{let r=i(e.state);er.setValue({scene:r}),t.start(r),n(r),e.start()},uY=()=>r.getInstance().get(oD.getServiceIdentifier()),uj=async(e,t,n)=>{var i;let r={adCount:0,sameCreative:0,sameVideo:0},a=n.getPlacementType(),o=t.get(w.AD_SOURCE),s=t.get(w.CREATIVE_ID),l=null!==(i=t.get(w.ORIGINAL_VIDEO_URL))&&void 0!==i?i:t.get(w.MAIN_STREAM);return(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===a&&(r.adCount+=1),t===s&&n===o&&(r.sameCreative+=1),i===l&&(r.sameVideo+=1)})),{ad_count:r.adCount,same_creative:r.sameCreative,same_video:r.sameVideo}};const uX={[t7.video]:G.AD_START_WITH_VIDEO,[t7.endcard]:G.AD_START_WITH_ENDCARD,adStart:G.AD_START,lastChanceEndcard:G.AD_START_WITH_LAST_CHANCE_ENDCARD},uz=(e,t=new Set,n=[uX.adStart],i=null)=>{if(0===e.length)return i&&!n.includes(uX.lastChanceEndcard)?[...n,uX.lastChanceEndcard]:n;let[r,...a]=e,o=r.getSceneType(),s=i;return d1(r)&&!i&&(s=r),!t.has(o)&&o in uX?(t.add(o),uz(a,t,[...n,uX[o]],s)):uz(a,t,n,s)},u$=async(e=uY(),t=b(),n=en(),i=or(),a=uj,o=ss)=>{let s={name:K.AD_START,metric:G.AD_START,elapsed:Date.now()-r.getInstance().startTimestamp};await e.addRecord();let l=c({},s,await a(e,t,n)),d=uz(o()).map((e=>I(c({},l),{metric:e})));i.emit(d)};var uZ=()=>{let e=r.getInstance(),t=new s2;e.bind(s2.getServiceIdentifier(),t)},uq=()=>{let e=r.getInstance(),t=new cm;e.bind(cm.getServiceIdentifier(),t)},uQ=(e=et(),t=L())=>{let n=r.getInstance(),i=sC.getServiceIdentifier(),a=Object.values(sp);e.getMraidVersion().isLessThan(sr.V5_2_1)&&(a=a.filter((e=>e!==sp.SILENT_CHANGE)));let o=new sC(a,t);n.bind(i,o),o.init()};const uJ=(e,t,n,i)=>{let r=t.getOperatingSystem()===H.iOS,a=sd(i),o=t.getSdkVersion(),s=n.isInLine();return!(!r||a||!(o.isEqualTo(new U("7.4.0"))&&s||o.isGreaterThanOrEqualTo(new U("7.4.1"))))||e};var u0=(e=sl(),t=so(),n=sN(),i=et(),r=en(),a=es())=>{let o=!!i.getMraidVersion().isGreaterThanOrEqualTo(sr.V5_2_1)&&uJ(t,i,r,a);e||o?n.mute():n.unmute()},u1=()=>{let e=r.getInstance(),t=eM.getServiceIdentifier();return e.get(t)},u2=(e,t,n,i,a,o)=>{var s,l,d,u,E,_,v,h,S,T,p,g,C;let I=r.getInstance(),O=c({ad_duration:o(I.startTimestamp,i),ad_source:null!==(l=e.get(w.AD_SOURCE))&&void 0!==l?l:"",advertiser_domain:null!==(d=e.get(w.ADVERTISER_DOMAIN))&&void 0!==d?d:"",creative_id:null!==(u=e.get(w.CREATIVE_ID))&&void 0!==u?u:"",creative_type:null!==(E=e.get(w.CREATIVE_TYPE))&&void 0!==E?E:"",country_code:t.getDeviceCountryCode(),dsp:n.getAdSource()===V.ACCELERATE?"accelerate":"others",elapsed:Date.now()-I.startTimestamp,event_id:null!==(_=e.get(w.SESSION_ID))&&void 0!==_?_:"",is_header_bidding:M(e.get(w.HEADER_BIDDING)),is_incentivized:n.isRewarded(),mediation_name:null!==(v=e.get(w.MEDIATION_NAME))&&void 0!==v?v:"",nautilus_version:null!==(h=e.get(w.NAUTILUS_VERSION))&&void 0!==h?h:"0.0.0",observed_experiments:null!==(S=e.get(w.OBSERVED_EXPERIMENTS))&&void 0!==S?S:"",os_version:t.getOsVersion().toString(),placement_reference_id:null!==(T=e.get(w.PLACEMENT_ID))&&void 0!==T?T:"",placement_type:n.getPlacementType(),platform:t.getOperatingSystem(),pub_app_store_id:null!==(p=e.get(w.PUB_ID))&&void 0!==p?p:"",sdk_version:t.getSdkVersion().toString(),template_version:null!==(g=window.appVersion)&&void 0!==g?g:"0.0.0"},null===(s=a())||void 0===s?void 0:s.getObservabilityData()),A=null!==(C=e.get(w.ACC_TESTS))&&void 0!==C?C:"";return n.getAdSource()===V.ACCELERATE&&A&&(O.acc_tests=B(A)),O},u3=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(c(I(c({},u2(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:F.EVENT,timestamp:null!=n?n:new Date,name:e}),t))}pushManyEvents(e){this.sendLog(e.map((e=>c(I(c({},u2(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:F.EVENT,timestamp:new Date}),e))))}pushError(e,t,n){let i="",r="";var a,o;"string"==typeof e?i=e:(r=null!==(a=null==e?void 0:e.stack)&&void 0!==a?a:"",i=null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"");this.sendLog(c(I(c({},u2(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:F.ERROR,timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return M(this.tokenService.get(w.OBSERVABILITY))}sendLog(e){this.isObserved()&&navigator.sendBeacon(this.getUrl(),JSON.stringify(e))}constructor(e,t,n,i,r,a,o){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.reportingService=r,this.getCurrentScene=a,this.getAdDuration=o}},u5=(e,t,n,i,r,a)=>new u3("https://logs.ads.vungle.com",e,t,n,i,r,a),u4=(e=u1())=>{e.init(u5)},u6="product-view",u8=((hB=u8||{}).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",hB.CLOSE_STORE_VIEW="closeStoreView",hB.OPEN_STORE_VIEW="openStoreView",hB.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",hB.SHOW_FALLBACK="showFallback",hB.UPDATE_OPEN_COUNT="updateOpenCount",hB),u7=(e,t)=>e.interpreterMap.get(t),u9=(e=t0(),t=u6)=>u7(e,t);const Ee=e=>"store-kit-orchestration"===e.type&&null!=e.event;var Et=class extends n9{emit(e){Ee(e)?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},En=e=>new Et(null!=e?e:eo()),Ei=((hH=Ei||{}).SKPV_FALLBACK_TO_SKO="SKPV_FALLBACK_TO_SKO",hH.SKO_FALLBACK_TO_SKPV="SKO_FALLBACK_TO_SKPV",hH.STORE_KIT_FALLBACK_TO_MRAID="STORE_KIT_FALLBACK_TO_MRAID",hH),Er=()=>eo();const Ea=()=>({id:u6,initial:ny.HIDDEN,context:{delay:0,openCount:0},states:{[ny.SHOWING]:{on:{[nR.CLOSE]:{target:ny.HIDDEN,actions:[u8.CLOSE_STORE_VIEW,u8.REMOVE_VIEWABILITY_HANDLER]},[nR.SET_FALLBACK]:{target:ny.FALLBACK,actions:[u8.REMOVE_VIEWABILITY_HANDLER]}}},[ny.HIDDEN]:{on:{[nR.OPEN]:{target:ny.SHOWING,actions:[u8.ADD_VIEWABILITY_HANDLER,u8.UPDATE_OPEN_COUNT,u8.OPEN_STORE_VIEW]}}},[ny.FALLBACK]:{on:{[nR.OPEN]:{actions:[u8.SHOW_FALLBACK]}}},[ny.INITIAL]:{},[ny.PREPARING]:{},[ny.DONE]:{}}}),Eo=(e,t)=>{var n;t.event===el.MAXIMIZED&&(null===(n=u9())||void 0===n||n.send({type:nR.CLOSE}))},Es=(e=L(),t=sh(),n=Er(),i=En())=>({actions:{[u8.OPEN_STORE_VIEW]:()=>{var t,i;n.emit({type:"store-kit-product-view",event:ew.APP_STORE_OPEN}),null===(i=e.getMraidExt())||void 0===i||null===(t=i.openAppStore)||void 0===t||t.call(i,0)},[u8.CLOSE_STORE_VIEW]:()=>{n.emit({type:"store-kit-product-view",event:ew.APP_STORE_CLOSE})},[u8.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",Eo)},[u8.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",Eo)},[u8.UPDATE_OPEN_COUNT]:g({openCount:e=>e.openCount?e.openCount+1:1}),[u8.SHOW_FALLBACK]:()=>{i.emit(Ei.SKPV_FALLBACK_TO_SKO)}}});var El=((hW=El||{}).PREPARE_STORE_VIEW="prepareStoreView",hW.SET_APP_STORE_ID="setAppStoreId",hW);const Ec=c({},u8,El),Ed=()=>({id:u6,initial:ny.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[ny.INITIAL]:{on:{[nR.READY]:{target:ny.PREPARING,actions:[Ec.SET_APP_STORE_ID,Ec.PREPARE_STORE_VIEW]}}},[ny.PREPARING]:{on:{[nR.PREPARE_SUCCESS]:{target:ny.HIDDEN}}},[ny.SHOWING]:{on:{[nR.CLOSE]:{target:ny.INITIAL,actions:[u8.CLOSE_STORE_VIEW,u8.REMOVE_VIEWABILITY_HANDLER]}}},[ny.HIDDEN]:{on:{[nR.OPEN]:{target:ny.SHOWING,actions:[u8.ADD_VIEWABILITY_HANDLER,u8.UPDATE_OPEN_COUNT,u8.OPEN_STORE_VIEW]}}},[ny.FALLBACK]:{},[ny.DONE]:{}}}),Eu=(e=L(),t=sh(),n=Er(),i=En())=>({actions:I(c({},Es(e,t,n,i).actions),{[Ec.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[Ec.PREPARE_STORE_VIEW]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreView)||void 0===n||n.call(i,t.appStoreId)},[Ec.OPEN_STORE_VIEW]:t=>{var i,r;t.appStoreId&&(n.emit({type:"store-kit-product-view",event:ew.APP_STORE_OPEN}),null===(r=e.getMraidExt())||void 0===r||null===(i=r.presentStoreView)||void 0===i||i.call(r,t.appStoreId))}})});var EE=class extends nL{init(e){var t;null===(t=this.interpreter)||void 0===t||t.send(c({type:nR.READY},e))}close(){var e,t;null===(e=this.interpreter)||void 0===e||e.send({type:nR.CLOSE}),null===(t=this.interpreter)||void 0===t||t.send({type:nR.READY})}constructor(e=Ed,t=Eu,n=t0()){super(e(),t(),n)}};const Ev=()=>{let e=Ea(),t=e.states[ny.SHOWING];return t.on=I(c({},t.on),{[nR.CLOSE]:{target:ny.DONE,actions:[u8.CLOSE_STORE_VIEW,u8.REMOVE_VIEWABILITY_HANDLER]}}),e},E_=()=>Ev();var Eh=class extends nL{fallback(){var e;!1!==this.hasFallback&&(null===(e=this.interpreter)||void 0===e||e.send({type:nR.SET_FALLBACK}),this.open())}constructor(e=Ea,t=Es,n=t0()){super(e(),t(),n)}},ES=class extends Eh{constructor(e=E_,t=Es,n=t0()){super(e,t,n)}};const ET=()=>{let e=Ed(),t=e.states[ny.SHOWING];return t.on=I(c({},t.on),{[nR.CLOSE]:{target:ny.DONE,actions:[u8.CLOSE_STORE_VIEW,u8.REMOVE_VIEWABILITY_HANDLER]}}),e},Ep=()=>ET();var Eg=class extends EE{constructor(e=Ep,t=Eu,n=t0()){super(e,t,n)}},EC=class extends Eh{constructor(e=Ev,t=Es,n=t0()){super(e,t,n)}},EI=class extends EE{constructor(e=ET,t=Eu,n=t0()){super(e,t,n)}},EA=class{withAppStoreId(e){let t=il(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new U("17.2"),t=new U("7.0"),n=new U("7.1"),i=new U("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(dQ()&&e.isLessThan(i))return new ES;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new Eg)}return x.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?dQ()?new EC:this.withAppStoreId(new EI):dQ()?new Eh:this.withAppStoreId(new EE)}constructor(e=et(),t=b()){this.environmentService=e,this.tokenService=t}},EO=class{resolve(){if(this.environmentService.getOperatingSystem()===H.iOS)return new EA(this.environmentService).resolve()}constructor(e=et()){this.environmentService=e}},Em=((hx={}).RESET_VIEWABLE="resetViewable",hx.SET_VIEWABLE_TO_FALSE="setViewableToFalse",hx),Ef=e=>({resetViewable:()=>{(e||s_()).resetViewable()},setViewableToFalse:()=>{(e||s_()).setViewable(!1)}});const EN=()=>({id:u6,initial:ny.HIDDEN,context:{delay:0},states:{[ny.SHOWING]:{on:{[nR.CLOSE]:{target:ny.HIDDEN,actions:[Em.RESET_VIEWABLE,nr.START_INTERVALS]}}},[ny.HIDDEN]:{on:{[nR.OPEN]:{target:ny.SHOWING,actions:[Em.SET_VIEWABLE_TO_FALSE,nr.PAUSE_INTERVALS]}}},[ny.INITIAL]:{},[ny.PREPARING]:{},[ny.FALLBACK]:{},[ny.DONE]:{}}}),ED=(e=s_(),t=ni())=>({actions:c({},Ef(e),na(t))});var ER=class extends nL{constructor(e=EN,t=ED,n=t0(),i=s_(),r=ni()){super(e(),t(i,r),n)}},Ey=(e=et())=>{let t=r.getInstance(),n=new EO(e).resolve();return n&&t.bind(ER.getServiceIdentifier(),n),n};class EL extends t8{static getInstances(e=lt()){return e?[new EL(io)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=t7.gdpr}}var EP=class extends n8{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!==(e=this.ecCtaUrlTokenValue)&&void 0!==e?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,placementType:s}){super({skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,id:e,placementType:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},Eb=(e,t=!1,n=es(),i=no())=>{let r=iV(n,i_.RESOURCE,ih.IMAGE).pipe(iM()).pipe(ik(iU(n,iB.SCENE_END))),a=I(c({},ru(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=rL(t7.image,e,n,i)),a};class Ew extends az{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return I(c({},e),{style:this.isLastPage()?nK.CLOSE:e.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:Eb(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=b(),t=en(),n=et(),i=iS(),r=aG()){let a=[],o=[w.EC_IMAGE,w.EC_IMAGE_2],s=e.has(w.EC_HTML);return o.filter((t=>e.has(t))).forEach(((r,o)=>{var l;let c=`image_${o}`,d=s?o+1:o,u=new iC(ig(c,e,t),i);a.push(new Ew({id:c,url:null!==(l=e.get(r))&&void 0!==l?l:"",index:d,fullScreenClickConfig:new EP({id:c,ecImageTokenValue:e.get(w.EC_IMAGE),ecCtaUrlTokenValue:e.get(w.EC_CTA_URL),skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new iu(d,this.isEndcardOnly(e),il(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.EC_SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new iE(d,il(e),e.get(w.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:u.getLastChanceEndcardConfig(),trackingEventMapConfig:new iA(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new iI({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===d}),callToActionConfig:new iO({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:rB(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:M(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rH({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,closeButtonConfigProvider:s,trackingEventMapConfig:l,callToActionConfig:c,placementTypeService:d=en(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E,incentivizedConfig:_}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:aj.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:c,closeButtonConfigProvider:s,placementTypeService:d,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E,incentivizedConfig:_}),this.sceneType=t7.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=l,this.callToActionConfig=c,this.closeButtonConfigProvider=s,this.placementTypeService=d,this.eventStreams=E}}var EV=class{static getInstances(e=b(),t=en(),n=iS()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach(((o,s)=>{var l;let c=o.startsWith(i),d=o.split(c?i:r),u=d[d.length-1],E=new iC(ig(u,e,t),n);a.push(new a7({id:u,url:null!==(l=e.get(o))&&void 0!==l?l:"",index:s,isAlternative:!0,videoType:c?nn.HLS:nn.PROGRESSIVE,fullScreenClickConfig:new n8({skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new aQ(aq(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),progressBarConfig:new aZ({videoProgressBarTokenValue:e.get(w.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(w.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(w.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfigProvider:new a$({closeButtonDelaySecondsTokenValue:e.get(w.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(w.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(w.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(w.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}),trackingEventMapConfig:new iA(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen(),showDownloadButton:M(w.VIDEO_SHOW_CTA),incentivizedConfig:new rH({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},EM=class{static getInstances(e=b(),t=en(),n=iS(),i=aG()){let r="ALT_EC_",a=[],o=e.getSeriesTokens(r),s=e=>{let t=e.split(r);return t[t.length-1]};return o.forEach(((r,o)=>{var l;let c=s(r),d=new iC(ig(c,e,t),n);a.push(new az({id:c,endcardContent:i.decode(null!==(l=e.get(r))&&void 0!==l?l:"",!1),index:o,isAlternative:!0,compressionType:aj.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:d.getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfigProvider:new iI({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}),trackingEventMapConfig:{enabled:!1},callToActionConfig:new iO({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:rB(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1,incentivizedConfig:new rH({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},Ek=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...EL.getInstances(),...a7.getInstances(),...az.getInstances(),...Ew.getInstances(),...iy.getInstances()]}buildAlternativeScenes(){let e,t=[...EV.getInstances(),...EM.getInstances()],n=this.mainScenes.findIndex((e=>e.getSceneType()===t7.endcard)),i=this.mainScenes[n+1];return i&&(e=i),t.forEach((t=>{let n=t.getTransitions().find((e=>e.name===t6.NEXT));n?n.scene=e:t.addTransition({name:t6.NEXT,scene:e,actions:[]}),t.next=e})),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=b()}},EU=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>e.name===t6.NEXT));a?a.scene=null!==(i=e[n+1])&&void 0!==i?i:void 0:t.addTransition({name:t6.NEXT,scene:null!==(r=e[n+1])&&void 0!==r?r:void 0,actions:[]})})),e}},EB=()=>!!nT()&&M(b().get(w.APP_STORE_ON_FIRST_TRANSITION)),EH=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null===(n=e.getTransitions())||void 0===n?void 0:n.find((e=>e.name===t6.NEXT&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>e.name===nB.SHOW_PRODUCT_VIEW))||i.actions.push({name:nB.SHOW_PRODUCT_VIEW}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[t7.gdpr]}},EW=()=>!!nT()&&M(b().get(w.APP_STORE_ON_SECOND_TRANSITION)),Ex=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null===(n=e[t].getTransitions())||void 0===n?void 0:n.find((e=>e.name===t6.NEXT&&e.scene));if(r&&r.actions.find((e=>e.name===nB.SHOW_PRODUCT_VIEW))&&(null==r||null===(i=r.scene)||void 0===i?void 0:i.getSceneType())===t7.closed){r.actions.push({name:nB.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex((e=>e.name===iN.CLOSE_AD));-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},EF=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},EK=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:t4.POSTROLL_VIEW})})),e}constructor(){this.sceneTypesToAddPostrollView=[t7.video,t7.image,t7.endcard]}},EG=class{transform(e){let t=e.filter((e=>e.getSceneType()===t7.endcard&&!e.isAlternative())),n=e.filter((e=>e.isAlternative()));return t.forEach((e=>{n.forEach((t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),n.forEach((e=>{n.forEach((t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),e}},EY=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:iR.INIT_CHECKPOINTS})})),e}constructor(){this.sceneTypesToInitCheckPoint=[t7.image,t7.endcard]}},Ej=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:iN.CLOSE_STOREKIT_OVERLAY})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[t7.video,t7.endcard]}},EX=class{transform(e){return e.forEach((e=>{var t;if(!a9(e))return;let n=e.getTransitions().find((e=>e.name===t6.NEXT)),i=null==n?void 0:n.actions.filter((e=>e.name!==nB.SHOW_PRODUCT_VIEW)),r={name:t6.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]},a=(null===(t=e.next)||void 0===t?void 0:t.getSceneType())!==t7.closed;a?r.actions.push({name:t4.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:t4.SEND_FATAL_VIDEO_ERROR}),e.setCanSkipToNextScene(a),e.addTransition(r)})),e}},Ez=class{transform(e){return e.filter((e=>{var t;return(null===(t=e.next)||void 0===t?void 0:t.getSceneType())===t7.closed})).forEach((e=>{if(n1(e)){var t;e.setLastChanceEndcardConfig(I(c({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:nA.CLOSE_OVERLAY_VIEW},{name:s0.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:s5.RESET_APP_STORE_ON_DELAY_SERVICE},{name:sZ.SHOW_LAST_CHANCE_ENDCARD},{name:nF.SET_CLOSE_BUTTON_HIDDEN},{name:t4.CLOSE_VIDEO_CURRENT_SCENE}];e.addTransition({name:t6.LAST_CHANCE_ENDCARD,actions:n}),e.addExitAction({name:sZ.CLOSE_LAST_CHANCE_ENDCARD});let i=e.getTransitions().find((e=>e.name===t6.NEXT));if(!i)return;e.addOrUpdateTransition({name:t6.NEXT,actions:[{name:nF.SET_CLOSE_BUTTON_VISIBLE},...null!==(t=null==i?void 0:i.actions)&&void 0!==t?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find((e=>e.name===nB.SHOW_PRODUCT_VIEW));if(r&&(e.addOrUpdateTransition({name:t6.LAST_CHANCE_ENDCARD,actions:[r]}),i.actions=i.actions.filter((e=>e.name!==nB.SHOW_PRODUCT_VIEW))),i.actions.some((e=>e.name===t4.SHOW_PICTURE_IN_PICTURE))){let t=e.getTransitions().find((e=>e.name===t6.LAST_CHANCE_ENDCARD));t&&(e.addOrUpdateTransition({name:t6.LAST_CHANCE_ENDCARD,actions:[{name:t4.SHOW_PICTURE_IN_PICTURE},{name:t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}]}),t.actions=null==t?void 0:t.actions.filter((e=>e.name!==t4.CLOSE_VIDEO_CURRENT_SCENE)),i.actions=i.actions.filter((e=>e.name!==t4.SHOW_PICTURE_IN_PICTURE&&e.name!==t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))}}})),e}},E$=(e=b())=>M(e.get(w.VX_ENDCARD)),EZ=class{transform(e){return e.forEach((e=>{var t;if(!a9(e)||e.getTransitions().some((e=>e.name===t6.COMPLETE&&void 0!==e.scene)))return;let n=e.getTransitions().find((e=>e.name===t6.NEXT));n&&e.addOrUpdateTransition({name:t6.COMPLETE,scene:null==n?void 0:n.scene,actions:[...null!==(t=n.actions.filter((e=>e.name!==t4.SHOW_PICTURE_IN_PICTURE&&e.name!==t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))&&void 0!==t?t:[]]})})),e}},Eq=class{transform(e){let t=e[0];if(!t||t.getSceneType()!==t7.video)return e;let n=t.getTransitions().find((e=>e.name===t6.NEXT));return n&&(n.actions=n.actions.filter((e=>e.name!==t4.CLOSE_VIDEO)),n.actions.push({name:t4.SHOW_PICTURE_IN_PICTURE},{name:t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}},EQ=(e=b())=>M(e.get(w.PICTURE_IN_PICTURE)),EJ=()=>{let e=new Ek;e.addTransformer(new EU),e.addTransformer(new EF),EB()&&e.addTransformer(new EH(1)),EW()&&e.addTransformer(new EH(2)),EQ()&&e.addTransformer(new Eq),e.addTransformer(new EK),e.addTransformer(new Ex),e.addTransformer(new EY),e.addTransformer(new Ej),e.addTransformer(new EX),e.addTransformer(new EZ);let t=[...e.build(),...e.alternativeScenes];return t=(new EG).transform(t),E$()&&(t=(new Ez).transform(t)),r.getInstance().bind(ia,t),t},E0=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return c(I(c({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},E1=(e,t=b())=>void 0===e?"":"string"==typeof e?e:t.get(e.token);const E2=e=>(Object.keys(e).forEach((t=>{let n=e[t];(void 0===n||""===n||Array.isArray(n)&&0===n.length)&&delete e[t]})),e);var E3=(e,t=b())=>{var n;let i=E1(null==e?void 0:e.icon,t),r=null==e||null===(n=e.screenshots)||void 0===n?void 0:n.map((e=>E1(e,t))).filter((e=>void 0!==e));return E2({enabled:!(!(null==e?void 0:e.name)||!i),downloads:null==e?void 0:e.downloads,icon:i,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:r})},E5=e=>{var t,n,i;let r=0;return(null==e?void 0:e.delay)&&(r="number"==typeof e.delay?e.delay:null!==(t=e.delay.value)&&void 0!==t?t:0),{delay:r,countdown:null===(n=null==e?void 0:e.countdown)||void 0===n||n,style:null!==(i=null==e?void 0:e.style)&&void 0!==i?i:nK.CLOSE}},E4=(e,t,n,i=b())=>{var r,a,o,s,l,d,u,E,_,v,h,S,T;let p=!1,g={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return g;let C=null!==(E=null==t?void 0:t.fsc)&&void 0!==E&&E,O=null!==(_=null==t||null===(r=t.cta)||void 0===r?void 0:r.text)&&void 0!==_?_:"Open";Object.keys(null!==(v=null==n?void 0:n.on)&&void 0!==v?v:{}).includes(t6.LAST_CHANCE_ENDCARD)&&(p=!0);let A=E3(t.appMeta,i),m=I(c({},A),{enabled:!(!A.name||!A.icon)}),f=4e3;return(null==t||null===(a=t.cta)||void 0===a?void 0:a.delay)&&(f=1e3*t.cta.delay),I(c({},g),{enabled:p,fsc:{enabled:C,ctaUrl:null!==(h=null==t||null===(o=t.cta)||void 0===o?void 0:o.url)&&void 0!==h?h:"",target:null==t||null===(s=t.storeKit)||void 0===s?void 0:s.fscTarget},appMeta:m,close:E5(null==t?void 0:t.close),cta:{text:O,url:null!==(S=null==t||null===(l=t.cta)||void 0===l?void 0:l.url)&&void 0!==S?S:"",isPersistent:null!==(T=null==t||null===(d=t.cta)||void 0===d?void 0:d.isPersistent)&&void 0!==T&&T,delay:f,appMeta:m,target:null==t||null===(u=t.storeKit)||void 0===u?void 0:u.ctaTarget}})},E6=(e,t,n=b())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?E3(e.appMeta,n):void 0,target:null!==(i=null==t?void 0:t.ctaTarget)&&void 0!==i?i:t9.SKPV}},E8=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},E7=e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0},E9=(e=b())=>({enabled:M(e.get(w.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:M(e.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}),ve=()=>{let e=r.getInstance(),t=st.getServiceIdentifier();return e.get(t)},vt=class{get cachedConfig(){return this.closeButtonService.cachedConfig}getDefaultConfig(){return{delay:0,style:nK.CLOSE,countdown:!0}}updateTotalDelay(e){void 0!==this.closeButtonService.totalDelaySeconds&&(this.closeButtonService.totalDelaySeconds=Math.max(0,this.closeButtonService.totalDelaySeconds-e))}calculateActualDelay(e){return e?"number"==typeof e?e:"%"===e.unit?Math.floor(this.closeButtonService.totalDelaySeconds*e.value/100):Math.min(e.value,this.closeButtonService.totalDelaySeconds):0}constructor(e,t,n,i=ve()){this.id=e,this.config=t,this.closeButtonService=i,void 0===this.closeButtonService.totalDelaySeconds&&void 0!==n&&(this.closeButtonService.totalDelaySeconds=n)}},vn=class extends vt{getCloseButtonConfig(e){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let t=this.config;if(!t)return this.getDefaultConfig();let n=this.calculateActualDelay(t.delay);e.videoDuration&&e.videoDuration<n&&(n=Math.floor(e.videoDuration));let i={delay:n,style:t.style,countdown:t.countdown};return this.cachedConfig.set(this.id,i),this.updateTotalDelay(n),i}},vi=class extends vt{getCloseButtonConfig(){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let e=this.config;if(!e)return this.getDefaultConfig();let t=this.calculateActualDelay(e.delay),n={delay:t,style:e.style,countdown:e.countdown};return this.cachedConfig.set(this.id,n),this.updateTotalDelay(t),n}};const vr={composite:(e,t,n,i,r=en(),a=b(),o=aG(),s=ve())=>new cv({id:e.id,html:e.html,children:e.children,closeButtonConfigProvider:new vi(e.id,e.close,null==n?void 0:n.globalTimer,s),lastChanceEndcardConfig:E4(e.id,e.lastChanceEndcard,i,a),placementTypeService:r,htmlDecoderService:o}),endcard:(e,t,n,i,r=en(),a=b(),o=aG(),s=ve())=>{var l;let c=e.compressed?aj.GZIP:aj.BASE64_ENCODED;return new az({id:e.id,endcardContent:o.decode(e.html,e.compressed),index:t,isAlternative:!1,compressionType:c,storeKitOverlayAutoShowConfig:E0(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:E4(e.id,e.lastChanceEndcard,i,a),omsdkEnabled:!1,trackingEventMapConfig:E8(e),callToActionConfig:E6(e.cta,e.storeKit,a),placementTypeService:r,closeButtonConfigProvider:new vi(e.id,e.close,null==n?void 0:n.globalTimer,s),eligibleToPreload:null!==(l=e.preload)&&void 0!==l&&l,incentivizedConfig:E9(a)})},image:(e,t,n,i,r=en(),a=b(),o=ve())=>{var s,l;return new Ew({id:e.id,url:E1(e.url,a),index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null===(s=e.cta)||void 0===s?void 0:s.url,target:null===(l=e.storeKit)||void 0===l?void 0:l.fscTarget},storeKitOverlayAutoShowConfig:E0(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:E4(e.id,e.lastChanceEndcard,i,a),trackingEventMapConfig:E8(e),placementTypeService:r,closeButtonConfigProvider:new vi(e.id,e.close,null==n?void 0:n.globalTimer,o),callToActionConfig:E6(e.cta,e.storeKit,a),incentivizedConfig:E9(a)})},video:(e,t,n,i,r=en(),a=b(),o=ve())=>{var s,l,c,d,u,E;let _=E1(e.url,a).endsWith(".m3u8")?nn.HLS:nn.PROGRESSIVE,v={enabled:e.fsc,target:null===(s=e.storeKit)||void 0===s?void 0:s.fscTarget,ctaUrl:null===(l=e.cta)||void 0===l?void 0:l.url},h={manifest:null===(c=e.streamManifest)||void 0===c?void 0:c.manifest,track_0:null===(d=e.streamManifest)||void 0===d?void 0:d.track_0,chunks:null===(E=e.streamManifest)||void 0===E||null===(u=E.chunks)||void 0===u?void 0:u.map((e=>E1(e,a))).filter((e=>""!==e))};return new a7({id:e.id,url:E1(e.url,a),isAlternative:!1,showDownloadButton:!1,index:t,videoType:_,streamManifest:h,progressBarConfig:(()=>{var t,n,i;let r=null!==(i=null==e||null===(t=e.progressBar)||void 0===t?void 0:t.show)&&void 0!==i&&i;return{show:r,color:r&&(null===(n=e.progressBar)||void 0===n?void 0:n.color)?e.progressBar.color:iZ}})(),fullScreenClickConfig:v,storeKitOverlayAutoShowConfig:E0(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:E6(e.cta,e.storeKit,a),lastChanceEndcardConfig:E4(e.id,e.lastChanceEndcard,i,a),closeButtonConfigProvider:new vn(e.id,e.close,null==n?void 0:n.globalTimer,o),originalVideoUrl:E7(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:E8(e),isFullscreen:r.isFullscreen(),incentivizedConfig:E9(a)})}};var va=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=EL.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new ln,t=vr,n=en()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach((e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)})),a.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let i=n(e,t,null==r?void 0:r.context,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)}))}));let o=new iy;this.scenesMap.set(o.getId(),o),this.scenes.push(o),this.scenes.forEach((e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},vo=class{transform(e){return e.filter((e=>!!n1(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t;e.addOrUpdateTransition({name:t6.NEXT,actions:[{name:sZ.CLOSE_LAST_CHANCE_ENDCARD},{name:nF.SET_CLOSE_BUTTON_VISIBLE}]});let n=[{name:nA.CLOSE_OVERLAY_VIEW},{name:s0.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:s5.RESET_APP_STORE_ON_DELAY_SERVICE},{name:nF.SET_CLOSE_BUTTON_HIDDEN},{name:iR.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}],i=null===(t=e.getTransitions().find((e=>e.name===t6.LAST_CHANCE_ENDCARD)))||void 0===t?void 0:t.actions.some((e=>e.name===t4.SHOW_PICTURE_IN_PICTURE));e.getSceneType()===t7.video&&(i?n.push({name:t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}):n.push({name:t4.CLOSE_VIDEO_CURRENT_SCENE})),e.addOrUpdateTransition({name:t6.LAST_CHANCE_ENDCARD,actions:n})})),e}},vs=class{transform(e,t=new ln){let n=t.getAdMachineConfig(),i=t=>e.find((e=>e.getId()===t));return e.forEach((e=>{var t,r,a;let o=e.getId(),s=i(null===(a=n.states[o])||void 0===a||null===(r=a.on)||void 0===r||null===(t=r.NEXT)||void 0===t?void 0:t.target);s&&(e.next=s,s.prev=e)})),e}},vl=class{transform(e,t=new ln){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(t.getSceneType()===t7.composite){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,o=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&(n.child=!0,o.push(n))})),t.addScenes(o),i.push(t)}})),e.forEach((e=>{e.getSceneType()!==t7.composite&&(i.some((t=>t.getSceneType()===t7.composite&&t.getScenes().includes(e)))||i.push(e))})),i}},vc=class{transform(e){var t;let n=(null===(t=e[0])||void 0===t?void 0:t.getSceneType())===t7.video?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>e.name===t6.NEXT));return(null==i?void 0:i.actions.some((e=>e.name===t4.SHOW_PICTURE_IN_PICTURE)))&&(i.actions=i.actions.filter((e=>e.name!==t4.CLOSE_VIDEO)).concat({name:t4.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}};const vd=[new vs,new EK,new EY,new Ej,new vo,new vc,new EX,new EZ,new vl];var vu=(e=new ln,t=vd)=>{let n=new va(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return r.getInstance().bind(ia,i),i},vE=(e=b(),t=vu,n=EJ)=>{e.has(w.AD_EXPERIENCE)?t():n()},vv=()=>{if(!nU())return;let e=r.getInstance(),t=nI();if(!t)return;let n=new sQ(t);return e.bind(sQ.getServiceIdentifier(),n),n};const v_=(e=b())=>{let t=e.get(w.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},vh=(e=b())=>{var t,n;switch(null===(n=e.get(w.SKOVERLAY_DISMISSIBLE))||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},vS=()=>({position:"bottom",dismissible:!0});var vT=(e=b())=>{let t=vS(),n=v_(e);void 0!==n&&(t.position=n);let i=vh(e);return void 0!==i&&(t.dismissible=i),t},vp=((hF=vp||{}).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",hF.PREPARE_OVERLAY="PREPARE_OVERLAY",hF.SET_APP_STORE_ID="SET_APP_STORE_ID",hF);const vg=c({},u8,vp);var vC="store-kit-overlay";const vI=(e=vS(),t=np.APP_STORE)=>({id:vC,initial:nu.IDLE,context:{displayOptions:e,fallback:t},states:{[nu.IDLE]:{on:{[nd.START_DELAY_SHOW]:{target:nu.DELAY_SHOW,actions:[nE.ASSIGN_FALLBACK]},[nd.START_IMMEDIATE_SHOW]:{target:nu.IMMEDIATE_SHOW,actions:[nE.ASSIGN_FALLBACK,nE.SHOW_SKO]},[nd.SET_DISPLAY_OPTIONS]:{actions:nE.ASSIGN_DISPLAY_OPTIONS}}},[nu.DELAY_SHOW]:{on:{[nd.CLOSE]:{target:nu.IDLE},[nd.INTERRUPT]:{target:nu.DELAY_SHOW_INTERRUPTED},[nd.SHOW]:{target:nu.DELAY_SHOW_IMMEDIATE,actions:nE.SHOW_SKO},[nd.START_IMMEDIATE_SHOW]:{target:nu.IMMEDIATE_SHOW,actions:[nE.ASSIGN_FALLBACK,nE.CANCEL_DELAY_SHOW,nE.SHOW_SKO]}}},[nu.DELAY_SHOW_IMMEDIATE]:{on:{[nd.SET_VISIBLE]:{target:nu.DELAY_SHOW_VISIBLE,actions:nE.EMIT_OBSERVABILITY_EVENT},[nd.CLOSE]:{target:nu.IDLE}}},[nu.DELAY_SHOW_VISIBLE]:{on:{[nd.CLOSE]:{target:nu.CLOSING,actions:nE.CLOSE_SKO},[nd.FINISH]:{target:nu.IDLE},[nd.INTERRUPT]:{target:nu.DELAY_SHOW_INTERRUPTED,actions:nE.CLOSE_SKO}}},[nu.DELAY_SHOW_INTERRUPTED]:{on:{[nd.RESUME]:{target:nu.DELAY_SHOW_IMMEDIATE,actions:nE.SHOW_SKO},[nd.CLOSE]:{target:nu.IDLE}}},[nu.IMMEDIATE_SHOW]:{on:{[nd.SET_VISIBLE]:{target:nu.IMMEDIATE_SHOW_VISIBLE,actions:nE.EMIT_OBSERVABILITY_EVENT},[nd.INTERRUPT]:{target:nu.CLOSING,actions:nE.CLOSE_SKO},[nd.SET_FALLBACK]:{target:nu.FALLBACK}}},[nu.IMMEDIATE_SHOW_VISIBLE]:{on:{[nd.CLOSE]:{target:nu.CLOSING,actions:nE.CLOSE_SKO},[nd.FINISH]:{target:nu.IDLE},[nd.INTERRUPT]:{target:nu.CLOSING,actions:nE.CLOSE_SKO}}},[nu.FALLBACK]:{on:{[nd.START_IMMEDIATE_SHOW]:{actions:nE.SHOW_FALLBACK}}},[nu.CLOSING]:{on:{[nd.FINISH]:{target:nu.IDLE}}},[nu.ERROR]:{},[nu.INITIAL]:{},[nu.PREPARING]:{}}}),vA=(e,t,n,i)=>({actions:{[nE.EMIT_OBSERVABILITY_EVENT]:()=>{t.emit(K.STORE_KIT_OVERLAY)},[nE.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,1,t.displayOptions)},[nE.CLOSE_SKO]:()=>{var t,n;null===(n=e.getMraidExt())||void 0===n||null===(t=n.dismissStoreOverlayView)||void 0===t||t.call(n)},[nE.ASSIGN_FALLBACK]:g(((e,t)=>{var n;return I(c({},e),{fallback:null!==(n=t.fallback)&&void 0!==n?n:e.fallback})})),[nE.ASSIGN_DISPLAY_OPTIONS]:g(((e,t)=>{var n;return I(c({},e),{displayOptions:null!==(n=t.displayOptions)&&void 0!==n?n:e.displayOptions})})),[nE.SHOW_FALLBACK]:e=>{switch(e.fallback){case np.SKPV:n.emit(Ei.SKO_FALLBACK_TO_SKPV);break;case np.APP_STORE:n.emit(Ei.STORE_KIT_FALLBACK_TO_MRAID)}},[nE.CANCEL_DELAY_SHOW]:()=>{null==i||i.reset()}}}),vO=(e=vS(),t=np.APP_STORE)=>{let n=vI(e,t);return I(c({},n),{initial:nu.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:I(c({},n.states),{[nu.INITIAL]:{on:{[nd.READY]:{target:nu.PREPARING,actions:[vg.SET_APP_STORE_ID,vg.PREPARE_OVERLAY]}}},[nu.PREPARING]:{on:{[nd.SET_PREPARED]:{target:nu.IDLE},[nd.SET_ERROR]:{target:nu.ERROR,actions:vg.EMIT_PREPARE_ERROR}}},[nu.DELAY_SHOW_VISIBLE]:{on:{[nd.CLOSE]:{target:nu.CLOSING,actions:nE.CLOSE_SKO},[nd.FINISH]:{target:nu.INITIAL},[nd.INTERRUPT]:{target:nu.DELAY_SHOW_INTERRUPTED,actions:nE.CLOSE_SKO}}},[nu.IMMEDIATE_SHOW_VISIBLE]:{on:{[nd.CLOSE]:{target:nu.CLOSING,actions:nE.CLOSE_SKO},[nd.FINISH]:{target:nu.INITIAL},[nd.INTERRUPT]:{target:nu.CLOSING,actions:nE.CLOSE_SKO}}},[nu.CLOSING]:{on:{[nd.FINISH]:{target:nu.INITIAL}}}})})},vm=(e=L(),t=or(),n=sJ(),i=En())=>({actions:I(c({},vA(e,t,i,n).actions),{[vg.PREPARE_OVERLAY]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[vg.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[vg.EMIT_PREPARE_ERROR]:()=>{t.emit(K.STORE_KIT_OVERLAY_PREPARE_ERROR)},[nE.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.presentStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[nE.CLOSE_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.dismissStoreOverlayView)||void 0===n||n.call(i,t.appStoreId)}})});var vf=class extends nC{init(e){this.interpreter.send(c({type:nd.READY},e))}close(){super.close(),this.interpreter.send({type:nd.READY})}finish(){super.finish(),this.interpreter.send({type:nd.READY})}constructor(e=vO,t=vm,n=t0(),i=b(),r=et(),a=L()){super(e(vT(i),ng(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},vN=class extends nC{constructor(e=vI,t=vA,n=t0(),i=b(),r=et(),a=L(),o=or(),s=En(),l=sJ()){super(e(vT(i),ng(r)),t(a,o,s,l),n)}},vD=class{withAppStoreId(e){let t=il(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===H.iOS)return dQ(this.environmentService)?new vN:this.withAppStoreId(new vf)}constructor(e=et(),t=b()){this.environmentService=e,this.tokenService=t}},vR=(e=et(),t=b())=>{let n=r.getInstance(),i=new vD(e,t).resolve();return i&&n.bind(nC.getServiceIdentifier(),i),i},vy=(e=sR())=>{e.init()};const vL={},vP=()=>{window.omidBridge&&Object.entries(vL).forEach((([e,t])=>{var n;"function"==typeof(null===(n=window.omidBridge)||void 0===n?void 0:n[e])&&window.omidBridge[e](...t)}))};var vb=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const vw=new U("6.9.1"),vV=async(e=b(),t=et(),n=vb,i=eo(),r=vP)=>{if(M(e.get(w.OM_ENABLED))&&!t.getSdkVersion().isLessThan(vw))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},vM=e=>{var t,n;null!=(null==e||null===(t=e.data)||void 0===t?void 0:t.current_time)&&null!=(null==e||null===(n=e.data)||void 0===n?void 0:n.duration)&&rI(e.data.current_time,e.data.duration,Math.round(e.data.current_time))},vk=e=>{let t=ea();a9(t)&&sj(e,t.getId(),t.getTrackingEventMapConfig())},vU=e=>{var t,n;let i=u1();(null==e||null===(t=e.data)||void 0===t?void 0:t.error)&&i.pushError(e.data.error,{url:null===(n=e.data)||void 0===n?void 0:n.video_url,error_source:Y.RESOURCE})},vB=e=>{let t=u1(),n={[rv.HLS_VIDEO_STALLED]:[K.HLS_VIDEO_STALLED,G.HLS_VIDEO_STALLED],[rv.HLS_LEVEL_SWITCHED]:[K.HLS_LEVEL_SWITCHED,G.HLS_LEVEL_SWITCHED]};t.pushEvent(c({name:n[e.event][0],metric:n[e.event][1]},e.data))};var vH=(e,t)=>{let n=ii(e);switch(t.event){case rv.PROGRESS:vM(t);break;case rv.MUTE:case rv.UNMUTE:n.emit(t.event===rv.MUTE?n7.VIDEO_MUTE:n7.VIDEO_UNMUTE),vk(t.event===rv.MUTE?ne.MUTE:ne.UNMUTE);break;case rv.CLOSE:n.emit(n7.VIDEO_CLOSE),vk(ne.SKIP);break;case rv.PAUSE:case rv.PLAY:vk(t.event===rv.PAUSE?ne.PAUSE:ne.RESUME);break;case rv.ERROR:vU(t);break;case rv.HLS_VIDEO_STALLED:case rv.HLS_LEVEL_SWITCHED:vB(t)}};const vW=(e,t)=>{if(t===H.iOS)return e===n7.VIDEO_LENGTH?"7.4.1":"0.0.0";switch(e){case n7.REWARD_GRANTED:return"6.12.0";case n7.VIDEO_LENGTH:return"7.4.4";default:return"0.0.0"}};var vx=(e,t,n=L().getMraidBridgeExt(),i=et())=>{let r=i.getSdkVersion(),a=vW(t.event,i.getOperatingSystem());r.isGreaterThanOrEqualTo(new U(a))&&(null==n||n.notifyTPAT(t.event))},vF=(e,t,n=no(),i=ni(),r=oy)=>{if(t.event===el.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===el.MAXIMIZED){let e=r();if(null==e?void 0:e.state.matches(og.AUTO_PLAY_FAIL))return;n.wake(),i.startAll()}};let vK=null;var vG=(e,t,n=L())=>{if(t.event===nm.START){if(vK)return;let e=n.getMraidBridgeExt();e&&(vK=window.setInterval((()=>{e.creativeHeartbeat()}),4e3))}else t.event===nm.STOP&&vK&&(window.clearInterval(vK),vK=null)},vY=((hK={}).OVERLAY_PREPARED="vungle.events.storeoverlay.success",hK.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",hK.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",hK.OVERLAY_FAILED="vungle.events.storeoverlay.failed",hK),vj=((hG={}).STORE_VIEW_PREPARED="vungle.events.preparestore.success",hG.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",hG),vX=((hY={}).VISIBLE="vungle.events.storekit.visible",hY.FAILED="vungle.events.storekit.failed",hY.FINISHED="vungle.events.storekit.finished",hY),vz=(e=t0(),t=vC)=>u7(e,t);const v$=e=>{var t;if(0===e){let e=nI();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null===(t=vz())||void 0===t||t.send({type:nd.SET_VISIBLE}))},vZ=e=>{var t,n;0===e?null===(t=nP())||void 0===t||t.close():1===e&&(null===(n=nI())||void 0===n||n.finish())},vq=e=>{var t,n;0===e?null===(t=nP())||void 0===t||t.fallback():1===e&&(null===(n=nI())||void 0===n||n.fallback())};var vQ=(e,t)=>{var n;if(!Object.values(vX).includes(t.event))return;let i=null===(n=t.data)||void 0===n?void 0:n.mode;switch(t.event){case vX.VISIBLE:v$(i);break;case vX.FINISHED:vZ(i);break;case vX.FAILED:vq(i)}},vJ=(e,t,n=et(),i=sR())=>{t.data.is_fatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(x.sdkSeven)?i.notifyFatalError(t):nD())},v0=(e,t)=>{nT()&&Object.values(vj).includes(t.event)&&{[vj.STORE_VIEW_PREPARED]:()=>{var e;null===(e=u9())||void 0===e||e.send({type:nR.PREPARE_SUCCESS})},[vj.STORE_VIEW_CLOSED]:()=>{var e;null===(e=u9())||void 0===e||e.send({type:nR.CLOSE})}}[t.event]()},v1=(e,t)=>{var n;if(!nU())return;let i=nI();null===(n={[vY.OVERLAY_PREPARED]:()=>{var e;null===(e=vz())||void 0===e||e.send({type:nd.SET_PREPARED})},[vY.OVERLAY_FINISHED]:()=>{var e;null===(e=vz())||void 0===e||e.send({type:nd.FINISH})},[vY.OVERLAY_FAILED]:()=>{let e=vz();(null==e?void 0:e.state.matches(nu.PREPARING))?e.send({type:nd.SET_ERROR}):null==i||i.fallback()},[vY.OVERLAY_VISIBLE]:()=>{var e;null===(e=vz())||void 0===e||e.send({type:nd.SET_VISIBLE})}}[t.event])||void 0===n||n.call(void 0)},v2=(e,t,n=lc(),i=c2(),r=dV)=>{if(t.event===lY.CLOSE){let{is_video_scene:a}=t.data;if(n.state.context.isCloseButtonVisible){if(e.getLogger("custom-mraid").info(lY.CLOSE),(null==i?void 0:i.state.value)===cZ.SHOWING)return void i.send({type:cq.HIDE});if(!n.state.context.isPrivacyButtonVisible){if(n.state.context.isIncentivized&&a)return void r(n.send,i,e)({type:t6.NEXT});n.send({type:t6.NEXT})}}}};const v3={[cn.DOWNLOAD_BUTTON_CTA]:G.DOWNLOAD_BUTTON_CTA,[cn.ENDCARD_CTA]:G.ENDCARD_CTA,[cn.LAST_CHANCE_ENDCARD_CTA]:G.LAST_CHANCE_ENDCARD_CTA,[cn.PERSISTENT_CTA]:G.PERSISTENT_CTA,[oI.FSC]:G.FSC},v5=(e,t)=>e.getActivityEvents().filter((e=>"error-logging"===e.activity.eventType&&e.activity.data.error.message===t.message&&e.activity.data.error.error_source===t.error_source)).length>1;var v4=(e,t)=>{var n;let i=u1();if("error-logging"===t.type&&(null===(n=t.data)||void 0===n?void 0:n.error)&&!v5(e,t.data.error))i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=er.getValue().scene,n={name:K.CTA,metric:v3[t.event],scene_type:null==e?void 0:e.getSceneType()};i.pushEvent(n)}},v6=(e,t)=>{let n=u1();t.event===F.EVENT?n.pushEvent(t.data):t.event===F.ERROR&&t.data.error&&n.pushError(t.data.error)},v8=(e,t,n=sN())=>{t.event===sa.SILENT?n.mute():t.event===sa.UN_SILENT&&n.unmute()},v7=(e,t,n=L())=>{var i;t.event===le.DECODING_ERROR&&(null===(i=n.getMraid())||void 0===i||i.close())},v9=(e,t,n=L(),i=or(),r=uY(),a=l_())=>oc((()=>a.haveAllCompleted()),od.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{i.emit(K.AD_CLOSE,G.AD_CLOSE),null==r||r.addRecord(),n.getMraid().close()}));const _e=(e,t=ss())=>{let n=t.find((t=>t.getId()===e));return n||t.filter((e=>e.getSceneType()===t7.composite)).map((t=>_e(e,t.getScenes()))).find(Boolean)};var _t=_e;const _n={[t7.composite]:G.COMPOSITE_SCENE_END,[t7.endcard]:G.ENDCARD_SCENE_END,[t7.image]:G.IMAGE_SCENE_END,[t7.video]:G.VIDEO_SCENE_END};var _i=(e,t,n=_t,i=ss,r=l_(),a=or())=>{let o=n(t.data.scene_id);if(o&&t.event===iB.SCENE_END){let e=i().indexOf(o);r.subscribeAll(o).then((n=>{var i;Object.keys(n).length>0&&a.emit({type:"observability",event:F.EVENT,data:c({name:K.SCENE_END,metric:null!==(i=_n[t.data.scene_type])&&void 0!==i?i:G.SCENE_END,scene_id:t.data.scene_id,scene_type:t.data.scene_type,scene_index:e},o.getObservabilityData(),n)})}))}},_r=(e,t,n=L(),i=ii(),r=or())=>{t.event===im.GRANT_REWARD&&(n.getMraidBridgeExt().notifySuccessfulViewAd(),i.emit(n7.REWARD_GRANTED),r.emit(K.GRANT_REWARD,G.GRANT_REWARD))},_a=(e,t,n=cf(),i=nI(),r=nP(),a=et(),o=en())=>{if(t.event===Ei.SKPV_FALLBACK_TO_SKO){var s;let t=null!==(s=null==i?void 0:i.getState().matches(nu.FALLBACK))&&void 0!==s&&s;if(nU(a,o)&&!t)return void(null==i||i.open({fallback:np.APP_STORE}));e.emit({type:"store-kit-orchestration",event:Ei.STORE_KIT_FALLBACK_TO_MRAID})}t.event===Ei.SKO_FALLBACK_TO_SKPV&&(null==r||r.open()),t.event===Ei.STORE_KIT_FALLBACK_TO_MRAID&&n.invoke({url:void 0,target:t9.OFF,fireMMPEvents:!1})},_o=(e,t,n=or())=>{if(t.event===ew.APP_STORE_CLOSE){let t=e.getActivityEventPairs("store-kit-product-view",ew.APP_STORE_OPEN,ew.APP_STORE_CLOSE);if(n.getEventCount(K.APP_STORE_DURATION)<t.length){let e={name:K.APP_STORE_DURATION,metric:G.APP_STORE_DURATION,elapsed:Date.now()-t[t.length-1][0].timestamp};n.emit(e)}}},_s=(e,t,n=sD(),i=lc)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:t6.CLOSE_PICTURE_IN_PICTURE}))},_l=(e,t,n=or())=>{t.event===n7.CHECKPOINT_0&&n.emit(K.IMPRESSION,G.IMPRESSION)},_c=((hj=_c||{}).INACTIVITY="INACTIVITY",hj),_d=(e,t,n=or(),i=oU,r=ea,a=ss)=>{if(t.event===_c.INACTIVITY){let e=r(),t=a().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:K.INACTIVITY_OBSERVED,metric:G.INACTIVITY_OBSERVED,scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:i()})}},_u=()=>{let e=es();e.addEventHandler("*",v4),e.addEventHandler("close",v9),e.addEventHandler("observability",v6),e.addEventHandler("heartbeat",vG),e.addEventHandler("storekit-mraid",vQ),e.addEventHandler("storekit-mraid",v0),e.addEventHandler("storekit-mraid",v1),e.addEventHandler("tpat",vx),e.addEventHandler("tpat",_l),e.addEventHandler("video",vH),e.addEventHandler("video",dk),e.addEventHandler("viewability",vF),e.addEventHandler("error-logging",vJ),e.addEventHandler("custom-mraid",v2),e.addEventHandler("videoViewed",rA),e.addEventHandler("silent",v8),e.addEventHandler("free-form",v7),e.addEventHandler("scene-event",_i),e.addEventHandler("incentivized-event",_r),e.addEventHandler("store-kit-product-view",_o),e.addEventHandler("store-kit-orchestration",_a),e.addEventHandler("picture-in-picture",_s),e.addEventHandler("inactivity",_d)},_E=(e=L(),t=b())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},_v=()=>eo(),__=(e=et(),t=en(),n=_v(),i=ux())=>{nU(e,t)&&(dQ(e)||Object.values(vY).forEach((e=>{null==i||i.addEventListener(e,(()=>{n.emit({type:"storekit-mraid",event:e})}))})))},_h=(e=et(),t=_v(),n=ux())=>{nT(e)&&(dQ(e)||Object.values(vj).forEach((e=>{null==n||n.addEventListener(e,(()=>{t.emit({type:"storekit-mraid",event:e})}))})))},_S=(e=et(),t=_v(),n=ux())=>{e.getOperatingSystem()===H.iOS&&Object.values(vX).forEach((e=>{null==n||n.addEventListener(e,(n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})}))}))},_T=()=>eo();const _p=new U("7");var _g,_C,_I,_A,_O,_m,_f,_N,_D,_R,_y,_L,_P,_b,_w,_V,_M,_k,_U,_B,_H,_W,_x,_F,_K,_G,_Y,_j,_X,_z,_$,_Z,_q,_Q,_J,_0,_1,_2,_3,_5,_4,_6,_8,_7,_9,he,ht,hn,hi,hr,ha,ho,hs,hl,hc,hd,hu,hE,hv,h_,hh,hS,hT,hp,hg,hC,hI,hA,hO,hm,hf,hN,hD,hR,hy,hL,hP,hb,hw,hV,hM,hk,hU,hB,hH,hW,hx,hF,hK,hG,hY,hj,hX,hz,h$,hZ,hq,hQ,hJ,h0,h1,h2=(e=L(),t=_T(),n=et())=>{var i;let r=void 0!==(null===(i=e.getMraidBridgeExt())||void 0===i?void 0:i.creativeHeartbeat);n.getSdkVersion().isGreaterThanOrEqualTo(_p)&&r&&t.emit({type:"heartbeat",event:nm.START})},h3=-1,h5=function(e){addEventListener("pageshow",(function(t){t.persisted&&(h3=t.timeStamp,e(t))}),!0)},h4=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},h6=function(){var e=h4();return e&&e.activationStart||0},h8=function(e,t){var n=h4(),i="navigate";return h3>=0?i="back-forward-cache":n&&(document.prerendering||h6()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},h7=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},h9=function(e,t,n,i){var r,a;return function(o){var s;t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,s=t.value,t.rating=s>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},Se=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},St=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},Sn=function(e){var t=!1;return function(){t||(e(),t=!0)}},Si=-1,Sr=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Sa=function(e){"hidden"===document.visibilityState&&Si>-1&&(Si="visibilitychange"===e.type?e.timeStamp:0,Ss())},So=function(){addEventListener("visibilitychange",Sa,!0),addEventListener("prerenderingchange",Sa,!0)},Ss=function(){removeEventListener("visibilitychange",Sa,!0),removeEventListener("prerenderingchange",Sa,!0)},Sl=function(){return Si<0&&(Si=Sr(),So(),h5((function(){setTimeout((function(){Si=Sr(),So()}),0)}))),{get firstHiddenTime(){return Si}}},Sc=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Sd=[1800,3e3],Su=function(e,t){t=t||{},Sc((function(){var n,i=Sl(),r=h8("FCP"),a=h7("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-h6(),0),r.entries.push(e),n(!0)))}))}));a&&(n=h9(e,r,Sd,t.reportAllChanges),h5((function(i){n=h9(e,r=h8("FCP"),Sd,t.reportAllChanges),Se((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},SE=0,Sv=1/0,S_=0,Sh=function(e){e.forEach((function(e){e.interactionId&&(Sv=Math.min(Sv,e.interactionId),SE=(S_=Math.max(S_,e.interactionId))?(S_-Sv)/7+1:0)}))},SS=function(){return hq?SE:performance.interactionCount||0},ST=function(){"interactionCount"in performance||hq||(hq=h7("event",Sh,{type:"event",buffered:!0,durationThreshold:0}))},Sp=[],Sg=new Map,SC=0,SI=function(){var e=Math.min(Sp.length-1,Math.floor((SS()-SC)/50));return Sp[e]},SA=[],SO=function(e){if(SA.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Sp[Sp.length-1],n=Sg.get(e.interactionId);if(n||Sp.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};Sg.set(i.id,i),Sp.push(i)}Sp.sort((function(e,t){return t.latency-e.latency})),Sp.length>10&&Sp.splice(10).forEach((function(e){return Sg.delete(e.id)}))}}},Sm=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Sn(e),"hidden"===document.visibilityState?e():(n=t(e),St(e)),n},Sf=[200,500],SN=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Sc((function(){ST();var n,i,r=h8("INP"),a=function(e){Sm((function(){e.forEach(SO);var t=SI();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},o=h7("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=h9(e,r,Sf,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),St((function(){a(o.takeRecords()),i(!0)})),h5((function(){SC=SS(),Sp.length=0,Sg.clear(),i=h9(e,r=h8("INP"),Sf,t.reportAllChanges)})))})))},SD=[2500,4e3],SR={},Sy=function(e,t){t=t||{},Sc((function(){var n,i=Sl(),r=h8("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-h6(),0),r.entries=[e],n())}))},o=h7("largest-contentful-paint",a);if(o){n=h9(e,r,SD,t.reportAllChanges);var s=Sn((function(){SR[r.id]||(a(o.takeRecords()),o.disconnect(),SR[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Sm(s)}),{once:!0,capture:!0})})),St(s),h5((function(i){n=h9(e,r=h8("LCP"),SD,t.reportAllChanges),Se((function(){r.value=performance.now()-i.timeStamp,SR[r.id]=!0,n(!0)}))}))}}))},SL=[800,1800],SP=function e(t){document.prerendering?Sc((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Sb=function(e,t){t=t||{};var n=h8("TTFB"),i=h9(e,n,SL,t.reportAllChanges);SP((function(){var r=h4();r&&(n.value=Math.max(r.responseStart-h6(),0),n.entries=[r],i(!0),h5((function(){(i=h9(e,n=h8("TTFB",0),SL,t.reportAllChanges))(!0)})))}))},Sw={passive:!0,capture:!0},SV=new Date,SM=function(e,t){hQ||(hQ=t,hJ=e,h0=new Date,SB(removeEventListener),Sk())},Sk=function(){if(hJ>=0&&hJ<h0-SV){var e={entryType:"first-input",name:hQ.type,target:hQ.target,cancelable:hQ.cancelable,startTime:hQ.timeStamp,processingStart:hQ.timeStamp+hJ};h1.forEach((function(t){t(e)})),h1=[]}},SU=function(e){if(e.cancelable){var t,n,i,r=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){SM(r,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",t,Sw),removeEventListener("pointercancel",n,Sw)},addEventListener("pointerup",t,Sw),addEventListener("pointercancel",n,Sw)):SM(r,e)}},SB=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,SU,Sw)}))};const SH=e=>t=>{let n={FCP:K.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:K.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:K.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:K.WEB_VITALS_TIME_TO_FIRST_BYTE};e.emit({name:n[t.name],value:Math.round(t.value)})};var SW=(e=or(),t=Su,n=SN,i=Sy,r=Sb)=>{let a=SH(e);t(a),n(a),i(a),r(a)},Sx=e=>{try{return new URL(e).origin}catch(e){return""}},SF=e=>{let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),t.documentElement.innerHTML},SK=(e,t)=>{let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0},SG=class{getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!SK(n,"width")||!SK(n,"height"))return;return{src:i,baseUrl:Sx(i)}}catch(e){return}}async initializeIframeContentData(e,t){let n={content:e};if(t){let{src:i}=t;n.nestedFrameContent=c({},t);try{let t=await window.fetch(i);t.ok&&(n.nestedFrameContent.content=await t.text(),n.content=SF(e))}catch(e){}}return n}},SY=(e=ss())=>{let t=e.filter((e=>e.getSceneType()===t7.endcard));if(!t.length)return;let n=new SG;t.forEach((e=>{e.initIframeContentData(n)}))},Sj=(e,t)=>iw(e,"observability").pipe(ib((e=>{let{data:n}=e;return null!=n&&(Array.isArray(n)?n.some((e=>e.name===t)):n.name===t)}))),SX=(e=no(),t=es(),n=or(),i=1e4,r=Sj)=>{r(n,K.AD_START).pipe(iK((()=>iw(t,"*").pipe(function(e,t=no()){return n=>new iP((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},o=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>(e=>{i.next(e),r=void 0})(n)))).start()},error:e=>{var t;a(),null===(t=i.error)||void 0===t||t.call(i,e)},complete:()=>{var e;a(),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{a(),o.unsubscribe()}}}))}(i,e),ik(rl(iw(t,"inactivity"),r(n,K.AD_CLOSE))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:_c.INACTIVITY,fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:i_.EXCEPTION,data:{error:e}})},complete:()=>{}})},Sz=(e=L(),t=et())=>{var n;let i=e.getMraid();t.getOperatingSystem()===H.Windows&&(null==i||null===(n=i.useCustomClose)||void 0===n||n.call(i,!0))};const S$=async()=>{_E(),_u(),u4();let e=or();e.emit(K.AD_LOAD,G.AD_LOAD),vy(),uQ(),Ey(),vR(),vv(),uZ(),_h(),__(),_S(),vE(),SY(),u0(),await vV(),h2(),SW(),Sz(),uq(),SX(),e.emit(K.AD_LOAD_COMPLETE,G.AD_LOAD_COMPLETE)};(()=>{let e=r.getInstance(),t=new o,n=new f,i=new k(t,n);e.bind(o.getServiceIdentifier(),t),e.bind(l.getServiceIdentifier(),new l),e.bind(C.getServiceIdentifier(),new C),e.bind(f.getServiceIdentifier(),n),e.bind(y.getServiceIdentifier(),new y),e.bind(D.getServiceIdentifier(),new D),e.bind(k.getServiceIdentifier(),i),e.bind(x.getServiceIdentifier(),new x(t,n)),e.bind(eM.getServiceIdentifier(),new eM),e.bind(ek.getServiceIdentifier(),new ek),e.bind(tJ.getServiceIdentifier(),new tJ),e.bind(ot.getServiceIdentifier(),new ot),e.bind(oa.getServiceIdentifier(),new oa(n)),e.bind(od.getServiceIdentifier(),new od),e.bind(oS.getServiceIdentifier(),new oS),e.bind(oD.getServiceIdentifier(),new oD),e.bind(aK.getServiceIdentifier(),new aK),e.bind(om.getServiceIdentifier(),new om),e.bind(se.getServiceIdentifier(),new se),e.bind(st.getServiceIdentifier(),new st)})(),L().init(),window.omidBridge=new Proxy({},{get:(e,t)=>(...e)=>{vL[t]=e}}),((e=L())=>new Promise((t=>{let n=e.getMraid();(null==n?void 0:n.getState())===O.LOADING?null==n||n.addEventListener("ready",(()=>{t(!0)})):t(!0)})))().then(S$).then((()=>new Promise((e=>{var t;let n=L();if(null===(t=n.getMraid())||void 0===t?void 0:t.isViewable())e(!0);else{let t=window.setInterval((()=>{var i;(null===(i=n.getMraid())||void 0===i?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))}),100)}})))).then((()=>{var e,t,n,i,r;u$(),uG(),e=si(uK,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),eO.__&&eO.__(e,t),n=t.__k,i=[],r=[],e0(t,e=t.__k=eK(eY,null,[e]),n||eU,eU,t.namespaceURI,n?null:t.firstChild?eA.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),e1(i,e,r)}));</script> </body></html>